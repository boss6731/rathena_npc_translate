//===== Hercules Script ======================================
//= Kiel Hyre Quest
//===== By: ==================================================
//= L0ne_W0lf (Script), DZeroX (Timer)
//===== Current Version: =====================================
//= 4.7
//===== Description: =========================================
//= Quest for opening Robot Factory first and second floors.
//===== Additional Comments: =================================
//= 4.0 A whole bunch-a-updates to various npcs. [L0ne_W0lf]
//=     Corrected condition checks throughout the quest.
//=     Npcs no longer make use of the goto command.
//=     Uses temp npc vars now instead of temp char.
//=     Reduced the amount of variables used.
//=     Corrected some of the cutins in npcs with them.
//=     Added the missing dialogs and weight checks.
//=     Fixed many typos, and grammatical errors.
//=     NPC now names use '#<name>' instead of labels.
//=     Updated some NPC positions, and facings.
//=     Changed the way some NPCs work.
//=     Updated comments for get/delitem commands.
//= 4.1 Added an 'end;' to Kiel Hyre's dialog for the "Yes" option for if you want to confront Kiehl.
//= 4.2 Fixed some issues reported in bugreport:2129. [L0ne_W0lf]
//= 4.2a Follow up to last update. [L0ne_W0lf]
//= 4.2b Missed a condition, fixed it though. [L0ne_W0lf]
//= 4.2c More various fixes :D [L0ne_W0lf]
//= 4.3 Fixed improper condition in the Elly NPC. [L0ne_W0lf]
//=     Corrected some typos in the dialogs.
//= 4.4 Updated reviecer and robots NPC to use mobcount. (bugreport:2380) [L0ne_W0lf]
//= 4.5 Removed a delitem that was no logner needed. [L0en_W0lf]
//= 4.6 Fixed impossible condition for security guard. [L0ne_W0lf]
//= 4.7 Updated RE/Pre-RE EXP. [Euphy]
//============================================================

//============================================================================
// Kiel Hyre Quest/Robotic Lab Dungeon
//
// Script Dialog Obtained and Copied Down by L0ne_W0lf
// Timer work and some variable dances by DZeroX
// Based on [iRO Sakray] as of [03/29/2007]
//============================================================================
//----------------------------------------------------------------------------
// [Notes]
//  - Let it be noted that ALL DIALOG IS OFFICIAL TO IRO UNLESS SPECIFIED.
//  - I've fixed a few of iRO's mistakes, but I'm sure I made some of my own. 
//  - Will probably require a major optimizing.
//  - Not going to list ALL of the more usless NPCs. (Doors + Empty "Beautiful Ladies")
//  - Parties are *NOT REQUIRED* as per Doddler's Wiki information.
//
//----------------------------------------------------------------------------
// [Maps]                [Use]
//  yuno_in01 ........... Start quest in pub
//  kh_school ........... Deliver Wine here, Meet Elly
//  yuno ................ Get Delivery for/from "Little Kid"
//  lighthalzen ......... Get Delivery package for "Little Kid"
//  kh_vila ............. Kiel Hyre cottage.
//  kh_dun01 ............ Robot Factory; Save Kiel Hyre
//  kh_mansion .......... Kiel Hyre's Mansion in Lighthalzen
//  kh_kiehl01 .......... Kiehl's room/Cave
//  kh_kiehl02 .......... Kiehl's room/Boss Room
//
//----------------------------------------------------------------------------
// [Variables in Use]
//  KielHyreQuest 	- Main quest tracking variable (Quest finished at 106)
//
//  KHToastGirlEnd	- Pick up delivery if set to 1, 
//			- picked up delivery if set to 2
//			- finished if set to 3 
//			- Deleted once no longer needed.
//
//  KHCottagePoem1	- Tracks Poem 1 quest in cottage. (finished = 5)
//			- Deleted once no longer needed.
//
//  KHCottagePoem2	- Tracks Poem 2 quest in cottage. (finished = 3)
//			- Deleted once no longer needed.
//
//  .@KHInput$		- Used with "Security Guard"
//  			- Used with "Test Tube"
//  			- Used when "Elly" (inputing string in attempt to wake her)
//  			- Used with "Grave", (twice)
//  			- Used with "Heavy Door"
//  			- Used with "Mechanical Device"
//  			- Used for opening various doors in Kiehl's area.
//
//  .@KHFirstKeyhole	- Holds 1 (green keycard) or 2 (cottage key)
//  .@KHSecondKeyhole	- Holds 1 (green keycard) or 2 (cottage key)
//
//  .@KHPotionColor$	- Holds 'red', 'green', or 'yellow' depending on what wrong potion is selected.
//
//  .@KHSwords 		- Used with "Sword Hilt"
//
//  .@KHQRead		- Make sure player has asked questions to Kiel Hyre
//
//  .@KHTitle$		- Holds "Mr", "Mrs", or "Miss"
//
//  .@KHDoorPushAttempt	- Keeps track of how many times a person has attmepted to push the door open.
//
//  .@KHPryingItem$	- Used for incorrect options when prying open last door.
//
//  .KHKilled		- Tracks how many monsters have been killed. Used with "Receiver", "Robots", and "Kiehl" NPCs
//
//  .KHDoor1Open	- 0/1 Depending on if the first door is opened.
//  .KHDoor2Open	- 0/1 Depending on if the second door is opened.
//  .KHDoor3Open	- 0/1 Depending on if the third door is opened.
//  .KHDoor4Open	- 0/1 Depending on if the fourth door is opened.
//  .KHDoor5Open	- 0/1 Depending on if the fifth door is opened.
//
//  .KHKilledBoss	- 0/1 depending on if the boss has been killed.
//
//  $@KHQuestBusy	- 0/1 depending on if the boss room has been set in motion.
//
//----------------------------------------------------------------------------
// [NPCs]			 [Location]
//  Pub Master .................. yuno_in01	[ 35,178]
//  Hanie ....................... yuno_fild08	[196,196]
//  Security Guard .............. yuno_fild08	[158,194]
//  Security Guard .............. yuno_fild08	[158,183]
//  Student ..................... kh_school	[ 57,142]
//  Student ..................... kh_school	[ 57,139]
//  Lady ........................ kh_school	[176, 60]
//  Cute Student ................ kh_school	[179, 39]
//  Little Kid .................. yuno		[217,114]
//  Windmill Owner .............. lighthalzen	[365,300]
//  Cottage Keeper .............. yuno_fild02	[ 93,210]
//  Door ........................ yuno_fild02	[ 75,218]
//  Door ........................ yuno_fild02	[109,218]
//  Wall ........................ kh_vila	[191, 14]
//  Book ........................ kh_vila	[184, 20]
//  Book ........................ kh_vila	[181, 20]
//  Book ........................ kh_vila	[178, 20]
//  Book ........................ kh_vila	[175, 19]
//  Letter ...................... kh_vila	[179, 11]
//  Box ......................... kh_vila	[ 16,175]
//  Apple Box ................... kh_vila	[ 30,184]
//  Map ......................... kh_vila	[ 44,125]
//  Pot ......................... kh_vila	[ 33,148]
//  Calabash .................... kh_vila	[ 14, 55]
//  Pool ........................ kh_vila	[ 39, 39]
//  Vicious Dog ................. kh_vila 	[180,178]
//  Drawer ...................... kh_vila 	[115,186]
//  Box ......................... kh_vila 	[107,126]
//  Bookshelf ................... kh_vila 	[181,138]
//  Sword Hilt .................. kh_vila 	[136, 69]
//  Test Tube ................... kh_vila	[179, 69]
//  Test Tube ................... kh_vila	[185, 69]
//  Window ...................... yuno_fild08	[ 69,185]
//  Elly ........................ kh_school	[178,180]
//  Cookie Basket ............... kh_school	[175,175]
//  Window ...................... kh_school	[188,185]
//  Grave ....................... yuno_fild08	[ 72,170]
//  Heavy Door .................. kh_dun01	[236, 48]
//  Beautiful lady .............. kh_school	[119,149]
//  Beautiful lady .............. kh_school	[122,186]
//  Signboard ................... kh_dun01	[163,223]
//  Mechanical Device ........... kh_dun01	[166,223]
//  Mechanical Device ........... kh_dun01	[162,206]
//  Kiel_Hyre_Door .............. kh_dun01	[224,232]
//  Steward ..................... kh_mansion	[ 78, 55]
//  Kiel Hyre ................... kh_mansion	[ 22, 27]
//  Allysia ..................... kh_mansion	[ 22, 27]
//  Abduction_trigger ........... lighthalzen	[188,200]
//  Mysterious Woman ............ kh_mansion	[ 25, 79]
//  Odd Granma .................. yuno		[250,132]
//  Old Lady .................... yuno 		[250,132]
//  Rosimmir_Entrance ........... yuno		[273,141]
//  Table ....................... kh_rossi	[ 23, 23]
//  Shelf ....................... kh_rossi	[ 92, 40]
//  Desk ........................ kh_rossi	[144,146]
//  Bookshelf ................... kh_rossi	[144,146]
//  Bed ......................... kh_rossi	[154,286]
//  Old Fisherman ............... yuno_fild12	[232,222]
//  Wooden Board ................ yuno_fild09	[158,217]
//  Kiehl_Room_Warp ............. kh_mansion	[ 29, 27]
//  Entrance Device#KHEntry1 .... kh_dun01	[ 44, 20]
//  Entrance Device#KHEntry2 .... kh_dun01	[ 44,203]
//  Security Guard .............. yuno_fild08	[158,194]
//  Receiver .................... kh_kiehl01	[ 17, 39]
//  Flower Vase ................. kh_kiehl01	[ 13, 40]
//  Box ......................... kh_kiehl01	[ 19, 25]
//  Big Door .................... kh_kiehl01	[ 44, 33]
//  Big_Door_1_Warp ............. kh_kiehl01	[ 43, 33]
//  Big Door .................... kh_kiehl01	[174, 40]
//  Big_Door_2_Warp ............. kh_kiehl01	[174, 39]
//  Big Door .................... kh_kiehl01	[ 77,108]
//  Big_Door_3_Warp ............. kh_kiehl01	[ 68,108]
//  Big Door .................... kh_kiehl01	[ 41,177]
//  Big_Door_4_Warp ............. kh_kiehl01	[ 78,177]
//  Robots ...................... kh_kiehl01	[ 15,181]
//  Big Door .................... kh_kiehl01	[166,187]
//  Big_Door_5_Warp ............. kh_kiehl01	[166,186]
//  Kiehl_Room_Trap ............. kh_kiehl02	[ 49, 15]
//  Kiehl#Original .............. kh_kiehl02	[ 50, 52]
//  KiehlRoom ................... kh_kiehl02	[  1,  1]
//  Mitchell#KiehlRoom .......... kh_kiehl02	[ 49, 55]
//  Agent#KHAgent1 ....   ....... kh_kiehl02	[ 53, 52]
//  Agent#KHAgent2 .............. kh_kiehl02	[ 51, 49]
//  Agent#KHAgent3 .............. kh_kiehl02	[ 47, 50]
//  Agent#KHAgent4 .............. kh_kiehl02	[ 46, 53]
//  Kiehl#Copy .................. kh_kiehl02	[ 48, 53]
//  Kiehl_Roomn_Exit ............ kh_kiehl01	[ 50, 59]
//
//----------------------------------------------------------------------------
// [Functions]
//  None
//
//----------------------------------------------------------------------------
// [Conflicts]
//   Resolved
//
//============================================================================

//============================================================================
// Affiliated NPCs
//============================================================================

//----------------------------------------------------------------------------
// Juno Pub Master/Starting point.
//----------------------------------------------------------------------------
yuno_in01,35,179,4	script	班德#kh	1_ETC_01,5,5,{
	if (checkweight(7487,1) == 0) {
		mes "[班德]";
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}
	switch (KielHyreQuest) {
	case 0:
		mes "[班德]";
		mes "歡迎光臨, 要點些什麼呢?";
		next;
		switch(select("啤酒:雞尾酒:燒酒:下一次再來點")) {
		case 1:
			mes "[班德]";
			mes "啤酒的話馬上為你準備, ";
			mes "請你稍後";
			next;
			mes "(老闆從巨大的木桶裡";
			mes "有著漂亮褐色的光彩";
			mes "倒滿了看起來涼快的啤酒)";
			next;
			mes "[班德]";
			mes "這裡特製的'秀髮茲 啤酒' 出來了";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "你說的特製'秀髮茲 啤酒'啊...";
			mes "(鮮明的深褐色液體在玻璃杯裡閃爍著)";
			next;
			percentheal 5,-5;
			mes "["+strcharinfo(0)+"]";
			mes "咕嚕~";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "譁啊...";
			mes "老闆啊 這真的很好喝啊";
			next;
			mes "[班德]";
			mes "看樣子讓你心滿意足了, ";
			mes "哈哈..";
			mes "因為那是特製的啊...";
			close;
		case 2:
			mes "[班德]";
			mes "嗯...";
			mes "很抱歉客人, ";
			mes "目前雞尾酒只剩下";
			mes "在場內服務的分量了, ";
			mes "若你下一次再來時";
			mes "我一定為你準備好的";
			close;
		case 3:
			mes "[班德]";
			mes "唉..?";
			mes "'燒酒'啊...";
			mes "很抱歉客人, ";
			mes "我們不販售這類的酒";
			close;
		case 4:
			mes "[班德]";
			mes "那麼等你決定好之後再叫我吧";
			close;
		}
	case 1:
		mes "[班德]";
		mes "歡迎光臨, ";
		mes "要點些什麼呢?";
		next;
		switch(select("啤酒:雞尾酒:燒酒:請問有什麼問題嗎?:下一次再來點")) {
		case 1:
			mes "[班德]";
			mes "啤酒的話馬上為你準備, ";
			mes "請你稍後";
			next;
			mes "(老闆從巨大的木桶裡";
			mes "有著漂亮褐色的光彩";
			mes "倒滿了看起來涼快的啤酒)";
			next;
			mes "[班德]";
			mes "這裡特製的'秀髮茲 啤酒' 出來了";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "你說的特製'秀髮茲 啤酒'啊...";
			mes "(鮮明的深褐色液體在玻璃杯裡閃爍著)";
			next;
			percentheal 5,-5;
			mes "["+strcharinfo(0)+"]";
			mes "咕嚕~";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "譁啊...";
			mes "老闆啊 這真的很好喝啊";
			next;
			mes "[班德]";
			mes "看樣子讓你心滿意足了, ";
			mes "哈哈..";
			mes "因為那是特製的啊...";
			close;
		case 2:
			mes "[班德]";
			mes "嗯...";
			mes "很抱歉客人, ";
			mes "目前雞尾酒只剩下";
			mes "在場內服務的分量了, ";
			mes "若你下一次再來時";
			mes "我一定為你準備好的";
			close;
		case 3:
			mes "[班德]";
			mes "唉..?";
			mes "'燒酒'啊...";
			mes "很抱歉客人, ";
			mes "我們不販售這類的酒";
			close;
		case 4:
			mes "[班德]";
			mes "啊...嗯... 看樣子你是有聽到我之前說的自言自語啊, 只是...我們配送人員有受點傷, 造成要配送的物品和要拿來的物品 有點囤積啊";
			next;
			mes "[班德]";
			mes "........... 要拿來的物品在購買處那裡 會派人送過來的, 所以並沒有什麼大礙, 問題是要送往 '啟 海伊洛 學院'的 那些物品...";
			next;
			mes "[班德]";
			mes "嗯....";
			next;
			switch(select("原來是這樣啊:我可以幫你嗎?")) {
			case 1:
				mes "[班德]";
				mes "唉喲 唉喲...";
				mes "我好像對客人說些沒有用的話了呢, ";
				mes "非常抱歉..";
				mes "真是的...哈哈...";
				close;
			case 2:
				mes "[班德]";
				mes "唉? 嗯........... 是有點煩瑣啦.. 請問你可以幫我嗎?";
				next;
				switch(select("當然啊:等等..讓我先想一下")) {
				case 1:
					mes "[班德]";
					mes "是真的嗎? 真的感謝你啊!! 我也沒有什麼好報答你的呀..";
					next;
					mes "[班德]";
					mes "嗯嗯.. 那麼我就把你要送達的物品, 和收件人的名字告訴你吧";
					next;
					mes "[班德]";
					mes "要配送的物品是'^0000ff調理用的酒^000000', 要送達的地方是, '啟 海伊洛 學院'的 '^ff0000利可雷音 太太'啊^000000";
					next;
					mes "[班德]";
					mes "那麼就拜託你啦";
					getitem 7487,1; //酒店的酒
					set KielHyreQuest,2;
					close;
				case 2:
					mes "[班德]";
					mes "..........";
					mes "好 了解了...";
					close;
				}
			}
		case 5:
			mes "[班德]";
			mes "那麼等你決定好之後再叫我吧";
			close;
		}
	case 2:
	case 3:
	case 4:
	case 5:
		mes "[班德]";
		mes "來來已經遲到了請你趕快送去吧, ";
		mes "'^ff0000利可雷音 太太^000000'是有點挑剔的, ";
		mes "遲到的話會完蛋的";
		close;
	case 6:
		if (!countitem(7487)) {
			mes "[班德]";
			mes "啊 你已經去回來了, 這個真的謝謝你啦, 啊 這個雖然是個小東西, 就當做是酬勞請你收下它吧";
			next;
			select("那.. 我需要調理用的酒啊..");
			mes "[班德]";
			mes "啊 原來是這樣啊, 你還需要酒啊, 請你稍後";
			next;
			mes "翻東西的聲音.. 噗東... ...";
			next;
			mes "[班德]";
			mes "在這裡, 啊啊..就當做是我的誠意好了, 請你收下吧";
			getitem 7487,1; //酒店的酒
			set Zeny, Zeny + 1000;
			close;
		}
	default:
		mes "[班德]";
		mes "上一次真的謝謝你啦";
		mes "哈哈...";
		close;
	}
//OnTouch2:
OnTouch:
	if (KielHyreQuest < 1) {
		mes "[班德]";
		mes "唉喲...";
		mes "這齣大事了...";
		mes "怎麼辦啊...";
		set KielHyreQuest,1;
		close;
	} 
}

//----------------------------------------------------------------------------
// 朱諾；賣土司的小孩
//----------------------------------------------------------------------------
yuno,217,114,6	script	可愛的小孩#kh	96,{
	if (KielHyreQuest < 6) {
		mes "[思茲]"; 
		mes "買土司啊~ 土司~";
		mes "剛烤過的 還熱騰騰呢~";
		close;
	}
	else if (KielHyreQuest == 6) {
		if (KHToastGirlEnd < 1) {
			mes "[思茲]"; 
			mes "歡迎光臨~ 請問需要土司嗎?";
			next;
			switch(select("受愛麗之託而來:沒事")) {
			case 1:
				mes "[思茲]"; 
				mes "啊... 你是說^ff0000愛麗^000000姐姐的委託啊?";
				next;
				mes "[思茲]"; 
				mes "哈啊.. 我知道是什麼事情了, 她是不是又把實習的材料 變成不能用了呢? 真是拿^ff0000愛麗^000000姐姐 沒有辦法啊";
				next;
				mes "[思茲]"; 
				mes "我了解了! 是^ff0000愛麗^000000姐姐的請求的話, 我當然要聽她的囉! 她是我的主客戶呢..";
				next;
				mes "[思茲]"; 
				mes "嗯.. 可是... 很可惜的我們的材料也都用光了, 以目前的材料我們也不敷使用的關係.. 若可以的話請你到裡希塔樂鎮的輾米廠, ";
				mes "幫忙配送一下材料好嗎?";
				next;
				mes "[思茲]"; 
				mes "你只要說你是從朱諾土司商店派來的話, 他們會給你麵粉和雞蛋的, 只要把那些帶來的話, 我會把多餘的那一份分給你的";
				set KHToastGirlEnd,1;
				close;
			case 2:
				mes "[思茲]";
				mes "請你下一次再來使用~";
				close;
			}
		}
		else if (KHToastGirlEnd == 1) {
			mes "[思茲]";
			mes "請你到裡希塔樂鎮的輾米廠";
			mes "帶回來麵粉和雞蛋吧, ";
			mes "你說你是從朱諾土司商店派來的話, ";
			mes "他們會給你的";
			close;
		}
		else if (KHToastGirlEnd == 2) {
			mes "[思茲]";
			mes "啊 你回來了, 辛苦您了, 來 這是約定好要給你的 麵粉和雞蛋, ";
			mes "幫我向^ff0000愛麗^000000姐姐問候一下";
			delitem 7488,1; //送貨用的箱子
			getitem 7488,1; //送貨用的箱子
			set KHToastGirlEnd,3;
			close;
		}
	}
	else if ((KielHyreQuest >= 6) || (KHToastGirlEnd == 3)) {
		//KHToastGirlEnd no longer needed-- deleting.
		set KHToastGirlEnd,0;
		mes "[思茲]";
		mes "請大家來購買剛出爐的 熱騰騰土司噢~";
		close;
	}
}

//----------------------------------------------------------------------------
// 裡希塔樂鎮；輾米廠 主人
//----------------------------------------------------------------------------
lighthalzen,366,299,4	script	輾米廠 主人#kh	46,{
	if (checkweight(7488,1) == 0) {
		mes "[米思]";
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}
	if (KHToastGirlEnd < 1) {
		mes "[米思]";
		mes "有什麼事嗎, ";
		mes "我現在有點忙 請你下一次再來";
		close;
	}
	else if (KHToastGirlEnd == 1) {
		mes "[米思]";
		mes "有什麼事嗎, ";
		mes "我現在有點忙 請你下一次再來";
		next;
		switch(select("我是從朱諾土司商店那邊過來的:...")) {
		case 1:
			mes "[米思]";
			mes "啊啊... 是從土司商店那邊過來的啊, 請你等一下";
			next;
			mes "[米思]";
			mes "呵嗯... 我把那東西放在那裡了呢... 啊 在這裡";
			next;
			mes "[米思]";
			mes "來 請收下, 雞蛋會很容易碎掉的, 所以請你好好的攜帶";
			getitem 7488,1; //送貨用的箱子
			set KHToastGirlEnd,2;
			close;
		case 2:
			mes "[米思]";
			mes "你這傢伙 酷司啊~";
			mes "還不趕快去工作啊?";
			mes "還在那裡玩啊~!!";
			mes "你再繼續玩就不給你飯吃";
			close;
		}
	}
	else if (KHToastGirlEnd >= 2) {
		mes "[米思]";
		mes "唉喲...真是一個敗家子, ";
		mes "每天叫你去做的事你都不會去做, ";
		mes "只會想著要玩..";
		close;
	}
}

lighthalzen,366,289,2	script	輾米廠 助理	97,{
	switch (KHToastGirlEnd) {
	case 0:
		mes "[酷司]";
		mes "哼...";
		mes "也沒什麼事在忙, ";
		mes "每天裝做一副很忙的樣子..";
		mes "碎碎念..";
		close;
	case 1:
		mes "[酷司]";
		mes "嗚哇~";
		mes "我沒有在玩啊~!.";
		mes "你看嗎 我是在工作呀... ";
		mes "碎碎念..";
		close;
	case 2:
	case 3:
		mes "[酷司]";
		mes "啊~";
		mes "朱諾的土司商店啊?";
		mes "那裡的思茲姐姐真漂亮啊..";
		mes "嘻嘻...";
		close;
	}
}

//============================================================================
// 啟 海伊洛學院 NPC
//============================================================================

//----------------------------------------------------------------------------
// 少女 (有關於學院的事..)
//----------------------------------------------------------------------------
yuno_fild08,196,196,5	script	少女#kh1	102,{
	mes "[少女]";
	mes "啊...我也能進入'^0000FF啟 海伊洛 學院^000000'的話";
	mes "那有多好呢... ";
	mes "為什麼我媽媽沒有把我生成 ";
	mes "孤兒呢...真是的..";
	next;
	select("啟 海伊洛 學院?");
	mes "[少女]";
	mes "嗯...這裡是, ";
	mes "只收容孤兒的地方啊, ";
	mes "創立這學院的人是 ";
	mes "'^ff0000啟 海伊洛^000000'這號人物, ";
	mes "聽說他以前製作出很多奇怪的機械, ";
	mes "也賺了不少錢啊";
	next;
	mes "[少女]";
	mes "所以說以回饋社會的動機吧?";
	mes "因而為了孤兒們創立了學院, ";
	mes "就是這間學院啊";
	next;
	mes "[少女]";
	mes "聽說只要是在這間學院畢業的話, ";
	mes "就能謀職很好的工作呢..";
	mes "啊.. 我也想進這間學院啊";
	close;
}

//----------------------------------------------------------------------------
// 學院警衛
//----------------------------------------------------------------------------
yuno_fild08,158,194,6	script	警衛#1::KHAGuard	4_M_EIN_SOLDIER,{
	if ((KielHyreQuest < 2) || (KielHyreQuest > 31)) { 
		mes "[警衛]";
		mes "這裡是'^FF0000啟 海伊洛 學院^000000', ";
		mes "是限制一般人進出的, ";
		mes "若沒有什麼特別的事情, ";
		mes "或事先沒有約好的話是不能進出的";
		close;
	}
	else if (KielHyreQuest == 2) { 
		mes "[警衛]";
		mes "這裡是'^FF0000啟 海伊洛 學院^000000', ";
		mes "是限制一般人進出的, ";
		mes "若沒有什麼特別的事情, ";
		mes "或事先沒有約好的話是不能進出的";
		next;
		switch(select("訂的貨已經到達了:......")) {
		case 1:
			mes "[警衛]";
			mes "是送貨嗎?請告訴我收貨人姓名 和物品名稱";
			next;
			input .@KHDelivery$;
			if (.@KHDelivery$ != "利可雷音") {
				mes "[警衛]";
				mes "這位"+.@KHDelivery$+", ";
				mes "確實不在我們學院裡面, ";
				mes "看樣子你是弄錯了吧";
				close;
			}
			input .@KHDelivery$ ;
			if (.@KHDelivery$ != "酒") {
				mes "[警衛]";
				mes "請問這是配送給^ff0000利可雷音 太太^000000的^3355FF"+.@KHDelivery$+"嗎?";
				mes "先讓我確認一下^000000";
				next;
				mes "警衛啟動了自身後面的 ";
				mes "某種裝置";
				next;
				mes "[警衛]";
				mes "這裡是正門, ";
				mes "有來自^ff0000利可雷音 太太^000000的包裹";
				mes "請來確認一下好嗎?";
				mes "配送的物品是^3355FF"+.@KHDelivery$+"^000000";
				next;
				mes "[警衛]";
				mes "...是....是....";
				mes "..是 了解了";
				next;
				mes "[警衛]";
				mes "經過確認的結果^ff0000利可雷音 太太^000000";
				mes "確實是有訂過貨, ";
				mes "但她說沒有訂過";
				mes "這一類的貨品";
				next;
				mes "[警衛]";
				mes "請你再確認一次好嗎";
				close;
			}
			mes "[警衛]";
			mes "請問這是配送給^ff0000利可雷音 太太^000000的^3355FF酒嗎?";
			mes "先讓我確認一下^000000";
			next;
			mes "警衛啟動了自身後面的 ";
			mes "某種裝置";
			next;
			mes "[警衛]";
			mes "這裡是正門, ";
			mes "有來自^ff0000利可雷音 太太^000000的包裹";
			mes "請來確認一下好嗎?";
			mes "配送的物品是^3355FF酒^000000";
			next;
			mes "[警衛]";
			mes "...是....是....";
			mes "..是 了解了";
			next;
			mes "[警衛]";
			mes "我要確認一下, ";
			mes "'這是配送給'^ff0000利可雷音 太太^000000'的";
			mes "'^3355FF調理用的酒^000000' 對嗎?";
			next;
			select("是");
			mes "[警衛]";
			mes "已經確認了, ";
			mes "婦人說她想親自籤收, ";
			mes "所以你可以進去了";
			close2;
			warp "kh_school",71,155;
			end;
		case 2:
			mes "[警衛]";
			mes "若沒有其它事情的話 請你回去吧";
			close;
		}
	}
	else if (KielHyreQuest < 32) { 
		mes "[警衛]";
		mes "請問你還有什麼事嗎?";
		close2;
		warp "kh_school",71,155;
		end;
	}
}

yuno_fild08,158,183,7	duplicate(KHAGuard)	警衛#2	4_M_EIN_SOLDIER

//----------------------------------------------------------------------------
// 討論八卦的女學生
//----------------------------------------------------------------------------
kh_school,57,142,6	script	學生#kha	4_F_HUWOMAN,3,3,{
	mes "[喇希]";
	mes "唉喲...";
	mes "你是誰?";
	mes "這裡是禁止外人進出的啊..";
	close;

OnTouch:
	mes "[喇希]";
	mes "內夏, 內夏~";
	mes "有聽過那個傳聞嗎?";
	next;
	mes "[桂內夏]";
	mes "嗯?";
	mes "那一種傳聞?";
	next;
	mes "[喇希]";
	mes "有幽靈出現了 幽靈..";
	next;
	mes "[桂內夏]";
	mes "唉...什..什麼.. 幽靈啊...";
	mes "...";
	next;
	mes "[喇希]";
	mes "真的啊, 隔壁班的 '阿喜'你知道吧?";
	mes "她不是從前幾天就不見人影嗎, ";
	mes "那是因為看到幽靈的關係";
	next;
	mes "[桂內夏]";
	mes "那是真的嗎?";
	mes "好可怕啊....";
	mes "那事就不要再談了...";
	close;
}

kh_school,57,139,0	script	學生#khb	4_F_HUWOMAN,{
	mes "[桂內夏]";
	mes "唉...";
	mes "哦...那裡..";
	mes "也就是說...";
	mes "嗚嗯...";
	emotion ET_PROFUSELY_SWEAT;
	close;
}

//----------------------------------------------------------------------------
// 利可雷音太太
//----------------------------------------------------------------------------
kh_school,176,60,4	script	太太#kh	4W_F_01,{
	if (KielHyreQuest < 2) {
		mes "[利可雷音]";
		mes "這裡是禁止外人進出的, ";
		mes "請不要隨意的逗留";
		close;
	}
	else if (KielHyreQuest == 2) { 
		mes "[利可雷音]";
		mes "請問你有什麼事嗎?";
		next;
		switch(select("我是來送貨:沒什麼事")) {
		case 1:
			mes "[利可雷音]";
			mes "啊, 原來這樣啊, 比我預期的晚了一些啊, 我還以為你會來的更早一些呢, 請你下一次提早一點好嗎, ";
			mes "若你再晚到一次的話, 我就會去找其它廠商了";
			next;
			mes "[利可雷音]";
			mes "還有...";
			next;
			mes "[?????]";
			mes "嗚..哇~!!!";
			next;
			mes "哇鏘鏘~!! 鏘鏗鏗~!";
			next;
			mes "........... ....... ...";
			next;
			mes "[利可雷音]";
			mes "唉喲'^ff0000愛麗^000000', 你又闖禍了.. 你到底要到什麼時候才不會神經大條呢, 到今晚為止薑餅沒有完成的話, 這一學期就把你當掉 知道了嗎?";
			next;
			mes "[愛麗]";
			mes "唉...唉... 可...可是...";
			next;
			mes "[利可雷音]";
			mes "^FF0000愛麗^000000!!";
			next;
			mes "[愛麗]";
			mes "..... 是的...知道了, 老師...";
			next;
			mes "[利可雷音]";
			mes "哼哼... 那麼請你把物品放著, 就請你回去吧, 沒必要繼續在這裡逗留";
			delitem 7487,1; //酒店的酒
			set KielHyreQuest,4;
			close;
		case 2:
			mes "[利可雷音]";
			mes "這裡是禁止外人進出的, ";
			mes "請不要隨意的逗留";
			close;
		}
	}
	else if (KielHyreQuest == 4) {
		mes "[利可雷音]";
		mes "若你完成事情了的話 ";
		mes "請你趕快回去吧, ";
		mes "最近這些小孩子..實在是...";
		mes "......";
		close;
	}
}

//----------------------------------------------------------------------------
// 愛麗 (在學院內)
//----------------------------------------------------------------------------
kh_school,179,39,0	script	看似可愛的 學生#kh	4_F_KHELLY,{
	if (checkweight(908,200) == 0) {
		mes "[愛麗]";
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}
	cutin "kh_elly01",2;
	if (KielHyreQuest < 4) { 
		cutin "kh_elly03",2;
		mes "[愛麗]";
		mes "嗚哇~! 嗚哇~!";
		mes "咻嗚....";
		mes "又差一點弄掉了..";
		mes "要小心啊...";
	}
	else if (KielHyreQuest == 4) { 
		cutin "kh_elly03",2;
		mes "[愛麗]";
		mes "嗚唉唉唉唉.... 怎麼辦啊~ 怎麼辦啊~ 呵唉.....";
		next;
		switch(select("請問有什麼事嗎?:......")) {
		case 1:
			mes "[愛麗]";
			mes "唉? 唉...那是因為.... 本來是要做薑餅的, 不小心把材料掉在地上了.....呵唉.. 要在今晚之前做出來才可以的~";
			next;
			switch(select("我可以幫你嗎?:唉喲.. 真可憐啊")) {
			case 1:
				cutin "kh_elly02",2;
				mes "[愛麗]";
				mes "唉唉唉唉~";
				mes "真..真的嗎?";
				mes "真的真的真的真的真的嗎~!!";
				next;
				mes "["+strcharinfo(0)+"]";
				mes "嗯? 嗯... 哈哈..";
				mes "是真的啦.. 我來幫你";
				next;
				mes "[愛麗]";
				mes "唉嘿, 唉嘿...";
				mes "謝謝你啦~謝謝你啦~";
				mes "唉嘿嘿";
				next;
				mes "["+strcharinfo(0)+"]";
				mes "哈哈....";
				mes "那就.. 要怎麼幫你呢?";
				next;
				mes "[愛麗]";
				mes "啊..對了...";
				mes "老實說....";
				mes "剛才不小心把做薑餅的材料";
				mes "給全毀不能使用了.....";
				mes "我要去找材料才可以的..";
				next;
				break;
			case 2:
				mes "[愛麗]";
				mes "呵唉~ 怎麼辦啊~ 怎麼.... 嗚嗯.... 請問~";
				next;
				select("????");
				mes "[愛麗]";
				mes "請問...~ 看樣子你是送貨的人.. 請幫我好嗎~ 好?不?好?";
				next;
				mes "少女突然抓著你的手臂開始拜託你了";
				next;
				switch(select("我會幫你:我拒絕幫你")) {
				case 1:
					cutin "kh_elly02",2;
					mes "[愛麗]";
					mes "唉唉唉唉~";
					mes "真..真的嗎?";
					mes "真的真的真的真的真的嗎~!!";
					next;
					mes "["+strcharinfo(0)+"]";
					mes "嗯? 嗯... 哈哈..";
					mes "是真的啦..";
					next;
					mes "[愛麗]";
					mes "唉嘿, 唉嘿...";
					mes "謝謝你啦~謝謝你啦~";
					mes "唉嘿嘿";
					next;
					mes "["+strcharinfo(0)+"]";
					mes "嗯....";
					mes "那我要怎麼幫你呢?";
					next;
					break;
				case 2:
					mes "["+strcharinfo(0)+"]";
					mes "對不起, ";
					mes "我有點忙...";
					next;
					cutin "kh_elly04",2;
					mes "[愛麗]";
					mes "嗚唉...";
					mes "是是是~";
					mes "打擾到你真是抱歉啊..";
					mes "嗚唉唉...";
					emotion ET_CRY;
					close2;
					cutin "",255;
					end;
				}
			}
			cutin "kh_elly01",2;
			mes "[愛麗]";
			mes "剛才毀掉的材料由於是最後一個, 呵唉....";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "不要只顧著哭啊.. 請你慢慢的說看看, 只要幫你找到新的薑餅材料就好了嗎?";
			cutin "kh_elly04",2;
			mes "[愛麗]";
			mes "是的.... 嗯.... 可是很抱歉啊.. 對初次見面的人就做這樣的委託..";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "沒關係啊 趕快告訴我材料吧, 若不趕快做的話, 那位神經質的太太 會把你當掉的";
			next;
			mes "[愛麗]";
			cutin "kh_elly01",2;
			mes "啊! 是.. 是的! 材料是^FF0000麵粉 1、雞蛋 1、起士 2、酒 1、牛奶 7、可可 5 ^000000等";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "嗯.... 哈哈.. 確實是多了一點..";
			next;
			mes "[愛麗]";
			mes "嗚嗚~~~~~ 很抱歉~ 很抱歉~~~ 是愛麗做錯了~~";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "啊.. 不是啊 不是啊 沒有關係啊, 只是.. 看到一些新的材料啊, 不知道那些材料能從那裡獲得呀?";
			next;
			mes "[愛麗]";
			mes "'^0000FF麵粉^000000'和 '^0000FF雞蛋^000000'是從 ^008000朱諾^000000的 '^0000FF土司太太^000000'那裡 委託的話 她會給你的 '^0000FF酒^000000'是從 ^008000朱諾^000000的 '^FF0000酒店^000000'那裡, ";
			mes "'^0000FF可可^000000'是從 '^FF0000溜溜猴^000000'的 動物上可以獲得";
			next;
			mes "[愛麗]";
			mes "很抱歉, 我知道我很不應該.. 但還是拜託你啦!";
			set KielHyreQuest,6;
			break;
		case 2:
			mes "[愛麗]";
			mes "嗚唉唉唉唉唉...";
			break;
		}
	}
	else if (KielHyreQuest == 6) {
		if ((countitem(519) < 7) || (countitem(548) < 2) || (countitem(7182) < 5) || (countitem(7487) < 1) || (countitem(7488) < 1)) {
			cutin "kh_elly01",2;
			mes "[愛麗]";
			mes "'^0000FF麵粉^000000'和 '^0000FF雞蛋^000000'是從 ^008000朱諾^000000的 '^0000FF土司太太^000000'那裡 委託的話 她會給你的 '^0000FF酒^000000'是從 ^008000朱諾^000000的 '^FF0000酒店^000000'那裡, ";
			mes "'^0000FF可可^000000'是從 '^FF0000溜溜猴^000000'的 動物上可以獲得";
		}
		else {
			cutin "kh_elly02",2;
			mes "[愛麗]";
			mes "哇~ 你都搜集到了, 唉嘿... 真的謝謝你啦! 唉嘿嘿";
			next;
			mes "[愛麗]";
			mes "唉嘿嘿.. 那麼請你稍後一下~ 嚕魯 啦啦~";
			delitem 519,7; //牛奶
			delitem 548,2; //起士
			delitem 7182,5; //可可
			delitem 7487,1; //酒店的酒
			delitem 7488,1; //送貨用的箱子
			set KielHyreQuest,8;
			set KHPubMasterEnd,0;
			emotion ET_DELIGHT;
		}
	}
	else if (KielHyreQuest == 8) {
		mes "[愛麗]";
		mes "鏘鏘~ 來 特製的愛麗 薑餅, 已經完成了~ 唉嘿..";
		next;
		mes "[愛麗]";
		mes "來 這是感謝之意啊, 嘻嘻.. 真的謝謝你.....啊!";
		next;
		mes "[愛麗]";
		mes "唉喲 我還不知道您貴姓大名啊, 我叫 ^FF0000愛麗^000000, 愛麗莎 愛麗是我的暱稱.. 唉嘿..";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我叫 ^3355FF"+strcharinfo(0)+"^000000";
		next;
		cutin "kh_elly02",2;
		mes "[愛麗]";
		mes "唉嘿...  是^3355FF"+strcharinfo(0)+"^000000先生/小姐啊...";
		getitem 538,5; //薑餅
		set KielHyreQuest,10;
	}
	else if (KielHyreQuest == 10) {
		mes "[愛麗]";
		mes "嗚嗚.....請問... 我還有一個請求 可以再拜託你嗎?";
		next;
		switch(select("是什麼樣的請求呢?:對不起 我現在有點忙..")) {
		case 1:
			mes "[愛麗]";
			mes "嗯... 也就是說... 對我來說有一位非常重要的爺爺 存在啊";
			next;
			mes "[愛麗]";
			mes "因為是"+strcharinfo(0)+" 先生/小姐的幫助, 才能讓薑餅烤的很好呀! 之前都是烤焦的薑餅.. 嘿嘿.. ........";
			next;
			mes "[愛麗]";
			mes "嗯.. 所以.. 我想... 送給爺爺 這些薑餅啊! 若爺爺能看到這些的話 他一定會很高興的啊";
			next;
			mes "[愛麗]";
			mes "若可以的話 我想親自送給他, 因為現在我不能離開學院的關係, 時間久了薑餅也會變的 不好吃的..";
			next;
			mes "[愛麗]";
			mes "....... ......... ...........";
			next;
			switch(select("好吧, 我來送給他吧:現在我有點忙啊")) {
			case 1:
				cutin "kh_elly02",2;
				mes "[愛麗]";
				mes "嗚哇~ 真的謝謝你啦! "+strcharinfo(0)+" 先生/小姐 真的很親切啊, 唉嘿... 唉嘿嘿..";
				next;
				mes "[愛麗]";
				mes "爺爺目前在'^FF0000爺爺目前在^000000'那裡啊, 你說愛麗叫我來見他的話, 他會見你的";
				set KielHyreQuest,12;
				break;
			case 2:
				cutin "kh_elly03",2;
				mes "[愛麗]";
				mes "是是...";
				mes "那就沒有辦法囉..";
				mes "......";
				break;
			}
			break;
		case 2:
			cutin "kh_elly03",2;
			mes "[愛麗]";
			mes "是!";
			mes "嗯.. 那就沒有辦法囉..";
			mes "嗚嗚...";
			break;
		}
	}
	else if (KielHyreQuest == 12) {
		mes "[愛麗]";
		mes "'^FF0000啟 海伊洛 別墅^000000'是在 '^FF0000學院北方^000000'啊";
	}
	else if (KielHyreQuest == 14) {
		cutin "kh_elly03",2;
		mes "[愛麗]";
		mes "嗯... 爺爺在出差中? ......";
		next;
		mes "[愛麗]";
		mes "真是奇怪呀... 他沒說過要去出差呀.. 他說今天會在 別墅裡啊..";
		next;
		cutin "kh_elly04",2;
		mes "[愛麗]";
		mes "請問.. 可以請你再去一趟嗎? 對了! 這一次我給你, 爺爺給過我的別墅補助鑰匙吧, ";
		mes "用這把^FF0000鑰匙^000000的話, 就可以進入到別墅裡面的";
		getitem 7489,1; //Villa_Spare_Key
		set KielHyreQuest,16;
	}
	else if ((KielHyreQuest >= 14) && (KielHyreQuest < 20)) {
		mes "[愛麗]";
		mes "真奇怪啊...";
		mes "明明他說會在那裡的啊...";
		mes "嗚嗚..";
	}
	else if (KielHyreQuest == 20) {
		mes "[愛麗]";
		mes "唉? 這是..... .....";
		next;
		mes "愛麗拆開密封的信封之後, 開始閱讀信件了";
		next;
		mes "-給愛麗-";
		mes "我和兒子有事情要商量, ";
		mes "所以要回到老家見兒子齊爾, ";
		mes "自從留這一封信一個禮拜之後 ";
		mes "沒有連絡到我的話, ";
		mes "請你攜帶我留給你的物品";
		mes "快速的離開學院吧, ";
		mes "東西是藏在別墅的書房裡, ";
		mes "假如你有同學要幫助你的話, ";
		mes "請叫你那位同學到別墅去, ";
		mes "請他找出我的蹤跡後把我救出來, 就這樣告訴他吧, ";
		mes "也許這是一樁很危險的事情也不一定..";
		mes "只要是你朋友的話, ";
		mes "就是值得信賴的人..";
		mes "只是學院的學生和相關人員";
		mes "是不被允許的, ";
		mes "也許他們可能跟齊爾是";
		mes "有關係的人也不一定, ";
		mes "務必要小心啊, ";
		mes "                 爺爺 筆..";
		next;
		cutin "kh_elly03",2;
		mes "[愛麗]";
		mes "自從爺爺... 留下信的那一天開始已經過了十天啊... 難道是爺爺有遇難嗎? 我要怎麼辦呢? 嗚嗚..";
		delitem 7490,1; //Letter_to_Elly
		set KielHyreQuest,22;
	}
	else if (KielHyreQuest == 22) {
		cutin "kh_elly03",2;
		mes "[愛麗]";
		mes ".........";
		next;
		switch(select("詢問有關爺爺的事情:詢問有關兒子齊爾的事情:詢問有關學院的事情")) {
		case 1:
			mes "["+strcharinfo(0)+"]";
			mes "愛麗的那一位爺爺, ";
			mes "到底是什麼樣的人啊?";
			mes "好像被一件很複雜的事情纏身啊";
			next;
			mes "[愛麗]";
			mes "我所說的爺爺是指 啟 海伊洛";
			mes "財團的會長 '^FF0000啟 海伊洛^000000' ";
			mes "會長先生啊";
			next;
			mes "[愛麗]";
			mes "可是對我從小就是孤兒的我, ";
			mes "非常疼愛我, ";
			mes "就如跟親爺爺一樣的人啊, ";
			mes "雖然看起來比較嚴肅, ";
			mes "但心裡確是比任何人都溫暖善良啊";
			next;
			mes "[愛麗]";
			mes "啊啊.. 爺爺.. 你還平安嗎..";
			break;
		case 2:
			mes "["+strcharinfo(0)+"]";
			mes "信上所寫的爺爺的兒子, ";
			mes "'^0000FF齊爾^000000'是什麼樣的人呢?";
			mes "看樣子和爺爺的關係不太好";
			next;
			mes "[愛麗]";
			mes "'^0000FF齊爾^000000'先生老實說我也不太清楚啊, ";
			mes "學院在舉辦慶典時";
			mes "只偶爾見過一面";
			next;
			mes "[愛麗]";
			mes "可是他的面孔是不會被忘記的, ";
			mes "有著冰冷的銀髮";
			mes "看著我們學生啊";
			next;
			mes "[愛麗]";
			mes "雖然是男生但有著漂亮的臉蛋";
			mes "和白皙皮膚是一位漂亮的人, ";
			mes "身為生意人也稍微有名氣的一個人, ";
			mes "在學生們中憧憬 '^0000FF齊爾^000000'先生的小孩";
			mes "也滿多的";
			next;
			mes "[愛麗]";
			mes "可是爺爺和 '^0000FF齊爾^000000'先生, ";
			mes "彼此之間的感情是不太好的樣子";
			next;
			mes "[愛麗]";
			mes "只要是在爺爺面前提到'^0000FF齊爾^000000'先生的話, ";
			mes "他就會發脾氣的, ";
			mes "他們好像為了事業的事情常常有爭吵啊";
			next;
			mes "[愛麗]";
			mes "為什麼會這樣子呢?";
			mes "他是那麼漂亮的兒子和";
			mes "善良的父親啊..";
			break;
		case 3:
			mes "["+strcharinfo(0)+"]";
			mes "這學院是什麼樣的地方呢? 說是學院保安也做的很徹底, 設備也比其它學院 看起來高級";
			next;
			mes "[愛麗]";
			mes "這是 啟 海伊洛 財團所創辦的, 為了孤兒們所創辦的專門學院, 對所嚮往的職業, 會得到應有的專門教育";
			next;
			mes "[愛麗]";
			mes "啊, 我的志願是嚮往卡普拉公司 和 啟 海伊洛 總公司的秘書職務, 像'^0000FF愛麗希雅^000000'小姐一樣變成一位漂亮的小姐 是我的願望啊! 嘿嘿..";
			next;
			mes "[愛麗]";
			mes "可是.... 嗚嗚.. 最近在學校裡 有發生一些奇怪的事情, 就因為這樣孩子們都害怕 獨自一個人活動啊..";
			next;
			cutin "kh_elly02",2;
			mes "[愛麗]";
			mes "不過我是還好啦! 如果我遇到危險的話 '"+strcharinfo(0)+"'先生/小姐會幫助我的, 唉嘿嘿..";
			next;
			switch(select("^0000FF愛麗希雅^000000小姐?:奇怪的事情?")) {
			case 1:
				mes "[愛麗]";
				mes "是為爺爺從事秘書";
				mes "工作職務的人, ";
				mes "是值得讓爺爺相信信賴的女人, ";
				mes "是一位非常漂亮的好心人";
				break;
			case 2:
				cutin "kh_elly04",2;
				mes "[愛麗]";
				mes "這是一項被禁忌的話題.. '因為"+strcharinfo(0)+"'先生/小姐是值得信賴的人, 所以就告訴你吧";
				next;
				mes "[愛麗]";
				mes "最近在學校裡 出沒幽靈啊!!";
				next;
				mes "[愛麗]";
				mes "幽靈每晚在學院裡遊走, 只要是有人聽到 那幽靈所念的咒文時, 都會變成堅硬的人形啊";
				next;
				mes "[愛麗]";
				mes "和我使用同一個房間的'馬右', 遭受到幽靈咒文的迫害而石化了, 目前送往到醫護室了..";
				mes "我們在老師不知情的狀況下, 偷偷的進到醫護室去看了馬右..";
				next;
				mes "[愛麗]";
				mes "馬右躺臥在床上, 看似沒有生命的人形一樣, 跟她說話也沒有任何的回應... 她似乎真的是聽不到看不到 任何事物的樣子耶";
				next;
				mes "[愛麗]";
				mes "瞬間我感到非常的害怕, 就從醫護室裡逃脫出來了..";
				next;
				mes "[愛麗]";
				mes "難道有一天我也碰到那個幽靈的話, 也會像馬右一樣那樣的被石化嗎? 那麼到時候連.. '" + strcharinfo(0) + "'先生/小姐 也認不出我來了?";
				next;
				cutin "kh_elly02",2;
				mes "[愛麗]";
				mes "嗚嗚.. 應該不會是這樣吧! 假如我見到幽靈變成石化的話, '" + strcharinfo(0) + "'先生/小姐會來救我的! 唉嘿";
				next;
				mes "[愛麗]";
				mes "當我石化時'"+ strcharinfo(0) +"'先生/小姐 對著我說, '^FF0000不要再睡了 起床了愛麗^000000'的話, 我就可以馬上起床活動了, 所以說我不太會害怕幽靈啊, 唉唉嘿..";
				set KielHyreQuest,24;
				break;
			}
		}
	}
	else if (KielHyreQuest >= 24 && KielHyreQuest <= 26) {
		cutin "kh_elly04",2;
		mes "[愛麗]";
		mes "啊.. 完蛋了! 要交作業的時間快要遲到了!! 我現在要去找 利可雷音 太太啊";
		next;		
		mes "[愛麗]";
		mes "請問.. 嗯.. 方便的話可以到別墅去找^FF0000爺爺所留下來的物品^000000 嗎? 我所能信賴的人 只有'"+strcharinfo(0)+"'先生/小姐啊...";
		next;
		mes "[利可雷音]";
		mes "愛麗!! 要交的作業還早了嗎? 你到底知不知道.. 現在是幾點呢?!!";
		next;
		mes "[愛麗]";
		mes "嗚哇! 我們傍晚時再見面吧! 請你到我宿舍房間來";
		next;
		mes "[愛麗]";
		mes "宿舍在學院後方 跟教堂建築物在一起, 我的房間在宿舍 2樓後面 右邊的房間, 請搭梯子上來吧, 我會把窗戶打開的";
		set KielHyreQuest,26;
	}
	else {
		mes "[愛麗]";
		mes "請你快離開吧, ";
		mes "老師會馬上過來的";
	}
	close2;
	cutin "",255;
	end;
}

//----------------------------------------------------------------------------
// 愛麗房間的窗戶
//----------------------------------------------------------------------------
yuno_fild08,69,185,0	script	窗戶#kh	HIDDEN_NPC,{
	if (KielHyreQuest < 29) {
		mes "是某一個人的房間, ";
		mes "看似一位女孩子的房間, ";
		mes "從窗戶縫裡可以看到可愛花紋的窗簾";
		close;
	}
	else if (KielHyreQuest== 29) {
		mes "這是愛麗所說的愛麗的房間..";
		mes "看不到梯子, ";
		mes "看樣子好像還沒有回來呀";
		close;
	}
	else if ((KielHyreQuest >= 30) && (KielHyreQuest <= 45)) {
		mes "這是愛麗的房間, 還是看不到梯子啊, 嗯? 窗戶稍微開了一點縫, 看樣子是有辦法可以上去的..";
		next;
		mes "...看樣子是可以利用排水管 ....";
		next;
		switch(select("利用排水管:尋找其它方法")) {
		case 1:
			if (rand(1,3) == 2) {
				mes "搭著排水管進入到了愛麗的房間";
				close2;
				warp "kh_school",185,185;
				end;
			}
			else {
				mes "搭著排水管爬上去之後又滑下來了";
				percentheal -10,0;
				close;
			}
		case 2:
			mes "尋找別的方法吧";
			close;

		}
	}
	else {
		mes "好像還沒有獲得充分的情報啊, ";
		mes "重新再回到別墅吧";
		close;
	}
}

//----------------------------------------------------------------------------
// 愛麗 (在宿舍)
//----------------------------------------------------------------------------
kh_school,178,180,4	script	愛麗	4_F_KHELLY,{
	if (checkweight(908,200) == 0) {
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}
	if (KielHyreQuest < 30) {
		mes "[愛麗]";
		mes "你是誰!";
		mes "請你離開這裡";
		close2;
		percentheal -99,0;
		warp "yuno_fild08",100,100;
		end;
	}
	else if (KielHyreQuest < 32) {
		mes "[愛麗]";
		mes "............";
		next;
		mes "[愛麗]";
		mes "............";
		close;
	}
	else if (KielHyreQuest == 32) {
		mes "[愛麗]";
		mes "............";
		next;
		mes "難道愛麗.. 被石化了嗎.. 要怎麼辦呢..";
		next;
		switch(select("試著觸碰一下愛麗:試著觸碰一下愛麗:不管它")) {
		case 1:
			mes "我拾起顫抖的手, 輕輕的推了一下愛麗的手臂";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "愛麗? 愛麗?";
			next;
			mes "沒有任何反應.. 到底是怎麼一回事啊..";
			close;
		case 2:
			input .@KHInput$;
			if (.@KHInput$ == "別再睡了起床了愛麗") {
				mes "[愛麗]";
				mes ".............";
				next;
				mes "瞬間愛麗握緊的拳頭鬆開了, 掉落了^3355FF小的黃金鑰匙^000000和 ^3355FF鈕扣^000000 ...? 這是什麼呀?";
				getitem 7493,1; //Golden_Key
				getitem 7494,1; //Kiel_Button
				set KielHyreQuest,34;
				close;
			}
			else {
				mes "[愛麗]";
				mes "..........";
				next;
				mes "愛麗沒有任何反應";
				close;
			}
		case 3:
			mes "[愛麗]";
			mes "..........";
			next;
			mes "愛麗沒有任何反應";
			close;
		}
	}
	else if (KielHyreQuest == 34) {
		if (countitem(7491) < 1) {
			mes "^3355FF從愛麗身上得到的^FF0000黃金鑰匙^000000, 應該可以開啟^0000FF灰色箱子^000000似的^000000";
			close;
		}
		else {
			mes "^3355FF從愛麗身上得到的^FF0000黃金鑰匙^000000, 應該可以開啟^0000FF灰色箱子^000000似的^000000";
			next;
			mes "用^ff0000黃金鑰匙^000000打開^0000FF箱子^000000後,  在開啟的^0000FF箱子^000000裡面發現^00CC52紙條^000000和 ^0000FF藍色鑰匙卡^000000";
			next;
			mes "齊爾打破了禁忌,  愛麗..";
			mes "對寄望於你們的我, 隨便的給換掉了!";
			mes "當你發現這箱子時, 我可能已經陷入危險之中, ";
			mes "假如只有你能開啟這個箱子的話";
			mes "那我就安心了, 我就把我的生命寄託給你了, ";
			mes "人形, 若你看到他了的話 我想你也知道";
			mes "你已經不是人類了, ";
			mes "詳細的事情等你進到工廠的話就知道了, ";
			mes "工廠的入口是在^0000FF教堂旁邊的墓地附近^000000, ";
			mes "請執行命令吧 愛麗, ";
			mes "請你去找在工廠秘密房間裡的^0000FF愛麗希雅^000000吧, ";
			mes "我在那女人的保安系統上輸入了我的名字, ";
			mes "那女的會來救我的";
			getitem 7495,1; //Blue_Key_Card
			delitem 7491,1; //Iron_Box
			set KielHyreQuest,36;
			close;
		}
	}
	else if (KielHyreQuest >= 36) {
		mes "在箱子裡面的紙條, 如下面這樣寫著";
		next;
		mes "齊爾打破了禁忌,  愛麗..";
		mes "對寄望於你們的我, 隨便的給換掉了!";
		mes "當你發現這箱子時, 我可能已經陷入危險之中, ";
		mes "假如只有你能開啟這個箱子的話";
		mes "那我就安心了, 我就把我的生命寄託給你了, ";
		mes "人形, 若你看到他了的話 我想你也知道";
		mes "你已經不是人類了, ";
		mes "詳細的事情等你進到工廠的話就知道了, ";
		mes "工廠的入口是在^0000FF教堂旁邊的墓地附近^000000, ";
		mes "請執行命令吧 愛麗, ";
		mes "請你去找在工廠秘密房間裡的^0000FF愛麗希雅^000000吧, ";
		mes "我在那女人的保安系統上輸入了我的名字, ";
		mes "那女的會來救我的";
		close;
	}
}

//----------------------------------------------------------------------------
// 薑餅提籃
//----------------------------------------------------------------------------
kh_school,175,176,0	script	薑餅提籃#kh	HIDDEN_NPC,{
	if (KielHyreQuest < 30) {
		mes "^3355FFIt's a cookie";
		mes "basket filled with";
		mes "delicious cookies.^000000";
		close;
	}
	else if (KielHyreQuest == 30) {
		mes "是愛麗的薑餅提籃, 在裝滿薑餅的縫隙中 看到了白色物體, 拿起了一塊薑餅後 發現了^FF0000紙條^000000";
		next;
		switch(select("閱讀看看:不管它")) {
		case 1:
			mes "穿著黑色衣服的男子";
			mes "嘴裡邊念著奇怪的咒文邊走著, ";
			mes "只要是聽到那個咒文";
			mes "孩子們像個人形一樣被石化了!";
			mes "好可怕啊..";
			mes "現在偷偷的回到房間";
			mes "正在寫這張紙條啊, ";
			mes "我把窗戶打開了, ";
			mes "啊啊..";
			mes "不知道你能否看到這些字?";
			mes "難道我也會跟朋友們一樣被暫停嗎?";
			mes "不要!";
			mes "我不想那樣啊..";
			mes "啊, 好像聽到那個人在推門的聲音啊..";
			mes " '"+strcharinfo(0)+"先生/小姐!!";
			set KielHyreQuest,32;
			close;
		case 2:
			mes ".........";
			close;
		}
	}
	else if (KielHyreQuest < 108) {
		mes "有擺放著慢慢冷卻的薑餅";
		close;
	}
	else if (KielHyreQuest == 108) {
		mes "暫時看著薑餅提籃時, ";
		mes "從開啟的窗戶那裡吹進來的風";
		mes "把薑餅提籃稍微吹動了一下, ";
		mes "在那下面看到了還沒有被發現的";
		mes "^FF0000信件, ^000000";
		mes "也許是.. 愛麗所寫的^FF0000信件^000000";
		next;
		mes "寫給"+strcharinfo(0)+"..";
		mes "我愛麗雖然是一位, 神經大條錯誤百出每次被老師挨罵的人, ";
		mes "今天確實把薑餅烤的很有味道, 還難得被老師誇讚了呢, ";
		mes "我想這都是"+strcharinfo(0)+"先生/小姐給予幫忙的關係啊, 真的謝謝你!";
		mes "看到"+strcharinfo(0)+"這樣的先生/小姐的話, 世界上還真的有許多好心人啊.. 會有這種想法啊, ";
		mes "只會罵人的老師們都是為了愛麗好才會這樣.. 讓我鬱卒的心有點雲霄散開, ";
		mes strcharinfo(0)+"先生/小姐是好人啊.. 我喜歡你的細心照顧, ";
		mes "雖然現在我還不能見到我爺爺, 假如能見到我爺爺的話, 我想把 "+strcharinfo(0)+"先生/小姐介紹給我爺爺認識, ";
		mes "假如我爺爺見到"+strcharinfo(0)+"先生/小姐的話, 也會把平常嚴肅的面孔收起來並對著你微笑的, ";
		mes strcharinfo(0)+"先生/小姐, 再一次的感謝你, ";
		mes "希望能永遠在愛麗身邊, 成為愛麗的重要人吧, ";
		mes "我也會試著努力成為能帶給"+strcharinfo(0)+"先生/小姐一個微笑的人!";
		mes " ";
		mes "　　　　　　　　　　　愛麗";
		next;
		mes "從餅乾提籃裡的薑餅裡, ";
		mes "還是可以感覺到";
		mes "愛麗的氣息..";
		mes "我拿起一塊薑餅";
		mes "大大的咬了一口, ";
		mes "稍微有點苦澀後, ";
		mes "甜美的巧克力味散發在嘴裡";
		set KielHyreQuest,109;
		next;
		input .@input$;
		mes "["+strcharinfo(0)+"]";
		mes ""+.@input$+"";
		mes "回去吧再沒有理由留在這邊了";
		close2;
		warp "yuno_fild08",69,183;
		end;
	}
	else {
		mes "時間流失裡面裝著壞掉的薑餅";
		close;
	}
	end;
}

//----------------------------------------------------------------------------
// Elly's Window (In Dormitory)
//----------------------------------------------------------------------------
kh_school,188,185,0	script	窗戶#kh2	HIDDEN_NPC,{
	warp "yuno_fild08",69,183;
	end;
}

//----------------------------------------------------------------------------
// Grave/Kiel Hyre dungeon entry
//----------------------------------------------------------------------------
yuno_fild08,71,170,0	script	墳墓#kh	HIDDEN_NPC,{
	if (KielHyreQuest < 36) {
		mes "是某一個人的墳墓";
		close;
	}
	else if (KielHyreQuest == 36) {
		if (countitem(7492) < 1) {
			mes "檢查墳墓周邊時發現了隱藏的門";
			next;
			mes "仔細的觀察後, 發現了可以放入某種東西的小縫隙和數字板";
			close;
		}
		else {
			mes "檢查墳墓周邊時發現了隱藏的門";
			next;
			mes "仔細的觀察後, 發現了可以放入某種東西的小縫隙和數字板";
			next;
			mes "在小縫隙裡放入什麼呢?";
			next;
			input .@KHInput$;
			if (.@KHInput$ == "黃色鑰匙卡") {
				mes "放入'^0000FF黃色鑰匙卡^000000'後, '嗶~'的一聲 並且傳出人的聲音了, 請輸入'^008000暗號^000000 '";
				next;
				input .@KHInput$;
				next;
				if (.@KHInput$ == "4772961") {
					mes "輸入了數字";
					mes "'確認完畢, ";
					mes "^FF0000啟 海伊洛^000000先生 歡迎您, ";
					mes "'嗶~'的一聲後出現了通路";
					set KielHyreQuest,38;
					close;
				}
				else {
					mes "輸入了數字'暗號錯誤, ";
					mes "請你重新輸入";
					close;
				}
			}
			else {
				mes "沒有任何反應";
				close;
			}
		}
	}
	else if ((KielHyreQuest >= 38) && (KielHyreQuest < 106)) {
		mes "通往工廠的門已經開啟著";
		next;
		switch(select("進去:不進去")) {
		case 1:
			warp "kh_dun01",3,230;
			end;
		case 2:
			mes "........";
			close;
		}
	}
	else if (KielHyreQuest >= 106) {
		if (countitem(7509) < 1) {
			mes "通往工廠的門已經關閉著";
			close;
		}
		else {
			mes "走到墳墓旁邊之後, ";
			mes "在墳墓的某一部份上";
			mes "開始閃爍著光芒";
			next;
			switch(select("使用^FF0000華麗的鑰匙卡^000000:不理它")) {
			case 1:
				mes "使用鑰匙卡後, 形成了通往內部的通路";
				next;
				switch(select("進去:不進去")) {
				case 1:
					warp "kh_dun01",3,230;
					end;
				case 2:
					mes ".........";
					close;
				}
			case 2:
				mes ".........";
				close;
			}
		}
	}
}

//============================================================================

//============================================================================
// 啟 海 依洛 別墅NPC
//============================================================================

//----------------------------------------------------------------------------
// 別墅管家
//----------------------------------------------------------------------------
yuno_fild02,93,210,4	script	別墅管家#kh	4_M_03,{
	if ((KielHyreQuest < 12) || (KielHyreQuest > 12)) {
		mes "[別墅管家]";
		mes "因為這裡是私有地 ";
		mes "所以不能隨便進出";
		close;
	}
	else if (KielHyreQuest == 12) {
		mes "[別墅管家]";
		mes "因為這裡是私有地 ";
		mes "所以不能隨便進出";
		next;
		switch(select("我是要來見^FF0000啟 海伊洛先生^000000的:我了解了")) {
		case 1:
			mes "[別墅管家]";
			mes "請問有事先約好嗎?";
			next;
			switch(select("是的:沒有")) {
			case 1:
				mes "[別墅管家]";
				mes "非常抱歉, 現在主人出差中, 所以不能見面啊";
				next;
				mes "[別墅管家]";
				mes "主人現在出差中, 所以不能見面啊";
				set KielHyreQuest,14;
				close;
			case 2:
				mes "[別墅管家]";
				mes "若沒有事先約好的話 是不能見面的";
				next;
				mes "[別墅管家]";
				mes "主人現在出差中, 所以不能見面啊";
				close;
			}
		case 2:
			mes "[別墅管家]";
			mes "再見囉";
			close;
		}
	}
}

//----------------------------------------------------------------------------
// 別墅的門 (left)
//----------------------------------------------------------------------------
yuno_fild02,75,218,0	script	門#kh2	HIDDEN_NPC,{
	if (KielHyreQuest < 16) {
		mes "有一道被關閉的門";
		close;
	}
	if (KielHyreQuest == 16) {
		mes "有一道被關閉的門";
		next;
		switch(select("開啟:不管它")) {
		case 1:
			mes "使用鑰匙打開門之後, 從門縫裡掉落了一個紙條, 紙條上面寫著 '^FF0000前 6、左邊 3、前3、左邊4^000000, ";
			close2;
			set KielHyreQuest,18;
			warp "kh_vila",188,18;
			end;
		case 2:
			mes ".......";
			close;
		}
	}
	else {
		mes "有一道開啟的門";
		next;
		switch(select("進去:不進去")) {
		case 1:
			warp "kh_vila",188,18;
			end;
		case 2:
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage Door (Right)
//----------------------------------------------------------------------------
yuno_fild02,109,218,0	script	門#kh1	HIDDEN_NPC,{
	if (KielHyreQuest != 16) {
		mes "有一道被關閉的門";
		close;
	}
	if (KielHyreQuest == 16) {
		mes "有一道被關閉的門";
		next;
		switch(select("開啟:不管它")) {
		case 1:
			mes "從愛麗那裡得到的鑰匙不能使用";
			close;
		case 2:
			mes ".......";
			close;
		}
	}
}


//----------------------------------------------------------------------------
// Store room interior; Wall
//----------------------------------------------------------------------------
kh_vila,191,14,0	script	牆壁#kh	HIDDEN_WARP_NPC,1,1,{
	if (KielHyreQuest < 28) {
		mes "單純的牆壁";
		close;
	}
	if (KielHyreQuest >= 28) {
		mes "牆面破裂後出現了一個秘密通路";
		next;
		switch(select("移動:不移動")) {
		case 1:
			warp "kh_vila",17,177;
			end;
		case 2:
			close;
		}
	}

OnOpenDoor:
	misceffect 316;
	end;
}

//----------------------------------------------------------------------------
// Store room interior; books
//----------------------------------------------------------------------------
kh_vila,184,20,0	script	書#kh1::BookKHQ1	HIDDEN_NPC,{
	if (KielHyreQuest != 26) {
		mes "書有插在那邊";
		close;
	}
	else if (KielHyreQuest == 26) {
		if (rand(1,10) == 8) {
			mes "從書架裡把書拿起來時, 樓梯旁的牆面破裂後出現了一個通路";
			donpcevent "Wall#kh::OnOpenDoor";
			set KielHyreQuest,28;
			close;
		}
		else {
			mes "書有插在那邊";
			close;
		}

	}

}
kh_vila,181,20,0	duplicate(BookKHQ1)	書#kh2	HIDDEN_NPC
kh_vila,178,20,0	duplicate(BookKHQ1)	書#kh3	HIDDEN_NPC
kh_vila,175,19,0	duplicate(BookKHQ1)	書#kh4	HIDDEN_NPC

//----------------------------------------------------------------------------
// Store room interior; Letter to Elly on the floor.
//----------------------------------------------------------------------------
kh_vila,179,11,0	script	信件#kh	-1,1,1,{
//OnTouch2:
OnTouch:
	if (KielHyreQuest == 18) {
		if (checkweight(7490,1) == 0) {
			mes "請在這裡暫停一下 !!";
			mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
			close;
		}
		mes "發現了掉落在地板上的'^FF0000信件^000000'";
		getitem 7490,1; //Kyll_Hire_Letter
		set KielHyreQuest,20;
		close;
	} 
	else{
		mes "地板上是空空的";
		close;
	}
	end; 
}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Box (Pet Food vending machine)
//----------------------------------------------------------------------------
kh_vila,16,175,0	script	箱子#khp1	HIDDEN_NPC,{
	mes "　　　好吃 營養又高的寵物用";
	mes "　 寵物飼料 自動販賣機, ";
	mes "　　　為了你可愛的寵物";
	mes "　　　　唯一的選擇!";
	mes "　和市面上所販賣的一般寵物飼料";
	mes "　　　　　是不一樣的!";
	mes "使用方法:";
	mes "把1100金幣投入到投幣口裡, ";
	mes "　　　 把把手往右邊轉2次, ";
	mes "　　　 在取物口裡會出現";
	mes "　　好吃 營養又高的寵物飼料";
	next;
	switch(select("購買:不購買")) {
	case 1:
		if (Zeny < 1100) {
			mes "沒有足夠的金幣可以投入投幣口裡";
			close;
		}
		else {
			mes "看來是有點貴了還是購買吧";
			next;
			mes "只是寵物飼料啊";
			set Zeny,Zeny-1100;
			getitem 537,1;	//Pet_Food
			close;
		}
	case 2:
		mes "感覺有點不太對勁";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Apple Box (Useless?)
//----------------------------------------------------------------------------
kh_vila,30,184,0	script	蘋果 箱子#khp1	HIDDEN_NPC,{
	mes "裡面裝滿著好吃的蘋果";
	mes "一堆";
	next;
	switch(select("拿走:不拿走")) {
	case 1:
		mes "..想要去拿蘋果的時候, ";
		mes "在背後感覺到一股寒意, ";
		mes "難道是有死神在嗎?";
		next;
		mes "看樣子還是不要拿好了";
		close;
	case 2: 
		mes "感覺有點不太對勁";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, dining room; Map
//----------------------------------------------------------------------------
kh_vila,44,126,0	script	地圖#khp1	HIDDEN_NPC,{
	if ((KHCottagePoem1 < 2) && (KielHyreQuest < 30)) {
		mes "掛著一幅漂亮的地圖, 上面畫著 盧恩--米德加茲和秀髮茲發德, 那左邊有著別的國家, 是一個不清楚的國家, ";
		mes "本來想看仔細一點就用手去觸摸地圖時, 觸摸到了一個粗壯的東西";
		next;
		switch(select("不要去理它:多觀察一點")) {
		case 1:
			mes "看樣子並不是什麼重要的物品";
			close;
		case 2:
			mes "經過仔細觀察的結果, 地圖是牢牢的固定在牆壁上的, 好像是用膠水之類的物體";
			mes "所固定似的, ";
			mes "若把膠水的黏性降低的話";
			mes "應該是可以拔掉似的";
			set KHCottagePoem1,1;
			close;
		}
	}
	else  if ((KHCottagePoem1 == 2) && (KielHyreQuest < 30)) {
		mes "用壺水所出現的水蒸氣, 潤溼地圖的後方, 地圖一點點可以開始拔起來了";
		next;
		mes "稍微抬起來地圖後, 地圖後方 '咚~' 的一聲, 掉落了一個東西, 撿起來看是一張被揉搓的 紙張";
		next;
		mes "紙張上面寫著 如下般的內容";
		next;
		mes "^0000FF井水乾枯地面龜裂的話, 通往那女人心臟的路會開啟, 那女人的心臟如透明的水晶一樣, ";
		mes "那女人所在地方如北極冰河般一樣冷, 我為了找那位女人, 舉起了四把劍和四隻蛇決鬥了";
		mes "第一把劍是 愛, 第二把劍是 絕望, 第三把劍是 忿怒, 第四把劍是 希望, ";
		mes "為了尋找那女人所在的地方, 為了拯救那女人, 我舉起了四把劍, 和四隻蛇決鬥了^000000";
		next;
		mes ".....是有著什麼樣的意義 我也不清楚";
		set KHCottagePoem1,3;
		close;
	}
	else  if ((KHCottagePoem1 > 2) || (KielHyreQuest >= 30)) {
		mes "這裡是獲得寫著詩紙條的地方, ";
		mes "再確認一下詩嗎?";
		next;
		switch(select("確認一下:沒必要")) {
		case 1:
			mes "紙張上面寫著 如下般的內容";
			next;
			mes "^0000FF井水乾枯地面龜裂的話, 通往那女人心臟的路會開啟, 那女人的心臟如透明的水晶一樣, ";
			mes "那女人所在地方如北極冰河般一樣冷, 我為了找那位女人, 舉起了四把劍和四隻蛇決鬥了";
			mes "第一把劍是 愛, 第二把劍是 絕望, 第三把劍是 忿怒, 第四把劍是 希望, ";
			mes "為了尋找那女人所在的地方, 為了拯救那女人, 我舉起了四把劍, 和四隻蛇決鬥了^000000";
			next;
			mes ".....是有著什麼樣的意義 我也不清楚";
			close;
		case 2:
			mes "感覺上沒這個必要似的";
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Pot
//----------------------------------------------------------------------------
kh_vila,33,184,0	script	壺#khp1	HIDDEN_NPC,{
	if (KHCottagePoem1 < 1) {
		mes "有著熱騰騰的壺水, 熱騰騰的蒸氣慢慢的飄上來中";
		close;
	}
	else if (KHCottagePoem1 == 1) {
		mes "有著熱騰騰的壺水, 熱騰騰的蒸氣慢慢的飄上來中";
		next;
		mes "熱騰騰的蒸氣...?!";
		mes "不知道用這個可不可以";
		mes "把地圖上的膠水給稀釋掉呢?";
		next;
		switch(select("試試看:看樣子不太可行的樣子")) {
		case 1:
			mes "^FF0000獲得了有熱騰騰蒸氣的壺^000000, 不小心燙傷了一點自己";
			set KHCottagePoem1,2;
			close;

		case 2:
			mes "尋找其它方法吧";
			close;
		}
	}
	else if ((KHCottagePoem1 > 1) || (KielHyreQuest >= 30)){
		mes "這個地方是有著熱騰騰蒸氣壺的地方";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, fire place; Calabash
//----------------------------------------------------------------------------
kh_vila,14,55,0	script	葫蘆瓶#khp1	HIDDEN_NPC,{
	if ((countitem(7329) < 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		if (checkweight(7329,1) == 0) {
			mes "請在這裡暫停一下 !!";
			mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
			close;
		}
		mes "看起來很貴的葫蘆瓶, ";
		mes "..要怎麼辦呢?";
		next;
		switch(select("把瓶子打破看看:檢查裡面:不理它")) {
		case 1:
			mes "看起來很貴....";
			mes "不能隨便亂動別人的東西";
			close;
		case 2:
			mes "到底會有什麼呢? .....";
			next;
			mes "把瓶子抬起來輕輕的搖晃時, 在裡面聽到'鏘~' 的一聲, 果然裡面有個 某種東西似的";
			next;
			mes "獲得了'^FF0000破舊銅鑄鑰匙^000000'";
			getitem 7329,1; //Old_Bronze_Key
			close;
		case 3:
			mes "看起來只是普通的瓶子, ";
			mes "雖然看起來是有點貴..";
			close;
		}
	}
	else {
		mes "是獲得破舊銅鑄鑰匙的葫蘆瓶, ";
		mes "看起來很貴";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, garden; Pool
//----------------------------------------------------------------------------
kh_vila,39,41,0	script	池塘#khp1	HIDDEN_NPC,{
	if ((KHCottagePoem1 < 3) && (KielHyreQuest < 30)) {
		mes "看起來有著涼快的水積在那邊";
		next;
		mes "....應該不能喝吧?";
		close;
	}
	else if ((KHCottagePoem1 == 3) && (KielHyreQuest < 30)) {
		mes "看起來有著涼快的水積在那邊";
		next;
		mes "看到了獅子像和兩個把手, 可以拉拉看嗎?";
		next;
		switch(select("拉拉看:不去拉")) {
		case 1:
			mes "要拉哪一個呢?";
			next;
			switch(select("右邊把手:左邊把手")) {
			case 1:
				mes "拉起了把手, ";
				mes "從獅子像的嘴裡開始流出水了, ";
				mes "滿好看的嘛";
				close;
			case 2:
				mes "拉起了把手";
				mes "池塘底部的洞開啟了, ";
				mes "使積水處的水開始流走了, ";
				mes "等水都流走後有著綠色青苔的";
				mes "石頭池塘裸裸的呈現著";
				next;
				switch(select("看樣子在沒有什麼可以值得觀察的了:再多觀察一點")) {
				case 1:
					mes "水都流走的池塘";
					mes "沒有什麼好看的地方了";
					close;
				case 2:
					mes "觀察池塘在角落裡面, 有著小小的按鈕物體";
					next;
					switch(select("按按看:....不管它")) {
					case 1:
						mes "按下按鈕後, 聽到了 '嗡~' 的一聲, 應該是從^FF0000走道樓梯^000000那裡傳來的";
						set KHCottagePoem1,4;
						close;
					case 2:
						mes "可能是陷阱也不一定 不用理它";
						close;
					}
				}
			}
		case 2:
			mes "看樣子還是不要碰它比較好";
			close;
		}
	}
	else if ((KHCottagePoem1 > 3) || (KielHyreQuest >= 30)) {
		mes "在池塘裡按下按鈕後, ";
		mes "從樓梯那裡傳來";
		mes "'嗡~' 的一聲";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Vicious Dog
//----------------------------------------------------------------------------
kh_vila,181,178,4	script	看起來 很兇的狗#khp1	4_DOG01,7,3,{
//OnTouch2:
OnTouch:
	mes "厄勒勒勒勒勒勒~";
	next;
	mes "看起來很兇的狗 在那裡嚷嚷著, 可以小心的路過嗎?";
	next;
	switch(select("路過:重新下去")) {
	case 1:
		if (countitem(537) >= 1) {
			mes "......仔細的想一想.. 看來有帶寵物飼料啊";
			next;
			switch(select("試著使用寵物飼料看看:看樣子行不通的")) {
			case 1:
				mes "把寵物飼料往前方推出去, ";
				mes "狗開始搖尾巴接近後, ";
				mes "對著寵物飼料";
				mes "開始大口大口的吃了起來, ";
				mes "趁這時候通過";
				delitem 537,1; //Pet_Food
				close2;
				warp "kh_vila",173,182;
				end;
			case 2:
				break;
			}
		}
		mes "小心小心的接近後, ";
		mes "狗還是兇猛的嚷嚷著";
		next;
		mes "想要從旁邊路過時";
		mes "...";
		mes "汪!汪!汪!汪!汪!!!!";
		next;
		mes ".......";
		mes "被狗追逐只好逃到樓下了";
		close2;
		warp "kh_vila",126,70;
		end;
	case 2:
		mes ".....會不會被狗咬啊?";
		close2;
		warp "kh_vila",126,70;
		end;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Drawer, first room nightstand
//----------------------------------------------------------------------------
kh_vila,115,186,0	script	抽屜#khp1	111,{
	if (checkweight(7492,1) == 0) {
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}
	if ((countitem(7492) < 1) && (KielHyreQuest <= 36)) {
		mes "好像是有很多人的 手所觸碰過的抽屜";
		next;
		switch(select("打開抽屜看看:尋找別的地方")) {
		case 1:
			mes "打開抽屜後看到黃色的物體";
			getitem 7492,1; //Yellow_Key_Card
			close;
		case 2:
			mes "尋找別的地方";
			close;
		}
	}
	else {
		mes "...看樣子所需要的東西都找到了, ";
		mes "回去吧";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Box
//----------------------------------------------------------------------------
kh_vila,107,126,0	script	箱子#khp2	HIDDEN_NPC,{
	if ((countitem(7329) < 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		mes "看到了一個擺放著堅固的箱子, ";
		mes "觀察箱子後發現裡面還有";
		mes "雙層構造的其它箱子, ";
		mes "第二個箱子被鑰匙給鎖住了, ";
		close;
	}
	else if ((countitem(7329) >= 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		mes "看到了一個擺放著堅固的箱子, ";
		mes "觀察箱子後發現裡面還有";
		mes "雙層構造的其它箱子, ";
		mes "第二個箱子被鑰匙給鎖住了, ";
		mes "....會不會是從葫蘆瓶裡得到的鑰匙";
		mes "能開啟呢?";
		next;
		switch(select("開啟看看:應該是不會對的...")) {
		case 1:
			mes "'喳喀' 開啟了";
			next;
			mes "'嘻嘻~' 箱子裡面有 綠色鑰匙卡";
			next;
			mes ".....是鑰匙....";
			getitem 7516,1; //Green_Key_Card
			delitem 7329,1; //Old_Bronze_Key
			close;
		case 2:
			mes "應該是不會對的...";
			close;
		}
	}
	else {
		mes "是獲得^008000綠色鑰匙卡^000000的箱子";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Bookshelf.
//----------------------------------------------------------------------------
kh_vila,181,138,0	script	書櫃#khp1	HIDDEN_NPC,{
	if ((countitem(7491) < 1) && (countitem(7329) >= 1) || (countitem(7516) >= 1)) {
		mes "裝滿許多書的書櫃, 有著相當多量的書籍 滿滿的 .......";
		next;
		mes "........嗯? '為了愛麗'? '愛麗'?";
		next;
		switch(select("拿起書來查看一下:很特別的書啊")) {
		case 1:
			mes "拿起書來查看後 沒有看到什麼特別的內容, 把書重新放回原處";
			mes "查看書縫時, 看到裡面有堅硬的鐵壁";
			next;
			switch(select("再多觀察一下:應該是牆吧")) {
			case 1:
				mes "把周圍的書拿開後, 出現了以鐵做成的金庫, 看到了兩個鑰匙孔, ...打不開";
				next;
				switch(select("用已攜帶的鑰匙試試看:....好像沒有合適的鑰匙")) {
				case 1:
					mes "第一個鑰匙孔";
					next;
					if (countitem(7329) >= 1) {
						select("破舊銅鑄鑰匙:別墅補助鑰匙");
						mes "第二個鑰匙孔";
						next;
						select("破舊銅鑄鑰匙:別墅補助鑰匙");
					}
					else if (countitem(7516) >= 1) {
						switch(select("綠色鑰匙:別墅補助鑰匙")) {
						case 1:
							set .@KHFirstKeyhole,1;
							break;
						case 2:
							set .@KHFirstKeyhole,2;
							break;
						}
						mes "第二個鑰匙孔";
						next;
						switch(select("綠色鑰匙:別墅補助鑰匙")) {
						case 1:
							set .@KHSecondKeyhole,1;
							break;

						case 2:
							set .@KHSecondKeyhole,2;
							break;

						}
						if (.@KHFirstKeyhole == 2) && (.@KHSecondKeyhole == 1) {
							mes "和'喳喀!'一聲 一起 金庫開啟了, 金庫裡面有著白色的箱子";
							next;
							mes "已獲得了^FF0000白色箱子^000000";
							delitem 7489,1; //Villa_Spare_Key
							delitem 7516,1; //Green_Key_Card
							getitem 7491,1; //Iron_Box
							close;
						}

					}
					mes "打不開";
					close;
				case 2:
					mes "多逛一下別墅好了";
					close;
				}
			case 2:
				mes "把書放在原來的地方了";
				close;
			}
		case 2:
			mes "除此之外沒有看到特別的東西";
			close;
		}
	}
	else {
		mes "應該還需要些東西吧, ";
		mes "再找找看";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Desk
//----------------------------------------------------------------------------
kh_vila,118,144,0	script	書桌#khp1	HIDDEN_NPC,{
	if (KHCottagePoem2 < 1) {
		mes "看到書桌上面有著";
		mes "亂七八糟的書籍和紙屑, ";
		mes "上面寫著人工動力的製作法和利用方法..";
		mes "大賢者 霸肋門德的論文集..";
		mes "工廠用自動機械的活用法..";
		mes "高級魔法捲軸的製作法..";
		mes "為了愛麗..";
		next;
		mes "'愛麗?'";
		mes "在翻閱全部都是白色書頁的時候, ";
		mes "發現了一張紙, ";
		mes "上面記載著有 '啟 海伊洛";
		mes "企業的文章";
		mes "......先把它拿在身邊吧";
		next;
		mes "獲得了'^FF0000記載著 啟 海伊洛 文章的紙^000000'";
		set KHCottagePoem2,1;
		close;
	}
	else if (KHCottagePoem2 >= 1) {
		mes "有著書和文件堆滿的書桌, 感覺到一股頭痛的樣子";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Medicine Chest
//----------------------------------------------------------------------------
kh_vila,123,170,0	script	藥櫃#khp1	HIDDEN_NPC,{
	if ((KHCottagePoem2 < 1) && (KielHyreQuest < 30)) {
		mes "形形色色的瓶子混亂的擺在那裡, 是用在那裡的藥呢?";
		close;
	}
	else if ((KHCottagePoem2 == 1) && (KielHyreQuest < 30)) {
		mes "形形色色的瓶子混亂的擺在那裡, 是用在那裡的藥呢?";
		mes "......好像在那裡某一本書上看過, ";
		mes "上面寫著好像在使用特定的液體時, 墨水才會有反應啊..";
		next;
		switch(select("真的會有那種東西嗎...:仔細想一想 剛才那個紙張才是...")) {
		case 1:
			mes "....怎麼可能會有那種東西呢";
			close;
		case 2:
			switch(select("把紅色試藥滴落在上面:把藍色試藥滴落在上面:把黃色試藥滴落在上面:把綠色試藥滴落在上面:還是 不要做")) {
			case 1:
				set .@KHPotionColor$,"紅色";
				break;
			case 2:
				mes "^3355FF第一頭蛇是以硬鐵所做成的蛇, 有著冰冷的身軀和堅硬的頭腦, 我拾起忿怒對著蛇頭砸下去了, 之後蛇就變的靜悄悄了, ";
				mes "第一頭蛇是以硬鐵所做成的蛇, 有著冰冷的身軀和堅硬的頭腦, 我拾起忿怒對著蛇頭砸下去了, 之後蛇就變的靜悄悄了, ";
				mes "第三頭蛇是以血和肉所做成的蛇, 有著溫暖的身軀和柔軟的頭腦, 我拾起希望纏住了蛇的身軀, 之後蛇就變的靜悄悄了, ";
				mes "第四頭蛇是沒有形體的蛇, 它的身軀和頭腦沒有任何人知道, 我拾起絕望投向虛空處, 蛇是否真的平靜下來";
				mes "沒有人會知道的, 沒有人會知道的, 我的名字是 ^000000'^FF0000迷路的小惡魔^000000'";
				mes "^3355FF我拿著四把劍和對著四頭蛇, 在黑暗裡尋找那位女的 ^000000";
				next;
				mes "....... 好奇怪的詩啊...到底有什麼樣的意義呢?";
				set KHCottagePoem2,2;
				close;
			case 3:
				set .@KHPotionColor$,"黃色";
				break;
			case 4:
				set .@KHPotionColor$,"綠色";
				break;
			case 5:
				mes "....怎麼可能會有那種東西呢";
				close;
			}
			mes .@KHPotionColor$+"試藥順著紙張的表面流下了, ";
			mes "很神奇的沒有潤溼紙面";
			mes "也沒有任何反應";
			close;
		}
	}
	else if ((KHCottagePoem2 >= 2) || (KielHyreQuest >= 30)) {
		mes "這裡是";
		mes "在紙裡面找到詩的地方, ";
		mes "要在念一遍看看嗎?";
		next;
		switch(select("因為沒有時間下一次再念吧:我要念")) {
		case 1:
			mes "趕快到家裡面觀察一下吧";
			close;
		case 2:
			mes "^3355FF第一頭蛇是以硬鐵所做成的蛇, 有著冰冷的身軀和堅硬的頭腦, 我拾起忿怒對著蛇頭砸下去了, 之後蛇就變的靜悄悄了, ";
			mes "第一頭蛇是以硬鐵所做成的蛇, 有著冰冷的身軀和堅硬的頭腦, 我拾起忿怒對著蛇頭砸下去了, 之後蛇就變的靜悄悄了, ";
			mes "第三頭蛇是以血和肉所做成的蛇, 有著溫暖的身軀和柔軟的頭腦, 我拾起希望纏住了蛇的身軀, 之後蛇就變的靜悄悄了, ";
			mes "第四頭蛇是沒有形體的蛇, 它的身軀和頭腦沒有任何人知道, 我拾起絕望投向虛空處, 蛇是否真的平靜下來";
			mes "沒有人會知道的, 沒有人會知道的, 我的名字是 ^000000'^FF0000迷路的小惡魔^000000'";
			mes "^3355FF我拿著四把劍和對著四頭蛇, 在黑暗裡尋找那位女的 ^000000";
			close;

		}
	}
}

//----------------------------------------------------------------------------
// Cottage interior, stair case; Sword hilt
//----------------------------------------------------------------------------
kh_vila,136,68,0	script	劍裝飾#kh	HIDDEN_NPC,{
	if ((KHCottagePoem1 < 3) || (KHCottagePoem2 < 2) && (KielHyreQuest < 30)) {
		mes "有一個把手很漂亮的劍";
		mes "和一個感覺可怕的蛇雕像";
		close;
	}
	else if ((KHCottagePoem1 <= 4) || (KHCottagePoem2 <= 2) && (KielHyreQuest < 30)) {
		mes "有一個把手很漂亮的劍";
		mes "和一個感覺可怕的蛇雕像, ";
		mes "..四把劍?";
		mes "四頭蛇?";
		mes "和剛才看到的詩";
		mes "也什麼關係嗎?";
		next;
		switch(select("應該沒有什麼關係吧:我要再觀察一下")) {
		case 1:
			mes "應該是偶然吧";
			close;
		case 2:
			mes "仔細的觀察蛇雕像, 在蛇頭左側邊有一個";
			mes "可以放入劍的洞口";
			next;
			switch(select("是什麼樣的洞口呢?:拔出劍來插插看")) {
			case 1:
				mes "...除了劍之外";
				mes "看不到其它可適當插入的東西";
				close;
			case 2:
				if (KHCottagePoem1 != 4) {
					mes "劍是可以稍微移動的, ";
					mes "好像被什麼東西給頂住了不能動";
					close;
				}
				else {
					mes "怎麼辦呢?";
					next;
					mes "拔出了第一把劍";
					next;
					switch(select("第一頭蛇:第二頭蛇:第三頭蛇:第四頭蛇")) {
					default:
						break;
					case 2:
						set .@KHSwords,.@KHSwords+1;
						break;
					}
					next;
					mes "拔出了第二把劍";
					next;
					switch(select("第一頭蛇:第二頭蛇:第三頭蛇:第四頭蛇")) {
					default:
						break;
					case 4:
						set .@KHSwords,.@KHSwords+1;
						break;
					}
					next;
					mes "拔出了第三把劍";
					next;
					switch(select("第一頭蛇:第二頭蛇:第三頭蛇:第四頭蛇")) {
					case 1:
						set .@KHSwords,.@KHSwords+1;
						break;
					default:
						break;
					}
					next;
					mes "拔出了第四把劍";
					next;
					switch(select("第一頭蛇:第二頭蛇:第三頭蛇:第四頭蛇")) {
					default:
						break;
					case 3:
						set .@KHSwords,.@KHSwords+1;
						break;
					}

					if (.@KHSwords == 4) {
						mes "突然間聽到低沈的嗡嗡聲音, 感覺到身軀";
						mes "移動到別的地方去";
						set KHCottagePoem1,5;
						set KHCottagePoem2,3;
						close2;
						warp "kh_vila",178,72;
						end;
					}

					else {
						mes "....沒有任何的變化, ";
						mes "把劍重新放回原來的位置吧";
						close;
					}
				}
			}
		}
	}
	else if ((KHCottagePoem1 == 5) && (KHCottagePoem2 == 3) || (KielHyreQuest >= 30)) {
		mes "這是移動到 秘密試驗室的通路";
		next;
		switch(select("重新進去:不進去")) {
		case 1:
			warp "kh_vila",178,72;
			end;
		case 2:
			mes "再多觀察一下吧";
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage interior, Secret Room; left test tube
//----------------------------------------------------------------------------
kh_vila,179,68,0	script	試驗管#khp2	HIDDEN_NPC,{
	mes "有穿著 啟 海伊洛 學院, ";
	mes "校服的男學生在試驗管裡面, ";
	mes "感覺好面熟啊";
	close;
}


//----------------------------------------------------------------------------
// Cottage interior, Secret Room; Right test tube
//----------------------------------------------------------------------------
kh_vila,185,68,0	script	試驗管::TestTubeKHQ2	HIDDEN_NPC,{
	if (KielHyreQuest > 28) {
		mes "^3355FFA strange looking,";
		mes "wizened old man is";
		mes "held within this test tube.^000000";
		close;
	}
	else if (KielHyreQuest == 28) {
		mes "看起來一位很嚴肅的老人 在試驗管裡, 試驗管下面看到 紅色的按鈕";
		next;
		switch(select("按一下按鈕:多觀察一會兒")) {
		case 1:
			mes "按下按鈕 試驗管裡的老人開始對著你說話了";
			next;
			mes "..........";
			mes "'你是誰啊..'";
			mes "'是一個陌生的面孔啊, '";
			mes "'假如你是我的朋友的話, ";
			mes "你一定會知道我的名字的?'";
			next;
			input .@KHInput$;
			if (.@KHInput$ == "迷路的小惡魔") {
				mes "請你記下這數字吧 ^FF00004.7.7.2.9.6.1^000000";
				next;
				mes "^FF00004772961^000000 ?";
				mes "這是什麼數字啊?";
				//KHCottagePoem1 and KHCottagePoem2 no longer needed-- deleting
				set KHCottagePoem1,0;
				set KHCottagePoem2,0;
				set KielHyreQuest,30;
				close;
			}
			else {
				mes "這應該不是你的名字吧..";
				close;
			}
		case 2:
			mes "應該是多觀察一下周圍是比較好一點吧";
			close;
		}
	}
	else if (KielHyreQuest >= 30) {
		if ((countitem(7491) > 0) && (countitem(7492) > 0)){
			mes "^FF00004772961^000000 ?";
			mes "這是什麼數字啊?";
			mes "........";
			mes "看樣子所需要的東西都已經找到了, ";
			mes "回到愛麗的身邊吧";
			close;
		}
		else {
			mes "^FF00004772961^000000 ?";
			mes "這是什麼數字啊?";
			mes "........";
			mes "應該還需要些東西吧, ";
			mes "去家裡面多找找看吧";
			close;
		}
	}
	end;
}

//============================================================================

//============================================================================
// Robot Factory NPCs
//============================================================================

//----------------------------------------------------------------------------
// Robotic's Factory; Heavy Door
//----------------------------------------------------------------------------
kh_dun01,235,48,0	script	堅固的門#kh1::HeavyDoorKHQ1	HIDDEN_NPC,{
	if (KielHyreQuest < 38) {
		mes "有著一座堅固的門";
		next;
		switch(select("開啟看看:不管它")) {
		case 1:
			input .@KHInput$;
			mes "打不開";
			close;
		case 2:
			mes "看樣子沒必要開啟";
			close;
		}
	}
	else if ((KielHyreQuest >= 38) && (KielHyreQuest < 46)) {
		mes "有著一座堅固的門";
		next;
		switch(select("開啟看看:不管它")) {
		case 1:
			input .@KHInput$;
			if (.@KHInput$ == "藍色鑰匙卡") {
				mes "門 開啟了";
				close2;
				warp "kh_school",119,144;
				end;
			}
			else {
				mes "打不開";
				close;
			}
		case 2:
			mes "看樣子沒必要開啟";
			close;
		}
	}
	else {
		mes "是緊閉關著的厚重的門";
		close;
	}
}

//----------------------------------------------------------------------------
// Robotic's Factory; Heavy Door (These doors don't seem to serve any purpose)
//----------------------------------------------------------------------------
kh_dun01,76,233,0	script	堅固的門::HeavyDoorKHQ2	HIDDEN_NPC,{
	if ((KielHyreQuest >= 38) && (KielHyreQuest < 46)) {
		mes "有著一座堅固的門";
		next;
		switch(select("開啟看看:不管它")) {
		case 1:
			input .@KHInput$;
			mes "打不開";
			close;
		case 2:
			mes "看樣子沒必要開啟";
			close;
		}
	}
	else {
		mes "是緊閉關著的厚重的門";
		close;
	}
}

kh_dun01,106,233,0	duplicate(HeavyDoorKHQ2)	堅固的門#kh3	HIDDEN_NPC
kh_dun01,6,164,0	duplicate(HeavyDoorKHQ2)	堅固的門#kh4	HIDDEN_NPC
kh_dun01,6,133,0	duplicate(HeavyDoorKHQ2)	堅固的門#kh5	HIDDEN_NPC
kh_dun01,6,60,0	duplicate(HeavyDoorKHQ2)	堅固的門#kh6	HIDDEN_NPC
kh_dun01,6,30,0	duplicate(HeavyDoorKHQ2)	堅固的門#kh7	HIDDEN_NPC
kh_dun01,6,18,0	duplicate(HeavyDoorKHQ2)	堅固的門#kh8	HIDDEN_NPC
kh_dun01,235,70,0	duplicate(HeavyDoorKHQ2)	堅固的門#kh9	HIDDEN_NPC
kh_dun01,235,92,0	duplicate(HeavyDoorKHQ2)	堅固的門#kh10	HIDDEN_NPC
kh_dun01,235,114,0	duplicate(HeavyDoorKHQ2)	堅固的門#kh11	HIDDEN_NPC

//----------------------------------------------------------------------------
// Beautiful Lady and Beautiful Lady copies.
//----------------------------------------------------------------------------
kh_school,119,149,4	script	漂亮的女人#kh1::BeatifulLadyKHQ1	4_F_KHELLISIA,{
	cutin "kh_ellisia",2;
	if (KielHyreQuest < 40) {
		mes "[愛麗希雅]";
		mes "........";
		mes "你不是在我記憶裡的人";
		next;
		mes "[愛麗希雅]";
		mes "依據 啟 海伊洛 先生的話, 能進入到這裡的人是 ^FF0000初級設定的 愛麗^000000和 ^FF0000愛麗的朋友^000000而已";
		next;
		mes "[愛麗希雅]";
		mes "可是怎麼看不到^FF0000愛麗^000000呢, 她也被遇難了嗎? 請問你是^FF0000愛麗的朋友^000000嗎?";
		next;
		mes "[愛麗希雅]";
		mes "那麼請你 出示一下 你是^FF0000愛麗的朋友^000000 的 證明物件好嗎?";
		next;
		switch(select("黃色鑰匙卡:藍色鑰匙卡:黃金鑰匙:有畫著紋樣的鈕扣:......?")) {
		default:
			break;
		case 3:
			mes "[愛麗希雅]";
			mes "這是 啟 海伊洛 先生 給^FF0000愛麗^000000 保管的鑰匙啊, 就用這個足以證明你是, ^FF0000愛麗的朋友^000000了";
			next;
			mes "[愛麗希雅]";
			mes ".....我正在等你呢, 我會帶你到我停留的地方, 請你稍後";
			close2;
			cutin "",255;
			warp "kh_school",120,180;
			end;
		case 4:
			mes "[愛麗希雅]";
			mes "那個是....";
			mes "^0000FF齊爾^000000先生的紋章! 你是來抓我的嗎?";
			close2;
			cutin "",255;
			monster "kh_school",117,144,"恆量魔",1745,1;
			monster "kh_school",117,144,"恆量魔",1745,1;
			monster "kh_school",117,144,"恆量魔",1745,1;
			monster "kh_school",117,144,"恆量魔",1745,1;
			end;
		case 5:
			mes "[愛麗希雅]";
			mes "...........";
			close2;
			cutin "",255;
			end;
		}
		mes "[愛麗希雅]";
		mes "不能只用這個來證明";
		mes "你就是^FF0000愛麗的朋友^000000, ";
		mes "可以請你拿出別的物件來證明嗎?";
		close2;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest >= 40) {
		mes "[愛麗希雅]";
		mes "....請你趕快走吧";
		close2;
		cutin "",255;
		warp "kh_school",120,180;
		end;
	}
}


kh_school,117,149,4	script	漂亮的女人#kh2::BeatifulLadyKHQ2	4_F_KHELLISIA,{
	end;
}
kh_school,118,149,4	duplicate(BeatifulLadyKHQ2)	漂亮的女人#kh3	4_F_KHELLISIA
kh_school,120,149,4	duplicate(BeatifulLadyKHQ2)	漂亮的女人#kh4	4_F_KHELLISIA
kh_school,121,149,4	duplicate(BeatifulLadyKHQ1)	漂亮的女人#kh5	4_F_KHELLISIA

//----------------------------------------------------------------------------
// Beautiful Lady "Allysia"
//----------------------------------------------------------------------------
kh_school,122,186,4	script	漂亮的女人#kh6	4_F_KHELLISIA,{
	if (checkweight(7496,1) == 0) {
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}
	cutin "kh_ellisia",2;
	if (KielHyreQuest < 38) {
		mes "[??????]";
		mes "這裡是私人區域";
		mes "請你立刻離開";
		close2;
		cutin "kh_ellisia",255;
		warp "yuno_fild08",73,172;
		end;
	}
	else if (KielHyreQuest <= 38) {
		mes "[愛麗希雅]";
		mes "我正在等待 ^FF0000初級設定 愛麗^000000的朋友";
		next;
		mes "[愛麗希雅]";
		mes "我想你多少應該知道";
		mes "我需要幫忙, ";
		mes "目前^FF0000啟 海伊洛^000000先生";
		mes "在這工廠的某個地方";
		mes "被監禁中";
		next;
		mes "[愛麗希雅]";
		mes "請你救救^FF0000啟 海伊洛^000000先生吧, 那個才是當務之急啊";
		next;
		switch(select("這工廠到底是....?:請問對^FF0000啟 海伊洛^000000先生 發生了什麼事情呢..")) {
		case 1:
			mes "[愛麗希雅]";
			mes "這裡隸屬於是 啟 海伊洛 企業 秘密事業的, ";
			mes "製作自動機械人形的工廠, ";
			mes "你目前所看到的我, ";
			mes "'或是 啟 海伊洛 學院的學生們, ";
			mes "都不是人類而是'機械人形'";
			next;
			mes "[愛麗希雅]";
			mes "長的跟人類相似卻比人類還堅強, ";
			mes "製作出抗壓性強的自動機械人形, ";
			mes "對人類社會做出貢獻, ";
			mes "是我們 '啟 海伊洛 企業'的目標及 理念";
			break;
		case 2:
			mes "[愛麗希雅]";
			mes "^0000FF齊爾^000000先生";
			mes "對工廠裡的人形";
			mes "強制執行了'異常改造'的行動, ";
			mes "知道這事實的^FF0000啟 海伊洛^000000先生, 對^0000FF齊爾^000000先生的行動";
			mes "加以譴責後, 再也沒有回來過";
			next;
			mes "[愛麗希雅]";
			mes "^FF0000啟 海伊洛^000000先生";
			mes "知道, 擔心我會在 ^0000FF齊爾^000000先生";
			mes "手裡被破壞, ";
			mes "所以把我放在這裡, 而從我的一堆人形中";
			mes "拿走了一個人形";
			next;
			mes "[愛麗希雅]";
			mes "看來目前還是可以收到^FF0000啟 海伊洛^000000先生的";
			mes "生存信號, 所以 ^FF0000啟 海伊洛^000000先生";
			mes "目前是平安的, ";
			mes "麻煩你能找一下^FF0000啟 海伊洛^000000先生";
			mes "所在的地方好嗎";
			next;
			mes "[愛麗希雅]";
			mes "我給你一個可以在工廠秘密地區";
			mes "到處可遊走的^FF0000鑰匙卡^000000, ";
			mes "若找到^FF0000啟 海伊洛^000000先生";
			mes "的所在地的話, 請回到這裡告訴我好嗎";
			getitem 7496,1; //Red_Key_Card
			set KielHyreQuest,40;
			break;
		}
		close2;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest == 40) {
		mes "[愛麗希雅]";
		mes "麻煩你快點去找^FF0000啟 海伊洛^000000先生吧";
		close2;
		cutin "",255;
		warp "kh_dun01",22,216;
		end;
	}
	else if (KielHyreQuest == 42) {
		mes "[愛麗希雅]";
		mes "請問你有找到 啟 海伊洛 先生嗎?";
		next;
		mes "我告訴那位女人, 啟 海伊洛 被監禁地方的位置, 並把他給我的^FF0000碎金屬破片^000000給她看了";
		next;
		mes "^0000FF愛麗希雅^000000接受 ^FF0000碎金屬破片^000000後, 裝置在自己的手臂上";
		next;
		mes "^FF0000啟 海伊洛^000000先生 的暗號確認, ";
		mes "B_2_3地區 生體訊號 正常, ";
		mes "同封文書確認, 改造人形設計圖傳送完畢";
		next;
		mes "[愛麗希雅]";
		mes "按.照.命.令 來.執.行.";
		delitem 7497,1; //Steel_Piece
		set KielHyreQuest,44;
		close2;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest == 44) {
		mes "[愛麗希雅]";
		mes "我現在要開始要執行^FF0000啟 海伊洛^000000先生的命令了, ";
		mes "等以後請到^0000FF裡希塔樂鎮的 '啟 海伊洛 官邸'^000000 來找我吧, ";
		mes "並且你所攜帶的鑰匙卡, 因保安上的需要就直接回收了";
		next;
		mes "[愛麗希雅]";
		mes "只要你到官邸";
		mes "把^FF0000黃金鑰匙^000000 拿給他們看的話, ";
		mes "他們會為你服務的";
		delitem 7492,1; //Yellow_Key_Card
		delitem 7495,1; //Blue_Key_Card
		delitem 7496,1; //Red_Key_Card
		set KielHyreQuest,46;
		close2;
		warp "yuno_fild08",73,172;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest >= 44) {
		warp "yuno_fild08",73,172;
		cutin "",255;
		end;
	}
}

//----------------------------------------------------------------------------
// Signboard (another useless NPC?)
//----------------------------------------------------------------------------
kh_dun01,163,223,4	script	看板#kh	4_BOARD3,{
	mes "寵物禁止進入";
	close;
}

//----------------------------------------------------------------------------
// Mechanical Devices for accessing restricted area
//----------------------------------------------------------------------------
kh_dun01,166,223,0	script	機械裝置#kh::KHKeyardReader	HIDDEN_NPC,{
	if ((KielHyreQuest <= 38) || (KielHyreQuest >= 44)) {
		mes "可以放入某種東西的機械裝置";
		close;
	}
	else if ((KielHyreQuest == 40) && (countitem(7496) >= 1)) {
		mes "可以放入某種東西的機械裝置";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "紅色鑰匙卡") {
			mes "放入鑰匙卡後";
			mes "門就開啟了";
			close2;
			warp "kh_dun01",170,227;
			end;
		}
		else {
			mes "沒有任何反應";
			close;
		}
	}
}

kh_dun01,162,206,0	duplicate(KHKeyardReader)	機械裝置	HIDDEN_NPC

//----------------------------------------------------------------------------
// Keep monsters out of the quest area.
// Silly really since the rest of it's a dungeon
//----------------------------------------------------------------------------
//kh_dun01,180,220,0	script	Monster Warp#kh1::KHMobWarp	-1,5,20,{
//OnTouchNPC:
//	warp "kh_dun01",178,138;
//	end;
//}

//kh_dun01,190,220,0	duplicate(KHMobWarp)	Monster Warp#kh2	-1,5,20
//kh_dun01,200,250,0	duplicate(KHMobWarp)	Monster Warp#kh3	-1,5,20
//kh_dun01,210,220,0	duplicate(KHMobWarp)	Monster Warp#kh4	-1,5,20
//kh_dun01,220,220,0	duplicate(KHMobWarp)	Monster Warp#kh5	-1,5,10

//----------------------------------------------------------------------------
// Kiel Hyre - OnTouch
//----------------------------------------------------------------------------
kh_dun01,224,233,0	script	Factory B Area Door	-1,5,5,{
//OnTouch2:
OnTouch:
	if (KielHyreQuest == 40) {
		if (checkweight(7497,1) == 0) {
			mes "請在這裡暫停一下 !!";
			mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
			close;
		}
		mes "...........";
		next;
		mes "好像在門的對面 聽到某人說話的聲音";
		next;
		mes "[????]";
		mes "...^0000FF齊爾^000000....你為什麼要這...";
		next;
		mes "是...^FF0000啟 海伊洛^000000先生 嗎?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "^FF0000啟 海伊洛^000000先生?";
		next;
		mes "[啟 海伊洛]";
		mes ".....誰呀?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我是.....";
		next;
		mes "對^FF0000啟 海伊洛^000000先生 把^FF0000愛麗^000000和 ^0000FF愛麗希雅^000000小姐的 故事說給他聽了";
		next;
		mes "[啟 海伊洛]";
		mes "....原來這樣子啊, 難道連愛麗也被那些傢伙們遇難了嗎";
		mes ".............";
		next;
		mes "請把這個帶走吧, 把這個給^0000FF愛麗希雅^000000的話 她會知道怎麼做";
		next;
		mes "從門和地面的縫隙中 推出來了一個^FF0000碎金屬破片^000000";
		getitem 7497,1; //Steel_Piece
		set KielHyreQuest,42;
		close;
	}

	else if (KielHyreQuest >= 42) {
		mes "[啟 海伊洛]";
		mes "........";
		close;
	}
}

//----------------------------------------------------------------------------
// Robot Factory Second Floor Entrances
//----------------------------------------------------------------------------
kh_dun01,44,203,0	script	出入 裝置#khd2::KHAccess	HIDDEN_NPC,{
	if (countitem(7509) < 1) {
		mes "有一座巨大的門";
		close;
	}
	else {
		mes "有著可以讓鑰匙卡";
		mes "進去的機械裝置的門";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "華麗的鑰匙卡") {
			mes "使用'華麗的鑰匙卡'後, ";
			mes "巨大的門開啟了, ";
			mes "出現了通往下面的樓梯";
			next;
			switch(select("下去:不下去")) {
			case 1:
				warp "kh_dun02",41,198;
				end;
			case 2:
				mes "過了一段時間後 門關起來了";
				close;
			}
		}
		else {
			mes "打不開";
			close;
		}
	}
}

kh_dun01,36,195,0	duplicate(KHAccess)	出入 裝置#khd1	HIDDEN_NPC

//============================================================================

//============================================================================
// 啟 海伊洛宅邸NPC, 及 基爾的房間 NPC
//============================================================================

//----------------------------------------------------------------------------
// 啟 海伊洛的管家
//----------------------------------------------------------------------------
kh_mansion,78,55,5	script	管家#kh	109,{
	if (KielHyreQuest < 46) {
		mes "[管家]";
		mes "這裡是私人住宅, 請你離開好嗎";
		close2;
		warp "lighthalzen",188,201;
		end;
	}
	if ((KielHyreQuest >= 46) && (KielHyreQuest < 50)) {
		mes "[管家]";
		mes "請問你是主人的客人嗎?";
		mes "那麼請出示證據給我看";
		next;
		switch(select("把黃金鑰匙拿給他看:????")) {
		case 1:
			mes "[管家]";
			mes "是"+strcharinfo(0)+"先生/小姐啊, 我們正在等你呢, 我來帶領你到主人那裡吧";
			close2;
			warp "kh_mansion",21,14;
			end;
		case 2:
			mes "[管家]";
			mes "若你不是客人的話, 請你離開好嗎";
			close2;
			warp "lighthalzen",188,201;
			end;
		}
	}
	if ((KielHyreQuest >= 50) && (KielHyreQuest < 64) || (KielHyreQuest >= 70)) {
		mes "[管家]";
		mes ".....請問你要見我們家主人嗎?";
		next;
		switch(select("是的:不要")) {
		case 1:
			mes "[管家]";
			mes "我來帶你去";
			close2;
			warp "kh_mansion",21,14;
			end;
		case 2:
			mes "[管家]";
			mes "我在這裡等你吧";
			close;
		}
	}
	if ((KielHyreQuest == 52) || (KielHyreQuest == 54) || (KielHyreQuest >= 64) && (KielHyreQuest <= 70)) {
		mes "[管家]";
		mes "歡迎光臨, 我們正在等你呢, 請問你要跟主人說話嗎? 或是跟....";
		next;
		switch(select("和^FF0000啟 海伊洛^000000先生 對話呢..:^3355FF米契爾^000000...")) {
		case 1:
			mes "[管家]";
			mes "我了解了, 我來帶你去吧";
			close2;
			warp "kh_mansion",21,14;
			end;
		case 2:
			mes "[管家]";
			mes "哈哈.... 看樣子你有帶來好消息啊";
			next;
			mes "觀察周圍的管家的眼神不是普通啊...";
			mes "果然平凡的管家是....";
			mes "請問你的名字是不是";
			mes "爾普...嗯嗯..";
			mes ".......... ";
			next;
			mes "[管家]";
			mes "看樣子沒有討厭的傢伙在這邊, 請到這邊...";
			close2;
			warp "kh_mansion",20,87;
			end;
		}
	}
}

//----------------------------------------------------------------------------
// 啟 海伊洛
//----------------------------------------------------------------------------
kh_mansion,22,28,4	script	Kiel Hyre#kh	4_M_KHKYEL,{
	if (checkweight(908,200) == 0) {
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}

	cutin "kh_kyel01",2;
	if (KielHyreQuest < 46) {
		mes "[啟 海伊洛]";
		mes ".........";
		close2;
		cutin "",255;
		end;
	}

	else if (KielHyreQuest == 46) {
		cutin "kh_kyel01",2;
		mes "[啟 海伊洛]";
		mes "噢~ 你是 "+strcharinfo(0)+"嗎?";
		mes "謝謝你的幫忙..";
		mes "因為有你工作變得順利多了";
		next;
		mes "[啟 海伊洛]";
		mes "呵嗯... 看樣子有很多 疑惑的表情啊.. 其實對你來說 也是一場陌生的經驗吧..";
		next;
		mes "[啟 海伊洛]";
		mes "若有疑問的話就直接問我吧, 若是可以在回答的範圍內的話, 我就幫你回答吧";
		next;
		while(1) {
			switch(select("機械人形是...?:^3355FF齊爾^000000這人是..?:^FF0000愛麗^000000所拿的鈕扣是?")) {
			case 1:
				mes "[啟 海伊洛]";
				mes "是32年前 我20歲開始投入靈魂般";
				mes "渾身研究的研究物啊..";
				mes "是大賢者 霸肋門德 想要做的, ";
				mes "和人類類似和人類一樣般行動的, ";
				mes "是以人類的手所做成的人形, ";
				mes "那就是機械人形啊";
				next;
				mes "[啟 海伊洛]";
				mes "也許可能看起來";
				mes "跟監護人魔物很類似, ";
				mes "卻跟那些沒有自己的意見, ";
				mes "只會聽命行事的監護人魔物";
				mes "是不一樣的, ";
				mes "他們是會自行思考行動的";
				mes "現代科學的產物..";
				next;
				mes "[啟 海伊洛]";
				mes "若想了解更清楚一點的話, ";
				mes "請你去詢問^0000FF愛麗希雅^000000吧..";
				set .@KHQRead,.@KHQRead+1;
				next;
				break;
			case 2:
				mes "[啟 海伊洛]";
				mes "^3355FF齊爾^000000是";
				mes "我和之前所喜愛的女人";
				mes "所生下來的唯一的我的兒子, ";
				mes "那位女人生完小孩就去世了..";
				mes "那小孩擁有著天才般的";
				mes "機械設計能力..";
				next;
				mes "[啟 海伊洛]";
				mes "像^FF0000愛麗^000000一樣的 第3代 機械人形";
				mes "也是^3355FF齊爾^000000所設計的, ";
				mes "可是現在是把..";
				mes "第3代 機械人形做改造, ";
				mes "想做為其它用途來使用..";
				next;
				mes "[啟 海伊洛]";
				mes "我本來是要去那裡阻擋他的, ";
				mes "卻被他監禁在那裡了..";
				mes "到底那傢伙想要的是什麼呢..";
				mes "為什麼要開始做出那種行動呢, ";
				mes "我到現在還是不能理解啊";
				set .@KHQRead,.@KHQRead+1;
				next;
				break;
			case 3:
				mes "[啟 海伊洛]";
				mes "那紋路是 ^3355FF齊爾的紋路^000000";
				mes "你說是穿黑色衣服的男子嗎?";
				mes "我想那可能是 ^3355FF齊爾^000000的";
				mes "個人保鏢 '凱音哲' 也不一定啊";
				next;
				mes "[啟 海伊洛]";
				mes "不知道從何時開始被 ^3355FF齊爾^000000";
				mes "所僱用的身分不明的男士, ";
				mes "平常都一直穿著黑色衣服, ";
				mes "不常於暴露身份, ";
				mes "連我都不知道他的真實面孔啊";
				set .@KHQRead,.@KHQRead+1;
				next;
				break;
			}
			if (.@KHQRead == 3) {
				mes "[啟 海伊洛]";
				mes "呼嗚.. 請不要再詢問了, 我有點累呀";
				delitem 7493,1; //Golden_Key
				delitem 7494,1; //Kiel_Button
				set KielHyreQuest,48;
				break;
			}
		}
	}
	else if (KielHyreQuest == 48) {
		mes "[啟 海伊洛]";
		mes "還有.... 這是感謝的謝禮, 雖然是小小的東西 請你收下吧...";
		getitem 12105,1; //Taming_Gift_Set
		getexp 700000,0;
		set KielHyreQuest,50;
	}
	else if ((KielHyreQuest >= 50) && (KielHyreQuest < 64)) {
		mes "[啟 海伊洛]";
		mes "若沒有問題要問的話 我要休息了";
	}
	else if (KielHyreQuest == 64) {
		cutin "kh_kyel01",2;
		mes "[啟 海伊洛]";
		mes "請問還有什麼話要說嗎?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我還沒有正確的情報";
	}
	else if (KielHyreQuest == 68) {
		cutin "kh_kyel02",2;
		mes "[啟 海伊洛]";
		mes "噢噢.. 是"+strcharinfo(0)+"先生啊 請問有什麼事嗎?";
		next;
		select("詢問有關^0000FF愛麗希雅^000000的事情");
		mes "["+strcharinfo(0)+"]";
		mes "我在朱諾的某個廢棄的民宅裡, 看到了和 ^0000FF愛麗希雅^000000長的一模一樣的肖像畫";
		next;
		cutin "kh_kyel02",2;
		mes "[啟 海伊洛]";
		mes "........... 我不知道你要想講些什麼啊, 那個到底又怎麼了呢?";
		next;
		cutin "kh_Kyel03",2;
		mes "[啟 海伊洛]";
		mes "這世界上有很多長相類似的人, 對於那個神奇的偶然, 就是你想要對我所說的事情嗎?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "不, 那女人和^0000FF愛麗希雅^000000 是不是同一號人物, 有所疑問所以才會對你說的";
		next;
		cutin "kh_kyel02",2;
		mes "[啟 海伊洛]";
		mes "呵呵, 看樣子你是搞錯了, ^0000FF愛麗希雅^000000是我親自設計的 款式";
		next;
		mes "[啟 海伊洛]";
		mes "至於.. 那肖像畫.. 也許是有人看到路過的 ^0000FF愛麗希雅^000000的模樣, 把她畫出來也不一定, 因為畫家們是喜歡畫些 自己所喜愛的對象啊";
		next;
		cutin "kh_kyel01",2;
		mes "["+strcharinfo(0)+"]";
		mes "其實, 那幅畫看起來 是過了一段滿久遠的樣子..";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我所看到肖像畫是約30年前的一副畫, 那女孩的名字也叫做 '^0000FF愛麗希雅^000000', 是在朱諾 羅希米愛樂家裡工作的女孩";
		next;
		cutin "kh_kyel02",2;
		mes "[啟 海伊洛]";
		mes "............";
		next;
		cutin "kh_kyel01",2;
		mes "["+strcharinfo(0)+"]";
		mes "突然間讓我想到一件事情, 那女的是^0000FF愛麗希雅^000000的模仿對象, 也許是你年輕的時候 所喜愛的人也不一定..";
		next;
		mes "[啟 海伊洛]";
		mes "................";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "有一位貧窮的男子 喜歡了一位女子.. 可是那位女子 已喜歡上別的男人了, ";
		mes "那女的所喜歡的男子 跟那位貧窮的男子相比, 擁用著無法比較的富和權力的人";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "更讓人荒唐的是, 那女的所喜愛的富家少爺, 在家裡已有命定的未婚妻, 有一天突然那家少爺 背叛了那個女的, 跟未婚妻就這樣結婚了";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "那女的受不了背叛的打擊, 朝著冰冷的湖面投身而去, 喜歡那女的 貧窮的男子 開始萌起復仇的念頭了";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "對那位男子本身 有一個特別的技術, 那技術又是某個企業 非常急迫需要的技術, 那男子把那個技術賣給了企業, ";
		mes "而那個企業為那個男子所付出的代價是, 讓他實現復仇";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "在這邊我們給這些人 取上一些名字吧, 富家少爺 羅希米愛樂, 可憐的小姐 愛麗希雅, 貧窮的男子 啟 海伊洛..";
		next;
		cutin "kh_Kyel03",2;
		mes "[啟 海伊洛]";
		mes "呵呵... 呵哈哈哈哈哈.. 真的是一個不簡單的想像力啊, 只是因為 ^0000FF愛麗希雅^000000 跟那位女子是同名, 長的像的女子的理由, ";
		mes "只有想像到這些嗎? 你乾脆轉職去做小說家吧?";
		next;
		mes "[啟 海伊洛]";
		mes "也許, 可能是在很久以前 我見過那位女的也不一定, 所以在無意識中把 ^0000FF愛麗希雅^000000 做的和那位女的很像也不一定";
		next;
		mes "[啟 海伊洛]";
		mes "可是我和那位女孩恩愛的事 只不過是你的妄想而已, 我和那位女孩互相認識 的證據在哪裡呢? 呼呼";
		next;
		select("把在涼亭上得到的肖像畫拿給他看");
		cutin "kh_kyel02",2;
		mes "[啟 海伊洛]";
		mes "這...這是? ....... 在那裡得到這..?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "啟 海伊洛 先生, 這就是你年輕時候的肖像畫啊";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "這是打撈'^0000FF愛麗希雅^000000'屍體的 漁夫告訴我的, 這裡是買走那女人的戒指那位男士所生活的家, 就是在這裡找到的";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "你把那位女人所戴的戒指, 比市價更高的價錢給買走了, 請問那是完全不認識那位女人 所能做出來的事情嗎?";
		next;
		cutin "kh_Kyel03",2;
		mes "[啟 海伊洛]";
		mes "............";
		mes "休嗚....終於被你知道了..";
		next;
		mes "[啟 海伊洛]";
		mes "對啊, 機械人形 ^0000FF愛麗希雅^000000是 模仿已故的 ^0000FF愛麗希雅^000000所做出來的, 因為我愛過那位女人..";
		next;
		mes "[啟 海伊洛]";
		mes "可是說我把羅希米愛樂家 弄成沒落, 那是你自己的幻覺, 我只是一位機械工學者而已啊, 我對其它事業沒什麼關心啊";
		next;
		mes "[啟 海伊洛]";
		mes "我痛恨他是事實, 那都是年輕時候的事情啊, 我是沒有才能讓 羅希米愛樂家 像這樣有著根深柢固的家門沒落啊";
		next;
		cutin "kh_kyel02",2;
		mes "'看樣子需要確實的證據, '";
		mes "'把那個拿給他看看嗎?'";
		next;
		select("羅希米愛樂家 的肖像畫");
		mes "["+strcharinfo(0)+"]";
		mes "真的是這樣嗎? 請你看這個, 這肖像畫是在 羅希米愛樂家 那裡所發現的, 也許是 羅希米愛樂家的家人吧";
		next;
		mes "^FF0000啟 海伊洛^000000悄悄的看了一眼肖像畫";
		next;
		cutin "kh_Kyel03",2;
		mes "[啟 海伊洛]";
		mes "那又怎麼樣了呢? 我從來沒有見過這些人啊";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "^FF0000啟 海伊洛^000000先生, 你所攜帶的懷表... 看樣子滿久了的樣子... 和這幅畫裡的那個人所攜帶的 好像是同一款物品";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "為什麼你會擁有 那個懷表呢?";
		next;
		cutin "kh_kyel02",2;
		mes "[啟 海伊洛]";
		mes ".............";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "'看樣子說中了'";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "對你來說沒有才能 讓一個家門沒落啊..可是! 你的贊助人 雷根貝勒社, 換他們的話對這種小事情 簡直是易如反掌啊?";
		next;
		cutin "kh_Kyel03",2;
		mes "[啟 海伊洛]";
		mes "很不簡單啊, 是啊, 是我把那家門給弄成沒落了, 可是這些都是為了冤枉死去的 ^0000FF愛麗希雅^000000啊";
		next;
		mes "[啟 海伊洛]";
		mes "若詹姆斯沒有背叛那個女的的話, 若跟那個女孩幸福的活著了的話, 所以那個女孩沒有自殺的話...";
		next;
		mes "[啟 海伊洛]";
		mes "哼, 對那種做出壞事的傢伙復仇 到底有錯嗎!!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "那女孩並不是自殺的, 所以你的復仇 並沒有正當性";
		next;
		mes "[啟 海伊洛]";
		mes "什麼?!!!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "請你看這個";
		next;
		select("把詹姆斯的紙條 拿給他看");
		mes "[啟 海伊洛]";
		mes "哼.. 這是什麼玩意紙條啊? 就用這種紙條一張來證明, 詹姆斯沒有背叛那個女的嗎? 那不足以證明的? 結果那個女孩是沒有自殺嗎!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "那麼那位女孩在前一天晚上, 也就是 8月 19日 晚上 死亡了的意思囉......";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "詹姆斯和那位女的講好一起要私奔的日期是 30年前的 8月 20日.. 並且發現那位女的屍體日期也是8月 20日, 有點奇怪吧?";
		mes "那麼那位女孩在前一天晚上, 也就是 8月 19日 晚上 死亡了的意思囉......";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "為什麼那位女孩和喜歡的男人, 說好在一起私奔的前一天晚上, 卻要跳進冰冷的江水裡面呢?";
		next;
		mes "[啟 海伊洛]";
		mes "因為她不相信這個男生啊, 所以她認為她只不過是富豪年輕 男子的一時玩伴而已啊... ............. ........ ....";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "............ ..... ..";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "不, 那位女的不會是因為那個理由 而跳進江水的, 在這張紙條上 有著真實的事實";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "也許是在前一天, 也就是 8月 19日, 她會去江邊的理由 就是你約她出來的關係";
		next;
		mes "[啟 海伊洛]";
		mes ".............! 這...這是什麼話呀!! 我那天約她出來的證據 在在哪裡啊!!!";
		next;
		select("K.H的 紙條");
		mes "["+strcharinfo(0)+"]";
		mes "證據的話.... 在這裡啊, 這紙條上明明寫著8月19日晚上, 和她約在第一次所見面的地方 相見的內容啊, 也許那個地點是.. 江邊吧";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "這裡所寫的簡稱 K.H 是, 是在你確認過的肖像畫 裡所用的簡稱是一樣的, 那天晚上你和她之間 到底發生什麼事情了呢?";
		next;
		cutin "kh_kyel02",2;
		mes "[啟 海伊洛]";
		mes "............. ....... .....";
		next;
		cutin "kh_Kyel03",2;
		mes "[啟 海伊洛]";
		mes "喀... 喀喀... 是啊... 那天晚上... ..........";
		next;
		cutin "kh_kyel02",2;
		mes "[啟 海伊洛]";
		mes "那天晚上, 她按照我的邀約來到了江邊, 我對她建議說, 請把背叛她的詹姆斯給丟棄吧, 然後就跟著我一起私奔吧";
		next;
		mes "[啟 海伊洛]";
		mes "可是她卻對我說, 詹姆斯沒有背叛她, 也拒絕和我一起私奔, 你猜當我聽到這句話時我的心情會怎麼樣? 嗚嗚... 真的是很慘痛啊";
		next;
		mes "[啟 海伊洛]";
		mes "我還站在她前面時, 當我看到她用手觸摸戒指的那一瞬間, 我實在是太生氣了從她那裡把戒指給搶走了, 想要投擲到江裡去";
		next;
		mes "[啟 海伊洛]";
		mes "可是她確試圖 想要從我這裡找回戒指啊, 只是小小的肢體衝突.. 那時因為好幾天的豪雨 造成地基脆弱而倒塌了....... ......... ";
		next;
		select(".........");
		mes "[啟 海伊洛]";
		mes "喀.. 喀喀.. 哈哈哈哈哈";
		delitem 7499,1; //Family_Portrait
		delitem 7500,1; //Elysia_Portrait
		delitem 7501,1; //Kyll_Hyre_Letter2
		delitem 7502,1; //Piece_Memo_Of_James
		delitem 7503,1; //Man_Portrait
		set KielHyreQuest,70;
		close2;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest <= 70) {
		cutin "kh_kyel01",2;
		mes "[啟 海伊洛]";
		mes "第二天...";
		mes "發現她時已經死亡了, 並且手裡還緊握著戒指啊....";
		mes "哈哈...";
		next;
		cutin "kh_kyel03",2;
		mes "[啟 海伊洛]";
		mes "我也不知道是什麼樣的想法, 對撿到那戒指的漁夫, 用我的全部財產向他購買戒指了, ";
		mes "然後我就... 離開了";
		mes "那個受到詛咒般的朱諾了";
		next;
		mes "[啟 海伊洛]";
		mes "我離開朱諾後, 邊四處流浪邊思考, 我為什麼要像這樣被追逐到處流浪呢?所有的原因都是來自羅希米愛樂家的關係...";
		mes "以及那位男子詹姆斯的緣故啊";
		mes "後來是這樣領悟到的";
		next;
		mes "[啟 海伊洛]";
		mes "我絕對不能原諒他, 他已經擁有所有需要的東西了, 連^0000FF愛麗希雅^000000也要獲得的";
		mes "那位富家少爺...";
		mes "當他失去所有東西的時候是多麼的難堪啊, ";
		mes "我想讓死去的愛^0000FF麗希雅^000000看到這些";
		next;
		mes "[啟 海伊洛]";
		mes "然後我拿著 第1代人形....";
		mes "^0000FF愛麗希雅^000000 的設計圖, 去拜訪了雷根貝勒社";
		next;
		mes "[啟 海伊洛]";
		mes "雷根貝勒社把我想要的";
		mes "所有東西都提供給我了, 金錢、權力、人脈, 還有把某個人弄成沒落的方法....";
		mes "相對的我提供給他們 機械人形";
		next;
		mes "[啟 海伊洛]";
		mes "我也大概猜測到他們會使用在那裡, 監視、暗殺、間諜等等, 這比那些不知什麼時候會被背叛的人類來的更安全的裝備啊";
		next;
		mes "[啟 海伊洛]";
		mes "呵呵.....看來你能調查到這樣, 我想你背後一定有某些後臺吧, 他們到底想要什麼呢? 我的生命? 還是機械人形的設計圖?";
		mes "若不是這個的話, 是全部的東西嗎?";
		mes "哈哈哈";
		next;
		select("他們是....");
		cutin "kh_kyel01",2;
		mes "["+strcharinfo(0)+"]";
		mes "這是為了 你和雷根貝勒社的關係, 還有有關 ^0000FF齊爾^000000的事情";
		next;
		mes "[啟 海伊洛]";
		mes "^0000FF齊爾^000000啊.... 是你的話大概猜測到的, 有關那小孩的身份..";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "難道他也是..機械人形嗎? 第2代的...";
		next;
		mes "[啟 海伊洛]";
		mes "是的, ^0000FF齊爾^000000是最初使用到壓縮魔法捲軸的 第2代 機械人形.. 是經過許多失敗和錯誤的考驗所誕生的 獨一無二的 第2代啊..";
		next;
		mes "[啟 海伊洛]";
		mes "所以對那孩子會更有愛意啊, 以取我和 ^0000FF愛麗希雅^000000的名字, 命名為^0000FF齊爾^000000, 把我所有的機械設計精髓都傳授給他了";
		next;
		mes "[啟 海伊洛]";
		mes "目前他正在製作 第3代 機械人形, 擁有卓越的資質, 可是....並沒有教他好好做人, 只是一個不錯的繼承者而已...";
		next;
		select("..........");
		mes "[啟 海伊洛]";
		mes "改造的機械人形, 它們就如傳聞, 就是披著人皮的殺人兵器啊, ";
		mes "也不會像監護人魔物那樣 有著獨特的外表, 是有著不會被 任何人查覺的人類模樣啊....";
		next;
		mes "[啟 海伊洛]";
		mes "我對 ^0000FF齊爾^000000的天才般的學習能力, 強壯的力量、還有感情上的不安定";
		mes "一直擔憂著";
		next;
		mes "[啟 海伊洛]";
		mes "所以才會讓 第3代 賦予著跟人類類似的筋力和學習能力, 透過團體的生活 讓他學習到人類的感情";
		next;
		mes "[啟 海伊洛]";
		mes "可是 ^0000FF齊爾^000000所改造的 第3代人形們, 完全不理會那控制";
		next;
		mes "[啟 海伊洛]";
		mes "搭載著如魔物般能力的小孩, ";
		mes "和機械融合在一起的小孩們..";
		mes "那就是";
		mes "雷根貝勒社所要執行的";
		mes "人類生體實驗的相同的事情啊..";
		next;
		mes "[啟 海伊洛]";
		mes "請你想像看吧, 人類不承認人類尊嚴性的世界...";
		next;
		mes "[啟 海伊洛]";
		mes "你.....竟然觸碰了";
		mes "我不想回憶的過去, 啊啊...";
		mes "不過";
		mes "我也並不會對你怎麼樣的...";
		mes "只是幫我一個委託 就好";
		next;
		select("委託?");
		mes "[啟 海伊洛]";
		mes "是啊..";
		mes "委託啊, 大概.....";
		mes "和他們委託你";
		mes "所做的調查目的, 不會有太大的差別的";
		next;
		select("愛麗希雅的戒指?");
		mes "[啟 海伊洛]";
		mes "請你幫我阻擋^0000FF齊爾^000000吧, 我再不想看到我所製作出來的小孩";
		mes "遭受破壞啊";
		next;
		mes "[啟 海伊洛]";
		mes "雖然....";
		mes "讓那些孩子們墮落的確實是我.";
		mes "..";
		mes "那些罪孽等到這些事情都結束後, ";
		mes "我會自願接受懲罰的";
		next;
		select("接受:接受他的委託:點頭示意");
		mes "[啟 海伊洛]";
		mes "謝謝你, ^0000FF齊爾^000000應該在 這官邸的地下呀";
		next;
		mes "[啟 海伊洛]";
		mes "這是那個孩子剛做出來時所待的房間, 現在因為被改造了, 變成連我都不能進入到 很深的空間了";
		next;
		mes "[啟 海伊洛]";
		mes "請在那裡幫我找到那位孩子吧, 並且在那孩子的心臟那裡 請拿一件物品來吧, 那麼那孩子的暴力傾向會停住的";
		next;
		select("物品?");
		mes "[啟 海伊洛]";
		mes "^0000FF愛麗希雅^000000的戒指..";
		mes "是這一切事端起因的物品...";
		mes "當我製作出那孩子時";
		mes "為了不要忘記對 羅希米愛樂社的怨恨, ";
		mes "和我對那孩子的感情, 於是在那孩子心臟裡";
		mes "植入戒指來代替主要的零件了";
		next;
		mes "[啟 海伊洛]";
		mes "以一般的武器 來制服他是滿困難的, 就給你這個吧, 它是可以讓 第2代 身軀的動力停止的機械";
		next;
		mes "[啟 海伊洛]";
		mes "把這個貼在^0000FF齊爾^000000身上的話, 他會暫時不能使力的, 趁這個空檔時開啟那個孩子的胸部, 取出戒指即可..";
		mes "拜託你啦";
		getitem 7504,1; //Toy_Motor
		next;
		cutin "kh_kyel03",2;
		mes "[啟 海伊洛]";
		mes "若你準備好了的話, 我就把你送到^0000FF齊爾^000000的 房間了";
		set KielHyreQuest,74;
	}
	else if ((KielHyreQuest >= 74) && (KielHyreQuest <= 104)) {
		mes "[啟 海伊洛]";
		mes "請問準備好了嗎?";
		next;
		switch(select("是的:還沒")) {
		case 1:
			mes "[啟 海伊洛]";
			mes "那麼...就拜託你啦..";
			close2;
			enablenpc "Kiehl_Room_Warp";
			donpcevent "Kiehl_Room_Warp::OnEnable";
			end;
			break;
		case 2:
			mes "[啟 海伊洛]";
			mes "若準備好了的話, 再來找我吧";
			break;
		}
	}
	else if ((KielHyreQuest >= 74) && (KielHyreQuest <= 106)) {
		cutin "kh_kyel01",2;
		mes "[啟 海伊洛]";
		mes "你來了嗎, 那請問齊爾有沒有怎麼樣啊?";
		next;
		if (countitem(7508) < 1) {
			mes "[啟 海伊洛]";
			mes "You mean... You don't have it?";
			mes "Please, retrieve Allysia's Ring";
			mes "from Kiehl's heart!";
			next;
			enablenpc "Kiehl_Room_Warp";
			donpcevent "Kiehl_Room_Warp::OnEnable";
			close2;
			cutin "",255;
			end;
		}
		mes "向^FF0000啟 海伊洛^000000把這幾天所發生的事情告訴他了, 聽完這番話的^FF00000啟 海伊洛^000000顯露出沉痛的表情";
		next;
		if (Sex == 0) {
			set .@KHTitle$,"小姐";
		}
		else set .@KHTitle$,"先生";
		mes "不管怎麼樣謝謝你啦";
		mes ""+strcharinfo(0)+""+.@KHTitle$+"..";
		mes "我再也不能坐視不理啦, 他已經對我視同提出挑戰書了, ";
		mes "我也試著拿出我的誠意來阻擋那孩子了";
		next;
		mes "[啟 海伊洛]";
		mes "請你收下這個吧, 這是這些日子以來你幫我做些事情的謝意表達..";
		next;
		mes "[啟 海伊洛]";
		mes "我知道我很冒昧, 我想再拜託你一件事情, 我回想我當初在工廠被監禁時, 見過了一個跟^0000FF齊爾^000000一模一樣的 機械人形";
		next;
		mes "[啟 海伊洛]";
		mes "我那時候認為^0000FF齊爾^000000隻是抱著玩耍的心態所做出來的自己的複製人而已..等聽完你所講的話之後, ";
		mes "我才知道那是為了那孩子換身軀時所製造出來的實驗體啊";
		next;
		mes "[啟 海伊洛]";
		mes "我給你一把可以進入到工廠深層裡的鑰匙卡吧, 請你幫我檢查一下工廠吧, 我去檢查一下已倒塌的^0000FF齊爾^000000房間";
		getitem 7509,1; //Fancy_Key_Card
		set KielHyreQuest,108;
		next;
		mes "[啟 海伊洛]";
		mes "那麼祝你一路小心啊";
		getitem 616,1;  //Old card Album
		delitem 7508,1; //Elysia_Ring
		getexp 1000000,0;
	}
	else if (KielHyreQuest >= 108) {
		mes "[啟 海伊洛]";
		mes "......";
		mes ".........";
		mes "............";
	}
	close2;
	cutin "",255;
	end;
}


//----------------------------------------------------------------------------
// Allysia
//----------------------------------------------------------------------------
kh_mansion,18,30,4	script	愛麗希雅	4_F_KHELLISIA,{
	if (KielHyreQuest < 46) {
		mes "[愛麗希雅]";
		mes "Who are you?";
		mes "How did you get here?";
		mes "Go away";
		close;
	}
	cutin "kh_ellisia",2;
	if (KielHyreQuest < 70) {
		mes "[愛麗希雅]";
		mes "請問你需要 有關機械人形的說明嗎?";
		next;
		switch(select("是的:不需要")) {
		case 1:
			mes "[愛麗希雅]";
			mes "所謂機械人形是指 自己會思考會動的人形, 在過去有很多賢者們, 做了很多研究所失敗的 機械工學的精粹";
			next;
			mes "[愛麗希雅]";
			mes "我的主人啟 海伊洛先生, 從20歲開始做研究, ";
			mes "總計製作出了3種類型的機械人形, 那些統稱為 第1代、第2代、第3代的 機械人形啊";
			next;
			switch(select("第1代?:第2代?:第3代?")) {
			case 1:
				mes "[愛麗希雅]";
				mes "你現在所看到的我'^0000FF愛麗希雅^000000', ";
				mes "就是^FF0000啟 海伊洛^000000先生的第1代";
				mes "機械人形";
				next;
				mes "[愛麗希雅]";
				mes "在純粹的機械骨骼上";
				mes "放上人工心臟, ";
				mes "穿上以化學所做成的";
				mes "人工皮膚";
				next;
				mes "[愛麗希雅]";
				mes "頭腦是應用魔法捲軸的";
				mes "'記憶捲軸'植入, ";
				mes "所做成的舊型機械人形, ";
				mes "就是第1代的機械人形";
				next;
				mes "[愛麗希雅]";
				mes "因為有機械骨骼的關係, ";
				mes "所以重量比較重, ";
				mes "因為有著限定的捲軸容量, ";
				mes "所以不能從事複雜的學習, ";
				mes "缺點是有著不能表現出人類";
				mes "情感的表情";
				next;
				break;
			case 2:
				mes "[愛麗希雅]";
				mes "假如 第1代 機械人形是從純粹";
				mes "機械工學裡所衍生出來的人形的話, ";
				mes "那麼 第2代 機械人形是指, ";
				mes "結合了賢者的捲軸製作, ";
				mes "和鍊金術師的";
				mes "生命體製造等的研究結果, ";
				mes "所完成的新的機械人形";
				next;
				mes "[愛麗希雅]";
				mes "和第1代一樣是用機械骨骼";
				mes "和人工心臟做為動力原, ";
				mes "使用生命體製作方法";
				mes "給它穿上人工身軀, ";
				next;
				mes "[愛麗希雅]";
				mes "用第1代所使用的'記憶捲軸', ";
				mes "擁有植入著10萬倍以上";
				mes "容量和效率性的";
				mes "'壓縮記憶捲軸', ";
				mes "讓它更能像人類一樣般的";
				mes "學習";
				next;
				mes "[愛麗希雅]";
				mes "可是很可惜的也許是";
				mes "壓縮記憶捲軸的錯誤, ";
				mes "使得人類型身軀和";
				mes "機械骨骼之間不協調的關係, ";
				mes "使得開發的第2代 機械人形, ";
				mes "在完成的第6年後出現了異常行動, ";
				mes "就讓它停止機能了";
				next;
				break;
			case 3:
				mes "[愛麗希雅]";
				mes "和第2代 機械人形不一樣的是, ";
				mes "第3代是 ^FF0000啟 海伊洛^000000先生 的兒子, ";
				mes "^0000FF齊爾^000000先生 所設計的款式";
				next;
				mes "[愛麗希雅]";
				mes "沒有使用機械骨骼的, ";
				mes "而是純粹的生命體的身軀, ";
				mes "類似使用改造過的";
				mes "伊美樂的心臟碎片";
				mes "做為人工心臟的動力原, ";
				mes "和人類一樣可做些生理活動";
				mes "而建造完成的";
				next;
				mes "[愛麗希雅]";
				mes "記憶捲軸是使用 第2代的, ";
				mes "'壓縮記憶捲軸'";
				mes "所改造而製成的";
				next;
				mes "[愛麗希雅]";
				mes "雖然比 第2代的捲軸效能較低, ";
				mes "但安定性非常優, ";
				mes "是把生產價格降低的";
				mes "新的量產型的";
				mes "'壓縮記憶捲軸'";
				next;
				mes "[愛麗希雅]";
				mes "你所見到的'^FF0000愛麗^000000'";
				mes "就是 第3代的機械人形的";
				mes "初版款式, ";
				mes "現在在工廠裡為了大量販賣, ";
				mes "量產型機械人形系列";
				mes "已完成初版製作的狀態了";
				next;
				mes "[愛麗希雅]";
				mes "目前在使用新引進的學習方法, ";
				mes "讓他們在學院裡";
				mes "經驗共同的生活, ";
				mes "正在進行最適合化的";
				mes "測試中";
				next;
				break;
			}
		case 2:
			mes "[愛麗希雅]";
			mes "若需要的話請跟我說一聲吧";
			break;
		}
	}
	else {
		mes "[愛麗希雅]";
		mes "......";
		mes ".........";
		mes "............";
	}
	close2;
	cutin "",255;
	end;
}

//----------------------------------------------------------------------------
// Abduction triggering NPC
//----------------------------------------------------------------------------
lighthalzen,188,200,0	script	Abduction_trigger	-1,3,1,{
//OnTouch2:
OnTouch:
	if (KielHyreQuest == 50) {
		mes "離開官邸想要回去的時候, 在頭上有一股震痛後就失去精神了";
		close2;
		percentheal -99,0;
		warp "kh_mansion",30,75;
	}
	end;
}

//----------------------------------------------------------------------------
// Mysterious Woman "Mitchell Layla"
//----------------------------------------------------------------------------
kh_mansion,25,79,4	script	可疑的女子#kh	4_F_JOB_HUNTER,3,3,{

//OnTouch2:
OnTouch:
	if (KielHyreQuest == 50) {
		mes "頭上感覺到一股震痛醒來後, 前面站著一位 可疑的女子";
		next;
		mes "[??????]";
		mes "你醒來了嗎,  沒想到你這麼快就醒來了,  可見你比我想像中還健康嘛, ";
		mes "我知道你現在很沒有精神,  不過請你提起精神聽好";
		next;
		mes "[??????]";
		mes "若不這樣子的話... 我不能保障你的安全啊,  我是屬於秀髮茲發德 情報部所屬的要員啊";
		next;
		mes "[??????]";
		mes "近來'雷根貝勒社'和 '啟 海伊洛 企業'間有些異常的動靜,  所以正在調查當中";
		next;
		mes "[??????]";
		mes "在監視官邸中看到你和 ^FF0000啟 海伊洛^000000有一段單獨對話,  因為我有幾項問題要詢問你,  所以就用了強硬的方法 把你帶到這裡來了";
		next;
		mes "[??????]";
		mes "嗯...對我用強硬的方法把你帶過來,  我深深的說一聲對不起,  不過....請問你和 ^FF0000啟 海伊洛^000000是什麼關係啊?";
		next;
		switch(select("把目前所發生的事情說給她聽:我也不太清楚啊")) {
		case 2:
			mes "[??????]";
			mes "你真的是不清楚嗎?";
			mes "能和^FF0000啟 海伊洛^000000單獨對話";
			mes "不是任何人都能辦得到的啊....";
			mes "我們不會讓你遭受傷害的";
			mes "請把你知道的事情說出來看看吧";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "......";
			mes ".........";
			mes "............";
			next;
			mes "[??????]";
			mes "這並不是你硬要閉著嘴";
			mes "就能解決的問題啊, ";
			mes "要有你的協助";
			mes "事情才會容易解開啊";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "....(看樣子話題有點偏離了...)";
			next;
			mes "[??????]";
			mes "呵呵....好吧..";
			mes "看樣子你還是不會輕易的開口呀, ";
			mes "那我們這邊";
			mes "先提供給你情報吧, ";
			mes "相對的你也把你所知道的情報";
			mes "提供給我們啊";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "唉?....什麼....那...";
			next;
			mes "[??????]";
			mes "啊啊... 不需要有任何負擔啊, ";
			mes "反正我們彼此共享情報";
			mes "不是嗎?";
			mes "那我們把所知道的情報";
			mes "就來告訴你吧";
			next;
			mes "[??????]";
			mes "^FF0000啟 海伊洛^000000以前是";
			mes "生產販賣各式各樣自動機械的";
			mes "'啟 海伊洛' 企業的會長啊";
			next;
			mes "[??????]";
			mes "剛開始是從艾音布羅克";
			mes "小小的店面開始做起, ";
			mes "自從他優秀的能力傳開來之後, ";
			mes "雷根貝勒方面就跟他接觸了, ";
			mes "以一種子公司的概念";
			mes "來跟他接觸";
			next;
			mes "[??????]";
			mes "其實對那部份有所疑問, ";
			mes "再怎麼說重要的開發者";
			mes "即使都已離開了, ";
			mes "對當時在雷根貝勒重要的事業";
			mes "修護監護人魔物等, ";
			mes "卻交給一位沒有名氣的";
			mes "'^FF0000啟 海伊洛^000000'來負責, ";
			mes "雖然我認為他們之間有某種關連, ";
			mes "不過至今尚未正式的證實";
			next;
			mes "[??????]";
			mes "在這時候突然間出現了他的繼承人, ";
			mes "叫做'^0000FF齊爾 海伊洛^000000', ";
			mes "沒有聽過他結婚的傳聞, ";
			mes "雖然我們有猜測過, ";
			mes "或許是跟他的秘書^0000FF愛麗希雅^000000之間";
			mes "所生的小孩也不一定啊..";
			mes "也許吧....";
			next;
			mes "[??????]";
			mes "反正這樣出現的 '^0000FF齊爾 海伊洛^000000'";
			mes "真的是呈現出完美的模樣呢, ";
			mes "外貌、個性、能力..";
			mes "不缺任何一樣啊";
			next;
			mes "[??????]";
			mes "不知道他是擁有著什麼樣的想法";
			mes "'^0000FF齊爾^000000'開始了他的某種事業, ";
			mes "也談不上說是什麼事業啊, ";
			mes "只是成立了福利館和專門學院而已";
			next;
			mes "[??????]";
			mes "以回饋社會的名目, ";
			mes "所以像政府或在其它有競爭關係的";
			mes "企業們, 企圖在學院讓要員們";
			mes "偽裝成學生潛入後做臥底, ";
			mes "可是都被拒絕了, ";
			mes "偽裝成孤兒的文件,  和優異的成績..";
			mes "全部都被拒絕了";
			next;
			mes "[??????]";
			mes "就像是....只接受一些";
			mes "已預定好的孩子們似的, ";
			mes "這樣過了一段時間之後, 在不久前, ";
			mes "那'^0000FF齊爾^000000'召集了雷根貝勒相關者, ";
			mes "和相關企業們的首長們";
			mes "開了一場極秘密的聚會";
			next;
			mes "[??????]";
			mes "可是詢問了幾個地方後, ";
			mes "大約搜集到了某些情報, ";
			mes "在那個聚會裡'^0000FF齊爾^000000'發表了";
			mes "新的計劃";
			next;
			mes "[??????]";
			mes "那就是機械人形, ";
			mes "是從監護人魔物進化而成, ";
			mes "會自行思考行動的那種機械人形, ";
			mes "不過很奇怪的是在那重要的聚會裡, ";
			mes "會長 '^FF0000啟 海伊洛^000000'卻";
			mes "完全看不到人影啊";
			next;
			mes "[??????]";
			mes "還有他的秘書 '^0000FF愛麗希雅^000000'也是一樣, ";
			mes "可是就在昨天, ";
			mes "這幾天看不到人影的 '^FF0000啟 海伊洛^000000'";
			mes "在官邸裡現身了, ";
			mes "好像一副若無其事";
			mes "的樣子";
			next;
			mes "[??????]";
			mes "可是很神奇的這一次是 '^0000FF齊爾^000000', ";
			mes "以研究為藉口在正式的場合上";
			mes "消失蹤影了";
			next;
			mes "[??????]";
			mes "再怎麼看這很不自然吧?";
			mes "好像父子之間有種某種程度的";
			mes "暗中角力, ";
			mes "或許有某種陰謀";
			mes "也不一定啊";
			next;
			mes "[??????]";
			mes "因為他們的背後有";
			mes "雷根貝勒的關係呀";
			next;
			mes "[??????]";
			mes "來 我把我方已知的情報";
			mes "告訴你了, 現在換你說了吧?";
			mes "你不需要感到負擔, ";
			mes "請你放輕鬆的說吧";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "啊...嗯.. 我的意思是...";
			mes "........";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "我被她的說話法所吸引, ";
			mes "不知不覺中打開話匣子了";
			mes "..........";
			mes "...... ";
			next;
		case 1:
			mes "你把目前所發生的事情 說給她聽了";
			mes "講到^FF0000愛麗^000000的故事時候 突然覺得自己的聲音變小了";
			mes "......... .....";
			next;
			mes "[??????]";
			mes "嗯..... 原來是這樣啊.. 有關那位女的事情 ......";
			next;
			mes "[??????]";
			mes "反正以後請你多多幫助 我們就好了";
			next;
			switch(select("幫助他們:........")) {
			case 2:
				mes "[??????]";
				mes "我就知道會這樣啊, ";
				mes "嗯嗯....所謂沉默就是承認..";
				mes "呼呼..";
				next;
				mes "["+strcharinfo(0)+"]";
				mes "唉?";
				mes "不是我的..意思是...";
				next;
				mes "[??????]";
				mes "啊啊...請你不要太擔心, ";
				mes "你個人的安全";
				mes "我們會負責到底的, ";
				mes "你只要配合我們協助";
				mes "做調查就可以了";
				next;
				select("..好吧那就那樣子吧");
			case 1:
				mes "[??????]";
				mes "我就知道會這樣啊, ";
				mes "呼呼...";
				mes "我...我還沒有做自我介紹啊, ";
				mes "我是屬於";
				mes "秀髮茲發德 情報部所屬的";
				mes "'^0000FF米契爾 拉音拉^000000'";
				mes "以後請你多多指教";
				set KielHyreQuest,52;
				close;
			}
		}
	}
	else if (KielHyreQuest == 52) {
		mes "[米契爾]";
		mes "好吧, 那我就給你幾樣線索吧, ";
		mes "你去朱諾的話, 約30年前";
		mes "有位女士見過^FF0000啟 海伊洛^000000的秘書";
		mes "^0000FF愛麗希雅^000000";
		next;
		mes "[米契爾]";
		mes "但是依據那位女士的說法, ";
		mes "^0000FF愛麗希雅^000000在30年前就自殺了, ";
		mes "現在^FF0000啟 海伊洛^000000的秘書";
		mes "^0000FF愛麗希雅^000000和 30年前的那女孩";
		mes "竟然長的一模一樣啊";
		next;
		mes "[米契爾]";
		mes "竟然長的一模一樣啊";
		mes "莫非 ^0000FF愛麗希雅^000000的模型";
		mes "是不是就是她呢";
		mes "...讓我啟人疑竇, ";
		mes "所以請你到朱諾後";
		mes "對那位女士進行調查吧";
		next;
		mes "[米契爾]";
		mes "等你把情報都搜集好了跟管家對話的話, 他會把你帶領到這邊來的";
		next;
		mes "[米契爾]";
		mes "等你都準備好了的話, 我會用專用的飛空艇送你到朱諾";
		set KielHyreQuest,54;
		close;
	}
	else if (KielHyreQuest == 54) {
		mes "[米契爾]";
		mes "怎麼樣啊? 準備好了嗎?";
		next;
		switch(select("是的:還沒有")) {
		case 1:
			mes "[米契爾]";
			mes "那麼就拜託你啦~?";
			close2;
			warp "yuno",54,209;
			end;
		case 2:
			mes "[米契爾]";
			mes "那麼等你準備好的話再來跟我說吧";
			close;
		}
	}
	else if (KielHyreQuest == 64) {
		mes "[米契爾]";
		mes "啊啊, 你回來了啊, ";
		mes "有帶來什麼好玩的情報嗎?";
		mes "你以在朱諾所搜集到的情報為基礎, ";
		mes "對她做全盤性的說明了";
		next;
		mes "[米契爾]";
		mes "果然....";
		mes "委託給你是 對的, ";
		mes "以那些故事為基礎, ";
		mes "對^FF0000啟 海伊洛^000000的過去談論的話, ";
		mes "也許能挖出一些";
		mes "關於^0000FF齊爾^000000的真面目和 雷根貝勒社之間的關係吧";
		next;
		mes "[米契爾]";
		mes "來 請把這個竊聽器戴好吧, ";
		mes "若有發生危險的情況時, ";
		mes "我們的要員會直接過去幫你的";
		set KielHyreQuest,68;
		next;
		warp "kh_mansion",83,50;
		end;
	}
	else if (KielHyreQuest >= 68) {
		mes "[米契爾]";
		mes "你怎麼還沒有離開啊?";
		next;
		warp "kh_mansion",83,50;
		end;
	}
}

//----------------------------------------------------------------------------
// Warp portal into Kiehl's 'Room'
// - Anyone can enter
// - After 30-40 seonds this NPC should be disabled.
//----------------------------------------------------------------------------
kh_mansion,29,27,0	script	Kiehl_Room_Warp	WARPNPC,2,2,{
OnTouch:
	warp "kh_kiehl01",10,31;
	end;

OnEnable:
	initnpctimer;
	specialeffect EF_SUMMONSLAVE;
	end;

OnTimer30000:
	stopnpctimer;
	specialeffect EF_SUMMONSLAVE;
	disablenpc "Kiehl_Room_Warp";
	end;

OnInit:
	disablenpc "Kiehl_Room_Warp";
	end;
}

//============================================================================

//============================================================================
// Rosimier NPCs and other Related NPCs
//============================================================================

//----------------------------------------------------------------------------
// Odd Grandma
//----------------------------------------------------------------------------
yuno,257,140,4	script	看似可疑的 奶奶	4_F_EINOLD,{
	if (KielHyreQuest < 54) {
		mes "[奶奶]";
		mes "我們家小孩到哪裡去了呢?";
		mes "孩子呀~ 孩子呀~";
		close;
	}
	else if (KielHyreQuest == 54) {
		mes "[奶奶]";
		mes "小孩 小孩 我們 小孩";
		mes "不要 哭啊 不要 哭啊";
		mes "你哭 的話 所有 天空";
		mes "月亮 星星 會悲 哀啊";
		mes "睡吧 睡吧 我們 小孩";
		mes "不要 哭啊 不要 哭啊";
		next;
		mes "[奶奶]";
		mes "小孩 小孩 我們 小孩";
		mes "不要 哭啊 不要 哭啊";
		mes "你哭 的話 深水裡 的魚";
		mes "也都 不能 睡著啊";
		mes "睡吧 睡吧 我們 小孩";
		mes "不要 哭啊 不要 哭啊";
		next;
		switch(select("請問你在做什麼呢?:看樣子小孩很愛哭啊?")) {
		case 1:
			mes "[奶奶]";
			mes "嗯嗯? 嗯嗯...";
			mes "我們家小孩一直哭不肯睡覺...";
			mes "要哄她睡覺她卻要遠離媽媽";
			mes "一直玩個不停..";
			mes "也要等到小孩睡了, ";
			mes "我也才能做點家事啊..";
			next;
			mes "[奶奶]";
			mes "因為小孩不睡我也沒能做家事";
			mes "所以家裡有點亂..";
			mes "唉喲.. 害的我還要 被主人罵..";
			set KielHyreQuest,56;
			next;
			select("請問小孩在哪裡呢?");
			mes "[奶奶]";
			mes "嗯嗯? 啊..小孩跑到哪裡去了呢?";
			mes "剛才還在這裡啊...";
			mes "小孩子覺得太無聊出去玩耍了吧..";
			mes "啊! 你原來在這啊";
			next;
			mes "[奶奶]";
			mes "我說過不可以捉弄旅行者嗎?";
			mes "快點過來啊!";
			mes "唉喲.. 很抱歉啊, ";
			mes "小孩子太調皮啦...";
			//GetHEALTHSTATE VAR_CURSE 30
			close;
		case 2:
			mes "[奶奶]";
			mes "嗯? 嗯嗯...";
			mes "小孩子每天說好冷所以才會哭, ";
			mes "若覺得冷的話就回到媽媽的懷抱裡吧";
			next;
			mes "[奶奶]";
			mes "你為什麼那麼的喜歡水呢...";
			mes "睡吧~ 睡吧~ 我們 ^0000FF愛麗希雅^000000, ";
			mes "不要再任性了, 快來這裡睡吧";
			next;
			mes "[奶奶]";
			mes "因為你這樣不睡覺媽媽也不能做家事啊..";
			close;
		}
	}
	else if ((KielHyreQuest >= 56) && (KielHyreQuest < 60)) {
		mes "[奶奶]";
		mes "我們家小孩到哪裡去了呢?";
		mes "孩子呀~ 孩子呀~";
		if (countitem(7500) < 1) { 
			close;
		}
		else {
			next;
			switch(select("愛麗希雅? 難道是...")) {
			case 1:
				cutin "kh_ellisia_port",1;
				mes "把愛麗希雅的肖像畫拿給奶奶看了";
				next;
				cutin "",255;
				mes "[奶奶]";
				mes "嗯嗯?";
				mes "唉..愛麗! ^0000FF愛麗希雅^000000!!";
				mes "你....你認識我們家愛麗啊?!";
				mes "我們家小孩在哪裡呢?!?!";
				next;
				mes "[奶奶]";
				mes "我們家小孩... 我們家愛麗";
				mes "昨天離開家之後再也沒有回來了!!";
				mes "若你知道我們家小孩在哪裡的話";
				mes "請務必告訴我?!?!";
				next;
				mes "[" + strcharinfo(0) + "]";
				mes "...奶奶手拿著肖像畫";
				mes "很長一段時間忐忑不安後, ";
				mes "開始對自己自言自語了";
				close;
			}
		}
	}
	else if (KielHyreQuest >= 60) {
		mes "[奶奶]";
		mes "我們家 ^0000FF愛麗希雅^000000 該睡了吧?";
		mes "嗯嗯? 什麼肚子餓呀?";
		mes "那就吃飯吧..";
		mes "睡吧 睡吧~";
		close;
	}
}

//----------------------------------------------------------------------------
// Old Lady; gives you the key to the Rosimier Mansion
//----------------------------------------------------------------------------
yuno,250,132,0	script	阿姨#kh	4_F_05,{
	if (KielHyreQuest < 56) {
		mes "[阿姨]";
		mes "唉喲 好累啊...";
		mes "可能是上了年紀吧";
		mes "全身不對筋啊..唉喲喲..";
		close;
	}
	else if (KielHyreQuest == 56) {
		if (checkweight(7498,1) == 0) {
			mes "請在這裡暫停一下 !!";
			mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
			close;
		}
		mes "[阿姨]";
		mes "唉喲, 最近天氣是怎麼搞的啊...";
		next;
		switch(select("......:詢問有關那位奶奶的事情..")) {
		case 1:
			mes "[阿姨]";
			mes "我也是上了年紀呀...唉喲喲..";
			close;
		case 2:
			mes "[阿姨]";
			mes "嗯? 啊.. 那位奶奶呀? 那位奶奶我是很熟啦, 她是我好友的母親啊, 叫做'^0000FF愛麗希雅^000000'啊...";
			mes "不過卻紅顏薄命.. 唉咻.. 她曾是一位很漂亮又善良的朋友...";
			next;
			mes "[阿姨]";
			mes "自從那事件之後 那位奶奶受不了那場打擊, 就變成那個樣子了, 唉咻...";
			next;
			select("^3355FF愛麗希雅^000000小姐呢...?");
			mes "[阿姨]";
			mes "^0000FF愛麗希雅^000000還....真的很漂亮呢.. 身為同樣的女人看了 也會被她迷住呀";
			next;
			mes "[阿姨]";
			mes "所以在她的周圍附近 對她眼紅的男士很多, 尤其是那羅希米愛樂家的兒子 詹姆斯最為嚴重, 據傳聞他有向她 求婚啊...";
			next;
			mes "[阿姨]";
			mes "不過沒多久因為^0000FF愛麗希雅^000000過世的關係, 全部都落空了, 好可惜啊...嗯...";
			next;
			select("羅希米愛樂家??");
			mes "[阿姨]";
			mes  "啊啊.. 羅希米愛樂家在朱諾算是 歷史很悠久的家族, 好像是在..... ^0000FF愛麗希雅^000000過世之後, ";
			mes "可能是大兒子在事業上失敗, 讓家世在一夕之間 就垮了....";
			next;
			mes "[阿姨]";
			mes "於是後來就由 市府管理這間官邸, 鑰匙卻交給我保管...";
			next;
			select("請問我能進入官邸嗎?");
			mes "[阿姨]";
			mes "嗯....";
			mes "老實說是不可以的..";
			mes "但感覺你跟 ^0000FF愛麗希雅^000000很熟, 我就相信你把鑰匙交給你, ";
			mes "你必須在市府派人來以前, 把鑰匙還給我呀";
			getitem 7498,1; //Rosimier_Key
			set KielHyreQuest,58;
			close;
		}
	}

	else if ((KielHyreQuest == 58) &&
		(countitem(7499) < 1) || 
		(countitem(7500) < 1) || 
		(countitem(7501) < 1) || 
		(countitem(7502) < 1)) {
		mes "[阿姨]";
		mes "聽說市府要派人來呀, 請你快一點好嗎";
		close;
	}

	else if ((KielHyreQuest == 58) &&
		(countitem(7499) == 1) && 
		(countitem(7500) == 1) && 
		(countitem(7501) == 1) && 
		(countitem(7502) == 1)) {
		mes "[阿姨]";
		mes "請問事情做的還順利嗎?老實說這房子裡";
		mes "沒有什麼值錢的東西啊, 老早就被那些債主們都搬走了";
		next;
		select("請問^0000FF愛麗希雅^000000為什麼....?");
		mes "[阿姨]";
		mes "啊啊...";
		mes "上次提過的羅希米愛樂家的 長子, ";
		mes "我不是說詹姆斯答應^0000F愛麗希雅^000000";
		mes "要結婚的嗎?";
		next;
		mes "[阿姨]";
		mes "但事實上詹姆斯家裡";
		mes "已有內定的未婚妻了, ";
		mes "所以時間拖久了之後, ";
		mes "他就跟未婚妻結婚了";
		next;
		mes "[阿姨]";
		mes "所以為此事傷心的";
		mes "^0000F愛麗希雅^000000, 不幸的就自殺了..";
		next;
		mes "[阿姨]";
		mes "想要知道細節的話, 請你去找";
		mes "'啟 海伊洛' 學院南邊的漁夫吧, ";
		mes "去那裡會有在江邊把^0000FF愛麗希雅^000000的";
		mes "屍體撈起來的漁夫, 請你去問他吧";
		delitem 7498,1; //Rosimier_Key 
		set KielHyreQuest,60;
		close;
	}
	else if (KielHyreQuest >= 60) {
		mes "[阿姨]";
		mes "要下雨了嗎....";
		mes "全身又酸痛啊..";
		close;
	}
}


//----------------------------------------------------------------------------
// Warp portal into Rosimier Mansion
//----------------------------------------------------------------------------
yuno,273,141,0	script	Rosimmir_Entrance	WARPNPC,2,2,{
OnTouch:
	if (countitem(7498) < 1) {
		end;
	}
	else {
		warp "kh_rossi",20,92;
	}
	end;
}

//----------------------------------------------------------------------------
// Rosimier Mansion, first floor; Table
//----------------------------------------------------------------------------
kh_rossi,23,23,0	script	桌子#khr2	HIDDEN_NPC,{
	if (checkweight(7499,1) == 0) {
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}
	if (KielHyreQuest < 58) {
		mes "是一個空空的抽屜";
		close;
	}
	else if (KielHyreQuest < 60) {
		if (countitem(7499) < 1) {
			cutin "kh_family_port",1;
			mes "查看書桌後發現書桌的抽屜是可以打開的, 在抽屜裡發現了一個相框";
			getitem 7499,1; //Family_Portrait
		}
		else {
			mes "是一個空空的抽屜";
		}
	}
	else{
		mes "只是獲得家族肖像畫的空抽屜而已, 看不到什麼其它的物品";
		close;
	}
	close2;
	cutin "",255;
	end;
}

//----------------------------------------------------------------------------
// Rosimier Mansion, first floor; Shelf
//----------------------------------------------------------------------------
kh_rossi,92,40,0	script	書櫃#khr	HIDDEN_NPC,{
	if (checkweight(7500,1) == 0) {
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}
	if (KielHyreQuest < 58) {
		mes "看不到什麼其它的物品";
		close;
	}
	else if (KielHyreQuest < 60) {
		if (countitem(7500) < 1) {
			mes "有一個被鎖住的抽屜";
			next;
			switch(select("使用鑰匙:不管它")) {
			case 1:
				switch(select("鑰匙 1:鑰匙 2")) {
				case 1:
					mes "使用鑰匙後 響起'喳喀!'的一聲";
					mes "抽屜被開啟了, ";
					mes "抽屜裡面有一位";
					mes "女人的肖像畫, ";
					next;
					cutin "kh_ellisia_port",2;
					mes "女人的長相跟 ^0000FF愛麗希雅^000000一模一樣, ";
					mes "相框後面寫著 '摯愛的 ^0000FF愛麗希雅^000000..";
					mes "詹姆斯' 留";
					getitem 7500,1; //Elysia_Portrait
					close2;
					cutin "",255;
					end;
				case 2:
					close;
				}
			case 2:
				mes "看不到什麼其它的物品";
				close;
			}
		}
		else {
			mes "這裡是發現女人肖像畫的地方";
			close;
		}
	}
	else {
		mes "這裡是發現女人肖像畫的地方看不到什麼其它的物品";
		close;
	}
}


//----------------------------------------------------------------------------
// Rosimier Mansion, top floor; Desk
//----------------------------------------------------------------------------
kh_rossi,144,286,0	script	書桌#khr3	HIDDEN_NPC,{
	if (checkweight(7501,1) == 0) {
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}
	if (KielHyreQuest < 58) {
		mes "有著3個抽屜的書桌";
		close;
	}
	else if (KielHyreQuest < 60) {
		mes "有著3個抽屜的書桌";
		next;
		switch(select("第一個抽屜:第二個抽屜:第三個抽屜:不理它")) {
		case 1:
			mes "好像被什麼給卡住了打不開";
			close;
		case 2:
			if (countitem(7501) < 1) {
				mes "打開抽屜後看到了信件";
				next;
				mes "寫著 'K.H' 縮寫的人 好像要寫給^0000FF愛麗希雅^000000的信";
				getitem 7501,1; //Kyll_Hyre_Letter2
				close;
			}
			else {
				mes "看到了一個空的抽屜";
				close;
			}
		case 3:
			mes "打開抽屜後看到了一張紙條";
			next;
			mes "信件的內容是 詹姆斯向";
			mes "^0000FF愛麗希雅^000000求婚的內容, ";
			mes "好像^0000FF愛麗希雅^000000從 詹姆斯那裡";
			mes "得到訂婚戒指似的";
			close;
		case 4:
			mes "......";
			mes ".........";
			mes "............";
			close;
		}
	}
	else{
		mes "有一個開不啟的抽屜 和空抽屜的書桌";
		close;
	}
}

//----------------------------------------------------------------------------
// Rosimier Mansion, top floor; Bookshelf
//----------------------------------------------------------------------------
kh_rossi,148,288,0	script	書櫥#khr	HIDDEN_NPC,{
	if (checkweight(7502,1) == 0) {
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}
	if (KielHyreQuest < 58) {
		mes "有著累積了許多灰塵的書";
		close;
	}
	else if (KielHyreQuest < 60) {
		if (countitem(7502) < 1) {
			mes "觀察書櫃的途中, 發現了夾在書本裡面的紙條";
			getitem 7502,1; //Piece_Memo_Of_James
			close;
		}
		else {
			mes "有著累積了許多灰塵的書";
			close;
		}
	}
	else{
		mes ".......有著累積了些灰塵的書";
		close;
	}
}

//----------------------------------------------------------------------------
// Rosimier Mansion, top floor; Bed
//----------------------------------------------------------------------------
kh_rossi,154,286,0	script	床鋪#khr	HIDDEN_NPC,{
	if (KielHyreQuest < 58) {
		mes "有一張已整理頓好的床鋪, 可是上面已累積了一點灰塵, 所以感覺不到人的氣息";
		close;
	}
	else if (KielHyreQuest < 60) {
		mes "有一張已整理頓好的床鋪, 可是上面已累積了一點灰塵, 所以感覺不到人的氣息";
		next;
		switch(select("查看床鋪上方:查看床鋪下方")) {
		case 1:
			mes "查看床鋪上方時起了一點灰塵";
			mes "........";
			next;
			mes "沒有任何成果只覺得喉嚨有點不舒服";
			percentheal -10,0;
			close;
		case 2:
			mes "查看床鋪下方時, ";
			mes "看到某一個角落有著開啟的戒指盒子, ";
			mes "不過卻看不到戒指";
			close;
		}
	}
	else {
		mes "有一張零亂的床鋪";
		close;
	}
}

//----------------------------------------------------------------------------
// Fisherman
//----------------------------------------------------------------------------
yuno_fild12,232,222,0	script	老漁夫	4_M_SEAMAN,{
	if (KielHyreQuest < 60) {
		mes "[漁夫]";
		mes "最近都釣不到魚";
		mes "真是糟糕啊自從這裡進駐工廠之後, ";
		mes "這裡的魚就變得有點奇怪了, 很難釣到魚...";
		mes "唉喲....";
		close;
	}
	else if (KielHyreQuest == 60) {
		mes "[漁夫]";
		mes "嗯? 你是誰啊? 對我有什麼話要說嗎? 有什麼事情要委託我的話 請先給謝禮啊 謝禮...";
		next;
		mes "[漁夫]";
		mes "唉咻....最近這些年輕人們....唉咿.. 想想看離上一次吃到新鮮的生魚片 也過了一段滿長的時間啊...";
		if (countitem(544) >= 10)  {
			next;
			mes "[漁夫]";
			mes "嗯? 你說把這個給我呀? 唉喲 不需要這樣吧..... 呵呵...謝謝你, 有什麼問題的話就直接問我吧";
			next;
			select("30年前在這裡...");
			mes "[漁夫]";
			mes "嗯? 讓我想一想...30年前啊... 啊啊...我想起來了, 也就是... 正確的日子是 30年前的 8月 20日.....";
			mes "那天是我老婆的生日啊, 所以我記得很清楚啊";
			next;
			mes "[漁夫]";
			mes "那天我想送她一件禮物... 所以一大早就出來灑網了, 不過網子沒有過多久 感覺到網子裡很重, 我還以為抓到 '鱒魚了!'";
			mes "用力的拉上來之後 卻發現是一位女的屍體";
			next;
			mes "[漁夫]";
			mes "我嚇的直接就通報朱諾的警備隊了, 後來得知那位女孩 喜歡上自己的主人, 然後又被他背叛了所以就自殺了 唉喲...真是一個壞傢伙啊";
			next;
			mes "[漁夫]";
			mes "所以當警備隊人員 把那女的屍體抬走時, 從握緊的那女孩的手裡中 掉落了一個閃爍的東西";
			next;
			mes "[漁夫]";
			mes "可是警備隊人員 都沒有發現就直接路過了, 我等到警備隊人員都不見了之後 小心的回去尋找了";
			next;
			mes "[漁夫]";
			mes "可是這是怎麼回事啊, 看起來非常貴重的戒指 就掉在那裡啊?";
			next;
			mes "[漁夫]";
			mes "怎麼會有這麼好康的事情.. 其實心理面有想到 這是屍體的遺物啊心理會有點毛毛的, 後來想一想死人是已經死亡了, ";
			mes "活著的人還是要繼續的活下去啊?";
			next;
			mes "[漁夫]";
			mes "我還想著把這個東西賣掉之後 準備買個東西做為我老婆的生日禮物呢, 結果卻發現某一位男子 很努力的往這邊跑過來, ";
			mes "所以我就若無其事的..在這邊等他了";
			next;
			mes "[漁夫]";
			mes "等到那男子跑到我面前後 喘了一陣子氣後, 就問我 你是不是撈起 那女子屍體的人呢, 所以我就回答是啊";
			next;
			mes "[漁夫]";
			mes "他又問起我 有沒有撿到戒指之類的東西, 所以我就想到狀況是不是有點不太對勁啊, 就假裝什麼事情都不知道, ";
			mes "就回答他我什麼東西都沒有撿到啊";
			next;
			mes "[漁夫]";
			mes "突然間那男子對我說 他真的非常需要那個戒指還哭哭哀求我呢, 並且還說他願意 以高價買回戒指呢";
			next;
			mes "[漁夫]";
			mes "所以說 並不是..嗯嗯 為了高價錢的價格, 只是覺得那男人看起來哀求很可憐... 所以就把那戒指 賣給了那位男的";
			next;
			mes "戒指看起來並不是很貴, 卻沒想到他給我了一堆錢之後就離開了, ";
			mes "最後在我打聽的消息之後 他是在村落裡修理一些壞掉的機械 來維繫生命的人啊, 之後那個人就消失不見了...";
			next;
			mes "[漁夫]";
			mes "之後就忘卻在 我的記憶裡了";
			next;
			select("請問你還記得那男人的名字嗎?");
			mes "[漁夫]";
			mes "讓我想一想.... 好像叫做... '海洛?' '海音?' 大概是這類的名字...";
			next;
			mes "[漁夫]";
			mes "事隔已久的事情了, 所以也沒有再理會這件事情啊.... 不過他生活的地方我還記得呢...";
			mes "'^FF0000在東北方 森林 警備隊 露營地附近的涼亭^000000' 的樣子..";
			delitem 544,10; //Fish_Slice
			set KielHyreQuest,62;
			close;
		}
		else {
			close;
		}
	}
	else if (KielHyreQuest >= 62) {
		mes "[漁夫]";
		mes "什麼你說記不起來在什麼地方?";
		mes "天啊... 年輕人記憶力怎麼";
		mes "這麼差勁啊..";
		mes "我再講一遍請你聽好並記住";
		next;
		mes "[漁夫]";
		mes "剛才我明明有講";
		mes "'^FF0000在東北方 森林 警備隊";
		mes "露營地附近的涼亭^000000'啊, ";
		mes "我是這麼說的...嗯...";
		mes "還有什麼事要問我的嗎?";
		mes "有關那件事";
		mes "我再也沒有可回想的囉..";
		close;
	}
}

//----------------------------------------------------------------------------
// Kiel Hyre's hut; Wooden Board
//----------------------------------------------------------------------------
yuno_fild09,158,217,0	script	木板#kh	HIDDEN_NPC,{
	if (checkweight(7503,1) == 0) {
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}
	if ((KielHyreQuest < 62) || (KielHyreQuest >= 64)) {
		mes "看起來沒什麼有用的木板掉落在草叢裡";
		close;
	}
	else if (KielHyreQuest == 62) {
		mes "掉落著長型的木板, 木板上纖細的寫著 K.H 的字樣";
		next;
		mes "為了觀察木板試著移動, 那下面有";
		mes "碎掉的相框, 相框裡畫著不知在哪裡見過面的";
		mes "年輕人的肖像畫, ";
		next;
		cutin "kh_kyel_port",2;
		mes "......感覺上跟";
		mes "^FF0000啟 海伊洛^000000先生";
		mes "滿像的";
		getitem 7503,1;	//Man_Portrait
		set KielHyreQuest,64;
		next;
		cutin "",255;
		mes "看樣子已累積了不少的情報";
		mes "回到 '米契爾'身邊吧";
		close;
	}
}

//============================================================================
// Kiehl Hyre's Room and Boss NPCs
//============================================================================
// Beyond here the NPC for the final areas.
// Now, this area is not someplace you wanna slow down so
// you can pick up dialog. I used packet logging to pull
// what I could and for the sake of the two people with me,
// did not bother doing all the proper NPC positioning
// or some of the 'error/wrong option' dialogs.
// All the doors are kind of weird.
//============================================================================

//----------------------------------------------------------------------------
// 基爾的房間; Receiver (Gives black keycards upon killing mobs)
//----------------------------------------------------------------------------
kh_kiehl01,17,39,0	script	收訊機#kh	HIDDEN_NPC,{
	if (mobcount("kh_kiehl01","Receiver#kh::OnMyMobDead") < 1) {
		mes "吱茲...吱吱茲...吱....";
		if (KielHyreQuest == 74) {
			next;
			mes "從收訊機裡傳來帶有";
			mes "雜音和某個人的聲音";
			next;
			mes "[????]";
			mes "沒見過的面孔啊...";
			mes "是父親派來的刺客嗎...";
			mes "呼呼, 那麼...";
			mes "做為你能順利到達這裡來的獎賞, ";
			mes "也許我會給你我的捲軸也不一定啊, ";
			mes "來 請順利來找我吧";
			set KielHyreQuest,76;
		}
		close2;
		monster "kh_kiehl01",16,32,"愛麗瑟",1739,1,"收訊機#kh::OnMyMobDead";
		monster "kh_kiehl01",18,31,"愛麗俄",1740,1,"收訊機#kh::OnMyMobDead";
		end;
	}

	else {
		end;
	}

OnMyMobDead:
	if (mobcount("kh_kiehl01","收訊機#kh::OnMyMobDead") <1) { 
		makeitem 7506,1,"this",19,36;
	}
	end;
}

//----------------------------------------------------------------------------
// 基爾的房間; Flower Vase (Gives...password...for Box)
//----------------------------------------------------------------------------
kh_kiehl01,13,40,0	script	花瓶#kh1	HIDDEN_NPC,{
	if (KielHyreQuest < 74) {
		mes "有放著花瓶";
		close;
	}
	if (KielHyreQuest >= 74) {
		mes "有放著花瓶";
		next;
		switch(select("抬起花瓶:打破花瓶:把花瓶倒過來")) {
		case 1:
			mes "沒有任何東西";
			close;
		case 2:
			mes "打不破, ";
			mes "......是雷根貝勒的特製品嗎?";
			close;
		case 3:
			mes "花瓶底部有寫著 特別的文字";
			mes "'^FF0000The rabbit often observes the door.'";
			mes "'The night eats the pickled orange.^000000'";
			close;
		}
	}
	else{
		mes "花瓶底部有寫著 特別的文字";
		mes "'^FF0000The rabbit often observes the door.'";
		mes "'The night eats the pickled orange.^000000'";
		close;
	}
}


//----------------------------------------------------------------------------
// 基爾的房間; Box
//----------------------------------------------------------------------------
kh_kiehl01,19,25,0	script	箱子#kh1	HIDDEN_NPC,{
	if (checkweight(7505,1) == 0) {
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}
	if (KielHyreQuest < 74) {
		mes "有一個關閉的箱子, 箱子上有寫著奇怪的文字做為鑰匙的排列";
		next;
		input .@KHInput$;
		mes "'嗶~' 你所輸入的暗號錯誤";
		close;
	}
	if (KielHyreQuest >= 74) {
		if (countitem(7505) < 1) {
			mes "有一個關閉的箱子, 箱子上有寫著奇怪的文字 做為鑰匙的排列";
			next;
			input .@KHInput$;
			if (.@KHInput$ == "open the door") {
				mes "打開箱子時 '喳喀'一聲 從門那裡傳來了, 箱子裡面有著 ^FF0000小鑰匙^000000";
				getitem 7505,1; //Toy_Key
				close;
			}
			else {
				mes "嗶~' 你所輸入的暗號錯誤";
				close;
			}
		}
		else {
			mes "打開的箱子裡面沒有任何東西";
			close;
		}
	}
	else{
		mes "打開的箱子裡面沒有任何東西";
		close;
	}
}

//----------------------------------------------------------------------------
// 基爾的房間; Big Door, (First)
// - Anyone can pass through this door
// - Consume one Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,44,33,0	script	巨大的門#BigDoorKHQ1	HIDDEN_NPC,{
	if (.KHDoor1Opened == 0) {
		mes "門是關閉的, 在把手那邊看到纖細的小縫";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "黑色鑰匙卡") {
			if (countitem(7506) >= 1) {
				mes "把^0000FF黑色鑰匙卡^000000放在裡面旋轉時 '喳喀'一聲 門開啟了";
				delitem 7506,1; //Black_Key_Card
				donpcevent "Big_Door_1_Warp::OnEnable";
				enablenpc "Big_Door_1_Warp";
				set .KHDoor1Opened,1;
				close;
			}

		}
		mes "打不開";
		close;
	}

	else {
		mes "門已經開啟著";
		close;
	}
}

kh_kiehl01,43,33,0	script	Big_Door_1_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnInit:
	disablenpc "Big_Door_1_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_1_Warp";
	set getvariableofnpc(.KHDoor1Opened,"巨大的門#BigDoorKHQ1"),0;
	end;

OnTouch:
	warp "kh_kiehl01",55,33;
	end;
}

//----------------------------------------------------------------------------
// 基爾的房間; Big Door, (second)
// - Consume Toy Key when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,174,40,0	script	巨大的門#BigDoorKHQ2	HIDDEN_NPC,{
	if (.KHDoor2Opened == 0) {
		mes "門是關閉的";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "玩具鑰匙") {
			if (countitem(7505) >= 1) {
				mes "把^FF0000鑰匙^000000放在裡面旋轉時 '喳喀'一聲 門開啟了";
				delitem 7505,1; //Toy_Key
				donpcevent "Big_Door_2_Warp::OnEnable";
				enablenpc "Big_Door_2_Warp";
				set .KHDoor2Opened,1;
				close;
			}

		}
		mes "打不開";
		close;
	}
	else {
		mes "門已經開啟著";
		close;
	}
}

kh_kiehl01,174,39,0	script	Big_Door_2_Warp	WARPNPC,1,1,{
OnEnable:
	initnpctimer;
	specialeffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Big_Door_2_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	specialeffect EF_SUMMONSLAVE;
	disablenpc "Big_Door_2_Warp";
	set getvariableofnpc(.KHDoor2Opened,"巨大的門#BigDoorKHQ2"),0;
	end;

OnTouch:
	warp "kh_kiehl01",173,52;
	end;
}

//----------------------------------------------------------------------------
// 基爾的房間; Big Door, (Third)
// - Consume one Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,77,108,0	script	巨大的門#BigDoorKHQ3	HIDDEN_NPC,{
	if (.KHDoor3Opened == 0) {
		mes "^3355FFThe door is locked,";
		mes "but there is a narrow";
		mes "slot next to the doorknob.^000000";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "黑色鑰匙卡") {
			if (countitem(7506) >= 1) {
				mes "把^0000FF黑色鑰匙卡^000000放在裡面旋轉時 '喳喀'一聲 門開啟了";
				delitem 7506,1; //Black_Key_Card
				donpcevent "Big_Door_3_Warp::OnEnable";
				enablenpc "Big_Door_3_Warp";
				set .KHDoor3Opened,1;
				close;
			}

		}
		mes "打不開";
		close;
	}
	else {
		mes "門已經開啟著";
		close;
	}
}

kh_kiehl01,78,108,0	script	Big_Door_3_Warp	WARPNPC,1,1,{
OnEnable:
	initnpctimer;
	specialeffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Big_Door_3_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	specialeffect EF_SUMMONSLAVE;
	disablenpc "Big_Door_3_Warp";
	set getvariableofnpc(.KHDoor3Opened,"巨大的門#BigDoorKHQ3"),0;
	end;

OnTouch:
	warp "kh_kiehl01",68,108;
	end;
}

//----------------------------------------------------------------------------
// 基爾的房間; Big Door, (Fourth)
// - Consume TWO Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,42,177,0	script	巨大的門#BigDoorKHQ4	HIDDEN_NPC,{
	if (.KHDoor4Opened == 0) {
		mes "^3355FFThe door is locked,";
		mes "but there is a narrow";
		mes "slot next to the doorknob.^000000";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "黑色鑰匙卡") {
			if (countitem(7506) >= 2) {
				mes "把^0000FF黑色鑰匙卡^000000放在裡面旋轉時 '喳喀'一聲 門開啟了";
				delitem 7506,2; //Black_Key_Card
				donpcevent "Big_Door_4_Warp::OnEnable";
				enablenpc "Big_Door_4_Warp";
				set .KHDoor4Opened,1;
				close;
			}
		}
		mes "打不開";
		close;
	}

	else {
		mes "門已經開啟著";
		close;
	}
}

kh_kiehl01,41,177,0	script	Big_Door_4_Warp	WARPNPC,1,1,{
OnEnable:
	initnpctimer;
	specialeffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Big_Door_4_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	specialeffect EF_SUMMONSLAVE;
	disablenpc "Big_Door_4_Warp";
	set getvariableofnpc(.KHDoor4Opened,"巨大的門#BigDoorKHQ4"),0;
	end;

OnTouch:
	warp "kh_kiehl01",49,177;
	end;
}

//----------------------------------------------------------------------------
// 基爾的房間; Robots
//----------------------------------------------------------------------------
kh_kiehl01,15,179,0	script	機械人形#kh1	HIDDEN_NPC,{
	if (mobcount("kh_kiehl01","Robots#kh1::OnMyMobDead") < 1) {
		mes "觸碰試驗管後, 機械人形們就跳出來了";
		close2;
		monster "kh_kiehl01",18,181,"愛麗俄",1740,1,"機械人形#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,180,"愛麗瑟",1739,1,"機械人形#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,179,"愛麗俄",1740,1,"機械人形#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,178,"愛麗瑟",1739,1,"機械人形#kh1::OnMyMobDead";
		end;
	}
	else  {
		end;
	}

OnMyMobDead:
	if (mobcount("kh_kiehl01","機械人形#kh1::OnMyMobDead") < 1) { 
		makeitem 7506,1,"this",18,180;
		}
	end;
}

//----------------------------------------------------------------------------
// 基爾的房間; Dummy Robots
//----------------------------------------------------------------------------
kh_kiehl01,15,177,0	script	機械人形#kh2::RobotsKHQ	HIDDEN_NPC,{
	end;
}
kh_kiehl01,15,180,0	duplicate(RobotsKHQ)	機械人形#kh3	HIDDEN_NPC
kh_kiehl01,15,182,0	duplicate(RobotsKHQ)	機械人形#kh4	HIDDEN_NPC
kh_kiehl01,35,187,0	duplicate(RobotsKHQ)	機械人形#kh5	HIDDEN_NPC
kh_kiehl01,37,187,0	duplicate(RobotsKHQ)	機械人形#kh6	HIDDEN_NPC
kh_kiehl01,39,187,0	duplicate(RobotsKHQ)	機械人形#kh7	HIDDEN_NPC
kh_kiehl01,41,187,0	duplicate(RobotsKHQ)	機械人形#kh8	HIDDEN_NPC

//----------------------------------------------------------------------------
// 基爾的房間; Big Door, (Fifth, and final)
// - Anyone can pass through this door
// - Consumes 4 Solid Iron Pieces
//----------------------------------------------------------------------------
kh_kiehl01,166,187,0	script	巨大的門#BigDoorKHQ5	HIDDEN_NPC,{
	if (($@KHQuestBusy == 0) && (KielHyreQuest >= 74) && (KielHyreQuest <= 106)) {
		if (KielHyreQuest < 86) {
			mes "有一座巨大的門, 門好像可以移動傳來'吱支~吱支'";
			next;
			select("推門:踢門:搖晃門:拉門:抬門");
			mes "觸碰門之後, 魔物們就出現了, 難道是有什麼機關嗎?";
			close2;
			set @KHDoorPushAttempt,@KHDoorPushAttempt+1;
			monster "kh_kiehl01",163,183,"愛麗瑟",1739,1;
			monster "kh_kiehl01",163,179,"愛麗俄",1740,1;
			monster "kh_kiehl01",169,183,"愛麗瑟",1739,1;
			monster "kh_kiehl01",169,179,"愛麗俄",1740,1;
			if (@KHDoorPushAttempt >= 3) { 
				set KielHyreQuest,86; 
			}
			end;
		}
		else if ((KielHyreQuest > 84) && (KielHyreQuest < 94)) {
			mes "觸碰了門好幾次之後, 沉重的門輕輕的開啟了, 看樣子在門縫裡塞個東西用力的話門是可以開啟的";
			next;
			switch(select("鋼鐵:生鏽的鐵碎片:堅硬的鐵碎片:鐵碎片:螺絲:結束")) {
			case 1:
			case 2:
				break;
			case 3:
				if (countitem(7507) >= 1) {
					if (KielHyreQuest < 92) {
						mes "看樣子門稍微開啟了一點, ";
						mes "再用點力量的話門會開啟的樣子";
						delitem 7507,1; //Hard_Piece_of_Steel
						set KielHyreQuest,KielHyreQuest+2;
						close;
					}
					else if (KielHyreQuest == 92) {
						mes "使用了^0000FF堅硬的鐵碎片^000000之後, ";
						mes "形成了一個可以穿越的空間";
						delitem 7507,1; //Hard_Piece_of_Steel
						set KielHyreQuest,94;
						close;
					}
				}
				else {
					mes "門跟本就沒有在動";
					close;
				}
			case 4:
			case 5:
			case 6:
				mes "門跟本就沒有在動";
				close;
			}

			mes "門跟本就沒有在動";
			close;
		}
		else if ((KielHyreQuest >= 94) && (KielHyreQuest <= 104)) {
			if (.KHDoor5Opened == 0) {
				mes "穿越門";
				next;
				switch(select("是的:不要")) {
				case 1:
					close2;
					donpcevent "Big_Door_5_Warp::OnEnable";
					enablenpc "Big_Door_5_Warp";
					set .KHDoor5Opened,1;
					end;
				case 2:
					close;
				}
			}
			else {
				mes "門已經開啟著";
				close;
			}
		}
		else {
			mes "巨大的門關閉著";
			close;
		}
	}
	else {
		mes "門關閉的很緊打不開";
		close;
	}
}

kh_kiehl01,166,186,0	script	Big_Door_5_Warp	WARPNPC,1,1,{
	end;

OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_5_Warp";
	set getvariableofnpc(.KHDoor5Opened,"巨大的門#BigDoorKHQ5"),0;
	end;

OnInit:
	disablenpc "Big_Door_5_Warp";
	end;

OnTouch:
	if (KielHyreQuest >= 46)
		warp "kh_kiehl02",50,7;
	else
		warp "kh_kiehl01",166,183;
	end;
}

//----------------------------------------------------------------------------
// 基爾的房間; Kiehl_Room_Trap (Entry way trap)
//----------------------------------------------------------------------------
kh_kiehl02,49,10,0	script	Kiehl_Room_Trap	-1,5,3,{
	end;

OnTouch:
	if (.KHTrapSprung < 1) {
		set .KHTrapSprung,1;
		set $@KHQuestBusy,1;
		initnpctimer;
		monster "kh_kiehl02",47,13,"愛麗俄",1740,1;
		monster "kh_kiehl02",45,13,"愛麗瑟",1739,1;
		monster "kh_kiehl02",49,13,"恆量魔",1745,1;
		monster "kh_kiehl02",51,13,"愛麗俄",1740,1;
		monster "kh_kiehl02",53,13,"愛麗瑟",1739,1;
		monster "kh_kiehl02",49,13,"恆量魔",1745,1;
	}
	end;

OnTimer300000:
OnTimer600000:
OnTimer900000:
	if (getmapusers("kh_kiehl02") == 0) {
		donpcevent "KiehlRoom::OnReset";
		stopnpctimer;
	}
	end;

OnTimer1200000:
	donpcevent "KiehlRoom::OnReset";
	stopnpctimer;
	end;

OnGlobalTimerOff:
	stopnpctimer;
	end;
}

//----------------------------------------------------------------------------
// 基爾的房間; Kiehl
// - Timer will drop to 3 minutes once Kiehl is defeated.
//----------------------------------------------------------------------------
kh_kiehl02,50,52,4	script	齊爾#Original	902,{
	if (checkweight(908,200) == 0) {
		mes "請在這裡暫停一下 !!";
		mes "你所攜帶的物品太多了, 所以不能獲得物品；請把身上的物品減輕之後, 再來挑戰吧";
		close;
	}
	cutin "kh_kiel01",2;
	if ((KielHyreQuest < 94) || (KielHyreQuest >= 106)) {
		mes "[齊爾]";
		mes "......";
		mes ".........";
		mes "............";
		close2;
		cutin "",255;
		end;
	}
	if ((KielHyreQuest == 94) && (getvariableofnpc(.KHKilled,"KiehlRoom") < 5)) {
		mes "[齊爾]";
		mes "你終於找到我了, 來到我這寒舍真是辛苦你啦, 刺客大爺, 我也想按照約定把我的捲軸給你..";
		next;
		mes "[齊爾]";
		mes "如果把那個給拔走的話, 只會剩下軀殼的身體, 若你想要的話直接用你的實力來拿";
		close2;
		cutin "",255;
		set getvariableofnpc(.KHKilled,"KiehlRoom"),0;
		monster "kh_kiehl02",50,52,"愛麗俄",1740,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"愛麗瑟",1739,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"恆量魔",1745,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"愛麗俄",1740,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"愛麗瑟",1739,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"恆量魔",1745,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"愛麗俄",1740,1,"KiehlRoom::OnKiehlMobDead";
		hideonnpc "齊爾#Original";
		end;
	}
	else if ((KielHyreQuest == 94) && (getvariableofnpc(.KHKilled,"KiehlRoom") >= 5)) {
		cutin "kh_kiel03",2;
		mes "[齊爾]";
		mes "果然是爸爸所選中的刺客實力還不錯嗎?";
		mes "好吧, 就這樣閒著也很無聊, ";
		mes "就聽聽看我爸到底委託了你哪些事情呢?";
		mes "是不是叫你來殺我呢?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "^FF0000啟 海伊洛^000000先生叫我來阻止你, ";
		mes "他對自己的過失非常的痛苦呀, ";
		mes "現在該停止這一切了吧, ";
		mes "^0000FF齊爾^000000隨我回到老爸的身邊吧";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "你現在這是欺負同族啊, 那是不對的!";
		next;
		cutin "kh_kiel01",2;
		mes "[齊爾]";
		mes "同族啊..";
		mes "可是你們也不是一樣嗎, 神的創造物是人類, 和人類的創造物是機械人";
		next;
		mes "[齊爾]";
		mes "為了自身的利益把同種的人類殺掉或做實驗的你們, 和為了我的目標, 我把我做的同族們提供給所需要的人們, ";
		mes "這我和你們有什麼不同的嗎?";
		next;
		mes "[齊爾]";
		mes "雖然我所做的人形們, 有著和人類一樣的身軀, 但在沒有學習之前是不會感受到感情, 連疼痛和痛苦都感覺不到";
		next;
		cutin "kh_kiel04",2;
		mes "[齊爾]";
		mes "可是人類是不一樣的, 對在眼前感覺到痛苦, 和哭訴感情的自己同族 '人類 ', 你們人類還不是亂來嘛, 那才是不正常的事情呀..";
		mes "假如你有頭腦的話你就會知道的";
		next;
		mes "[齊爾]";
		mes "很抱歉我要拒絕你的提案, 為了一段扭曲的愛情, 卻讓一個家庭破滅的殘忍的父親, 我不相信他會能比我做出更好的人形來啊";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "是啊, 當然也會有做錯了事卻不知悔改的人啊, 可是^0000FF齊爾^000000跟你攜手合作的雷根貝勒社才是, 這種人類的代表象徵啊";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "請你跟他們停止交易吧!再繼續的幫助他們的話會增加更多不幸的人類呀";
		next;
		cutin "kh_kiel02",2;
		mes "[齊爾]";
		mes "你還記得進到這裡時所看到的第一個房間嗎?有著裝滿五對小孩物品的那個房間..";
		next;
		mes "[齊爾]";
		mes "那裡是我被剛製作出來時的房間啊, 可是為什麼人只有一位物品卻是五雙呢?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "?????";
		next;
		cutin "kh_kiel03",2;
		mes "[齊爾]";
		mes "當初第2代所做出來的機械人形是有五臺的關係呀, 我們從剛出生的那一天開始, 就被從雷根貝勒社派遣的職員受到教育了";
		next;
		mes "[齊爾]";
		mes "對我們機械人形來說是一場嚴謹的教育啊.. 筋力試驗、學習能力試驗、跟著狀況不同的感情表現試驗..";
		next;
		mes "[齊爾]";
		mes "也許是很早就擁有的缺陷問題..或是錯誤的教育問題, 其它四位在學習和試驗當中不幸死掉了";
		next;
		mes "[齊爾]";
		mes "之後所生存下來的只有我一位, 我父親對那時候沒有名字的我, 為我取名叫 ^0000FF齊爾^000000了";
		next;
		mes "[齊爾]";
		mes "雷根貝勒社? 他們的那些非人類的行動, 我比任何人都知道的清楚啊, 可是我不會冤枉他們的";
		next;
		mes "[齊爾]";
		mes "因為那是人類的本質, 想站的和想擁有的比人家高又多那就是人類的本性啊!";
		next;
		mes "[齊爾]";
		mes "呼無... 對不起 對不起, 我不想再跟你說話了, 我會放你走的, 請你就回去吧";
		next;
		cutin "",255;
		mes "[米契爾]";
		mes "不能這樣子啊!^0000FF齊爾 海伊洛^000000!";
		mes "我們把你以製作不法武器和走私的嫌疑來拘捕你";
		set KielHyreQuest,100;
		hideoffnpc "米契爾#KiehlRoom";
		hideoffnpc "要員#KHAgent1";
		hideoffnpc "要員#KHAgent2";
		hideoffnpc "要員#KHAgent3";
		hideoffnpc "要員#KHAgent4";
		next;
	}
	if ((KielHyreQuest == 100) && (getvariableofnpc(.KHKilledBoss,"KiehlRoom") < 1)) {
		set getvariableofnpc(.KHKilledBoss,"KiehlRoom"),0;
		cutin "kh_kiel01",2;
		mes "[齊爾]";
		mes "唉喲 唉喲..";
		mes "是盟軍來了嗎?看樣子你是不會乖乖的回去了..那我只好讓你嘗點苦頭囉..";
		next;
		mes "[齊爾]";
		mes "首先呢";
		mes "討厭的公務員們, 暫時先不要打擾我";
		next;
		donpcevent "::OnKHSpiderWeb";
		mes "[米契爾]";
		mes "這是!!!我們上當了..!!";
		next;
		cutin "kh_kiel03",2;
		mes "[齊爾]";
		mes "那麼刺客先生, 就讓我看一下你的實力吧?";
		close2;
		cutin "",255;
		monster "kh_kiehl02",50,52,"齊爾",1733,1,"KiehlRoom::OnKiehlDead";
		hideonnpc "齊爾#Original";
		end;
	}
	else if ((KielHyreQuest == 100) && (getvariableofnpc(.KHKilledBoss,"KiehlRoom") == 1)) {
		cutin "kh_kiel02",2;
		mes "[齊爾]";
		mes "唉喲....";
		mes "是我....太大意了嗎..";
		mes "果然是有錢的爸爸";
		mes "送來的刺客是不一樣的..";
		next;
		cutin "kh_kiel03",2;
		mes "[齊爾]";
		mes "呵呵呵....我就是不能";
		mes "讓你們這些傢伙把我給拖走了, 你就和我去極樂世界吧, 呵呵呵...";
		mes "不對我沒有靈魂啊, ";
		mes "應該只有你們才會去吧...";
		mes "呵呵呵..";
		next;
		mapannounce "kh_kiehl02","嘻嘻嘻嘻嘻嘻~ 得露~得露露露~ 鏘咖~",bc_map,"0xFF0000";
		mes "[米契爾]";
		mes "!!!!";
		next;
		mes "[米契爾]";
		mes "!!!!這聲音是! 大條啦, 門被關起來了!!不能從這裡出去啦!";
		next;
		mes "[齊爾]";
		mes "哈哈哈哈....我們都變成白色灰燼吧~";
		next;
		mes "[米契爾]";
		mes "你在幹嘛呀!請你趕快使用^FF0000啟 海伊洛^000000給你的動力裝置吧!!!!!";
		next;
		mapannounce "kh_kiehl02","嗶啟~ 積翁~",bc_map,"0xFF0000";
		mes "[齊爾]";
		mes "唉喲 我被他們打敗了, 不過沒有關係啊, 擁有自爆裝置的人並不是我啊...";
		mes "呼呼";
		next;
		mes "[米契爾]";
		mes "什麼?!難道是有後臺嗎!";
		mes "應該不會是 雷根貝勒家吧!!";
		next;
		mes "[????]";
		mes "唉喲 唉喲....";
		mes "你是說 雷根貝勒啊....";
		mes "讓我有點不悅啊, 我還故意的把本尊送出去迎接你的..";
		next;
		mes "[米契爾]";
		mes "誰啊! 表明身份吧!!";
		next;
		mes "[????]";
		mes "唉喲 唉喲...這麼快就把我的聲音給忘掉了嗎?";
		next;
		mes "[米契爾]";
		mes "這聲音...難道是!!!";
		next;
		hideoffnpc "齊爾#Copy";
		next;
		cutin "kh_kiel01",0;
		mes "[齊爾]";
		mes "玩笑有點過頭了, 不好意思, 我來正式的跟你介紹, 我叫^0000FF齊爾 海伊洛^000000";
		next;
		mes "[米契爾]";
		mes "...怎麼會....^0000FF齊爾^000000會有兩位呢!!";
		next;
		cutin "kh_kiel03",2;
		mes "[齊爾]";
		mes "唉喲....看樣子你是忘記了, 我們是機械人形啊, ^0000FF米契爾 拉音拉^000000小姐...";
		next;
		mes "[米契爾]";
		mes "???!你怎麼會知道我名字呢...";
		next;
		mes "[齊爾]";
		mes "難道....你以為你以為只有你們才有間諜嗎?";
		next;
		mes "[蒙面男子]";
		mes "很抱歉, 米契爾小姐";
		next;
		mes "[米契爾]";
		mes "布凱嗚斯!";
		mes "你怎麼會...你是....之前不是受了重傷, 還營救總統的人物啊..";
		next;
		mes "[布凱嗚斯]";
		mes "為了滲透這點犧牲是微不足道的, 米契爾小姐, 曾囑咐我要設防親信的你, 應該不會對突然出現的我有所信賴吧?";
		next;
		mes "[米契爾]";
		mes "唉喲 天啊.... 就這麼輕易的被他打敗了... 非常抱歉總統先生...";
		next;
		mes "[齊爾]";
		mes "唉喲 唉喲....把淑女給嚇著了, 真的是不像個神士啊, 凱音哲先生..";
		mes "呼呼, 很可惜本來想跟你能多聊一點, 現在時間剩不多了";
		next;
		cutin "kh_kiel01",2;
		mes "[齊爾]";
		mes "現在自爆裝置已經啟動了, 5分鐘後這裡會消失不見的, ^0000FF米契爾 拉音拉^000000小姐希望你能跟我們一起離開";
		next;
		mes "[齊爾]";
		mes "我對秀髮茲發德的總統先生, 目前的想法感到很好奇啊";
		next;
		mes "[齊爾]";
		mes "^0000FF米契爾^000000小姐就拜託你了, 凱音哲先生啊!";
		mes "當然要把淑女鄭重的送回去啊";
		next;
		mes "[布凱嗚斯-凱音哲]";
		mes ".......";
		next;
		mes "[米契爾]";
		mes "放開我!";
		mes "放手啊 布凱嗚斯!!";
		hideonnpc "米契爾#KiehlRoom";
		hideonnpc "要員#KHAgent1";
		hideonnpc "要員#KHAgent2";
		hideonnpc "要員#KHAgent3";
		hideonnpc "要員#KHAgent4";
		next;
		cutin "kh_kiel02",2;
		mes "[齊爾]";
		mes "來, 這一邊整理好了...現在跟剩下的人們來聊一聊天吧?";
		next;
		mes "[齊爾]";
		mes "啊.....可是這怎麼辦啊...好像沒有剩下多餘的時間啊, 哈哈, 對刺客先生是有點不好意思啦, 和你沒有時間聊天啦";
		next;
		cutin "kh_kiel04",2;
		mes "[齊爾]";
		mes "這裡看樣子快要倒塌了, 請你快一點離開會對你比較好";
		next;
		mes "[齊爾]";
		mes "還有即然你已經來了, 可以幫我送一件禮物給我父親嗎?";
		next;
		cutin "kh_kiel01",2;
		mes "[齊爾]";
		mes "我想我父親會叫你來, 是想從我的身體裡拿出^FF0000戒指^000000吧?當我第一次看到這個時我也嚇了一大跳啊";
		next;
		mes "[齊爾]";
		mes "我想是一件很寶貴的物品吧..假如不小心被我破壞掉了的話, 不知道他要該怎麼辦呢....";
		next;
		mes "[齊爾]";
		mes "23年來你真的辛苦了, 你現在可以休息了, 舊型 ^0000FF齊爾^000000先生..";
		next;
		specialeffect EF_DEVIL;
		next;
		mes "[齊爾]";
		mes "我為了表示沒有攻擊的意思, 就把我的本體留在這邊離開了, 請把^FF0000戒指^000000取出後拿給我父親吧";
		next;
		mes "[齊爾]";
		mes "從父親那裡得到的身體現在還給他, 從現在開始我和我父親沒有任何的姻緣關係存在了, 請你轉告給他";
		next;
		mes "[齊爾]";
		mes "我已經不再是我父親設計圖裡所捆綁的第2代人形啦, 而是自我研發的第 4代款式了";
		next;
		mes "[齊爾]";
		mes "這樣轉述給他的話 他會理解的, 現在只剩下3分鐘了, 我把出去的路為你開啟 請你快點回去吧..那麼就再見了..";
		delitem 7504,1; //Toy_Motor
		set KielHyreQuest,104;
		hideonnpc "齊爾#Copy";
		donpcevent "Kiehl_Room_Exit::OnEnable";			
		enablenpc "Kiehl_Room_Exit";
		initnpctimer;
		cutin "",255;
		close;
	}
	if (KielHyreQuest == 104) {
		cutin "kh_kiel02",2;
		mes "從不能行動的 ^0000FF齊爾^000000身上 把 ^FF0000戒指^000000給拿出來了";
		getitem 7508,1; //Elysia_Ring
		set KielHyreQuest,106;
		close2;
		cutin "",255;
		end;
	}
	else{
		cutin "kh_kiel02",2;
		mes "只剩下不能行動的舊型 ^0000FF齊爾^000000身軀了";
		close2;
		cutin "",255;
		end;
	}


OnTimer180000:
	stopnpctimer;
	mapannounce "kh_kiehl02","嗶意意意~",bc_npc,0xFF0000;
	donpcevent "KiehlRoom::OnReset";
	end;

OnTimer179000:
	mapannounce "kh_kiehl02","離爆炸只剩下1秒了",bc_npc,0xFF0000;
	end;

OnTimer178000:
	mapannounce "kh_kiehl02","離爆炸只剩下2秒了",bc_npc,0xFF0000;
	end;

OnTimer177000:
	mapannounce "kh_kiehl02","離爆炸只剩下3秒了",bc_npc,0xFF0000;
	end;

OnTimer176000:
	mapannounce "kh_kiehl02","離爆炸只剩下4秒了",bc_npc,0xFF0000;
	end;

OnTimer175000:
	mapannounce "kh_kiehl02","離爆炸只剩下5秒了",bc_npc,0xFF0000;
	end;

OnTimer170000:
	mapannounce "kh_kiehl02","離爆炸只剩下10秒了",bc_npc,0xFF0000;
	end;

OnTimer160000:
	mapannounce "kh_kiehl02","離爆炸只剩下20秒了",bc_npc,0xFF0000;
	end;

OnTimer150000:
	mapannounce "kh_kiehl02","離爆炸只剩下30秒了",bc_npc,0xFF0000;
	end;

OnTimer120000:
	mapannounce "kh_kiehl02","離爆炸只剩下1分鐘了",bc_npc,0xFF0000;
	end;

OnTimer60000:
	mapannounce "kh_kiehl02","離爆炸只剩下2分鐘了",bc_npc,0xFF0000;
	end;

OnTimer1000:
	mapannounce "kh_kiehl02","離爆炸只剩下3分鐘了",bc_npc,0xFF0000;
	end;
}

//----------------------------------------------------------------------------
// 基爾的房間; NPC for mob control, timers, and other junk.
//----------------------------------------------------------------------------
kh_kiehl02,1,1,0	script	KiehlRoom	-1,{
	end;

OnKiehlMobDead:
	set .KHKilled,.KHKilled+1;
	if (.KHKilled == 5) { 
		hideoffnpc "齊爾#Original"; 
	}
	end;

OnKiehlDead:
	set .KHKilledBoss,1;
	hideoffnpc "齊爾#Original";
	end;
	
OnReset:
	donpcevent "Kiehl_Room_Trap::OnGlobalTimerOff";
	if (getmapusers("kh_kiehl02") > 0)
		mapwarp "kh_kiehl02","lighthalzen",192,200;
	killmonsterall "kh_kiehl02";
	disablenpc "Kiehl_Room_Exit";
	hideonnpc "米契爾#KiehlRoom";
	hideonnpc "要員#KHAgent1";
	hideonnpc "要員#KHAgent2";
	hideonnpc "要員#KHAgent3";
	hideonnpc "要員#KHAgent4";
	hideonnpc "齊爾#Copy";
	hideoffnpc "齊爾#Original"; 
	set .KHKilledBoss,0;
	set .KHKilled,0;
	set getvariableofnpc(.KHTrapSprung,"Kiehl_Room_Trap"),0;
	set $@KHQuestBusy,0;
	end;
}

//----------------------------------------------------------------------------
// 基爾的房間; Mitchell and Agents. (Floating NPC + Duplicates)
//----------------------------------------------------------------------------
kh_kiehl02,49,55,6	script	米契爾#KiehlRoom	4_F_JOB_HUNTER,{
	end;
OnInit:
	hideonnpc "米契爾#KiehlRoom";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}

kh_kiehl02,53,52,4	script	要員#KHAgent1	880,{
	end;
OnInit:
	hideonnpc "要員#KHAgent1";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}

kh_kiehl02,51,49,1	script	要員#KHAgent2	880,{
	end;
OnInit:
	hideonnpc "要員#KHAgent2";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}

kh_kiehl02,47,50,0	script	要員#KHAgent3	880,{
	end;
OnInit:
	hideonnpc "要員#KHAgent3";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}

kh_kiehl02,46,53,6	script	要員#KHAgent4	880,{
	end;
OnInit:
	hideonnpc "要員#KHAgent4";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}


//----------------------------------------------------------------------------
// 基爾的房間; Copy of Kiehl.
//----------------------------------------------------------------------------
kh_kiehl02,48,53,6	script	齊爾#Copy	4_M_KHKIEL,{
	end;

OnInit:
	hideonnpc "齊爾#Copy";
	end;
}

//----------------------------------------------------------------------------
// 基爾的房間; Kiehl_Room_Exit
//----------------------------------------------------------------------------
kh_kiehl02,50,59,0	script	Kiehl_Room_Exit	WARPNPC,1,1,{
OnTouch:
	if (getmapusers("kh_kiehl02") < 1)
		donpcevent "KiehlRoom::OnReset";
	warp "lighthalzen",193,202;
	end;

OnEnable:
	specialeffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Kiehl_Room_Exit";
	end;
}

//============================================================
// Old changelog
//============================================================
//= 1.0 First version, needs testing [Playtester]
//= 1.1 Copied over some changes made by -Tsuyuki- [L0ne_W0lf]
//=     Reworked variables slightly so that the permenents ones aside from the 
//=     main tracking variable, are deleted when no longer needed. Renamed
//=     several variables that handle strings to @KHInput$. [L0ne_W0lf]
//= 1.2 Removed duplicate NPCs. [Toms]
//= 1.3 More Bug fixes, fixed typo. Updated Additional comments. [L0ne_W0lf]
//= 1.4 Fixed doors not resetting in kh_kiehl01 after 30 second timer is up. [L0ne_W0lf]
//= 1.5 Another bug fixed (&& instead of ||). [L0ne_W0lf]
//= 1.6 More squashed bugs with if checking. [L0ne_W0lf]
//= 1.7 Corrected some spelling mistakes. [Balish]
//=     Corrected Exploit with the pub man, giving infinite wine and money.
//=     Corrected pool and map not showing text for some states of the quest.
//=     Corrected Elly showing cutin but not text for some states of the quest (causing players to log off to continue).
//=     Let fisherman talk to you when you have 10 fishes OR MORE.
//=     Corrected not letting you enter the tombstone after finishing the quest.
//= 1.8 Elly now deletes the Iron_Box, and Kiel Hyre deletes the Pin. [L0ne_W0lf]
//=     More security on the 5th Big Door, now makes sure no one outside of who-
//=     acticated it initially can use it. Resets after 10 minutes to make it.
//=     Made it so that you need to be at least step 84 to activate the final door.
//=     Corrected not deleting Allysia's Ring from inventory.
//= 1.9 Exit will now enable if you are just retrieving the Ring, keeps you from getting stuck. [L0ne_W0lf]
//=     Corrected "KH_Kielh02", was setting off a debug, invalid map index. Should have been "kh_Kiehl02"
//=     Made .KHQuestBusy$ into a temp global variable. $@KHQuestBusy$. 
//= 2.0 Changed the labels on the "Big Doors" to "Identifier Names" to prevent an error with using getvariableofnpc [L0ne_W0lf]
//= 2.1 Fifth door now checks for a variable HIGHER or EQUAL to 74 not 84, as pointed out by Stollen. [L0ne_W0lf]
//= 2.2 Another fix for Elly, no longer RESETS to 26 when you talk to her. [L0ne_W0lf]
//= 2.3 Should NOT have been setting .KHQuestBusy at all. It's not used or accessed anymore. Removed. [L0ne_W0lf]
//= 2.4 Lots of fixes (4ish) from Valandi. [L0ne_W0lf]
//=     Added a getmapuser check to the mapwarp in KHTimerEnd so it's not trying to warp out 0 users. [L0ne_W0lf]
//= 2.5 Fixed several small issues (and large one) such as typos in cutins, typos in dialog, etc. [L0ne_W0lf]
//=     Added some of the missing dialogs for several NPCs, and fixed a few NPC locations.
//=     ALL books can now trigger the wall.
//=     Allysia will now summon 4 (was 2) G_CONSTANTS instead of REGULAR constants.
//=     Fixed where Golden_Key and Kiel_Button are deleted.
//=     Removed KHTimerEnd, and instead use OnReset.
//=     Fixed typo in the second NPC that gives Black Keycards.
//=     Added Monster Warps. (Keeps monsters from being in dungeon quest area.) [Non-functional]
//= 2.6 Stupid mistake, accidentally had 4 copies of the same script in 1... [L0ne_W0lf the bonehead]
//= 2.7 Fixed the wrong name being displayed for Kiel Hyre in one dialog. 
//=     Removed $@KH_DoorInvoker entirely. The quest is now working like it should according to iRO.
//=     Fixed up a few more NPC headers. Facing direction fixes mostly this time.
//=     More progression changes to Kiehl Hyre. He no longer stops dialog after the agents appear.
//= 2.8 Fixed the weight checking in Vandt, and added official dialog. [L0ne_W0lf]
//=     Added weight checks for all NPCs that give items. Semi-official dialog.
//=     Got the missing portion of dialog for Mills'.
//=     Will add further proper dialogs as I get to them on the second runthrough of the quest.
//= 2.8a minor optimization with extra goto, else or empty switch [Lupus]
//= 2.9 Fixed the "enablenpc" problem with the missing spaces. No idea how it happened. [L0ne_W0lf]
//= 3.0 Fixed a typo in Elly, in her room. (was <= should have been <) [L0ne_W0lf]
//=     Added an 'end;' to the cookie basket. Kiel Hyre's final dialog will now delete all quest-related items.
//= 3.1 Moved the "delitem" for all related quest items to the proper NPC. [L0ne_W0lf]
//= 3.2 Fixed error with Allysia teling you to "Go away." maybe. [L0ne_W0lf]
//= 3.2b Fixed some typos and grammar mistakes. [SinSloth]
//= 3.3 Fixed the receiver log out bugs. [L0ne_W0lf]
//= 3.4 Fixed bug when u can't get a Yellow Keycard if u got the Blue one at first [Lupus]
//=     Note: There are many condition checks that should be omitted in the future fixed item names in item_db.txt / txt resources according the quest
//=     for items, should be used bitwise methods in a single variable. So let's fix the rest possible bugs (if they exist) and then optimize ^_-
//= 3.5 Changed the way the Black Keycard distibuting NPCs work slighty. [L0ne_W0lf]
//= 3.6 Keil Hyre removes ALL outstanding quest items when he is talked [L0ne_W0lf]
//=     to after finishing the quest.
//= 3.7 Corrected NPC names to fall within proper restrictions. [L0ne_W0lf]
//= 3.8 Corrected some delitems. (bugreport:690) [Samuray22]
//= 3.9 Fixed a cutin not being erased. (bugreport:1539) [L0ne_W0lf]
//============================================================
